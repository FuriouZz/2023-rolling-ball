var B=(s,i,t)=>{if(!i.has(s))throw TypeError("Cannot "+t)};var e=(s,i,t)=>(B(s,i,"read from private field"),t?t.call(s):i.get(s)),h=(s,i,t)=>{if(i.has(s))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(s):i.set(s,t)},r=(s,i,t,o)=>(B(s,i,"write to private field"),o?o.call(s,t):i.set(s,t),t);import{G as Z,M as S,P as D,a as v,C as L,O as j,W as O}from"./three.module.615c85f2.js";const G=16;var u,z,M,w,y,x;class F extends Z{constructor(t){super();h(this,u,void 0);h(this,z,void 0);h(this,M,void 0);h(this,w,void 0);h(this,y,[]);h(this,x,0);this.onClear=t;const o=1,n=o*.1,a=new S(new D(o,o),new v({color:16711680})),p=new S(new D(o,o),new v({color:65280}));p.position.z=0,a.position.z=1,this.add(p,a),r(this,M,a),r(this,w,p),r(this,u,o),r(this,z,n)}get strokeColor(){return e(this,w).material.color}get fillColor(){return e(this,M).material.color}get size(){return e(this,u)}set size(t){r(this,u,t),e(this,M).scale.setScalar(t)}get strokeWidth(){return e(this,z)}set strokeWidth(t){r(this,z,t),e(this,w).scale.setScalar(e(this,u)+e(this,u)*t)}getUpdates({deltaTime:t,width:o,props:n,amplitude:a,offset:p}){e(this,y).length=0;const P=Math.ceil(t/G);for(;e(this,y).length<P;)e(this,y).push(()=>{const k=G*.05;r(this,x,e(this,x)+k),this.position.y=0,this.position.y+=Math.cos(e(this,x))*Math.sin(p+e(this,x)*a)*n.range.value,this.position.x+=k,this.rotateZ(k),this.position.x>o*.5&&(this.position.x=o*-.5,this.onClear&&this.onClear())});return e(this,y)}}u=new WeakMap,z=new WeakMap,M=new WeakMap,w=new WeakMap,y=new WeakMap,x=new WeakMap;var d,W,b,T,C,f;class X extends Z{constructor(){super();h(this,d,void 0);h(this,W,void 0);h(this,b,void 0);h(this,T,void 0);h(this,C,[]);h(this,f,0);const t=50,o=1,n=o*.1,a=new S(new L(o,t),new v({color:16711680}));a.name="fill";const p=new S(new L(o,t),new v({color:16711680}));p.name="stroke",p.position.z=0,a.position.z=1,this.add(p,a),r(this,b,a),r(this,T,p),r(this,d,o),r(this,W,n)}get strokeColor(){return e(this,T).material.color}get fillColor(){return e(this,b).material.color}get size(){return e(this,d)}set size(t){r(this,d,t),e(this,b).scale.setScalar(t)}get strokeWidth(){return e(this,W)}set strokeWidth(t){r(this,W,t),e(this,T).scale.setScalar(e(this,d)+e(this,d)*t)}getUpdates({deltaTime:t,width:o,props:n,amplitude:a,offset:p}){e(this,C).length=0;const P=Math.ceil(t/G);for(;e(this,C).length<P;)e(this,C).push(()=>{const k=G*.05;r(this,f,e(this,f)+k),this.position.y=this.size*2.75,this.position.y+=Math.abs(Math.cos(e(this,f)*.05))*(10+75*Math.abs(Math.sin(e(this,f)*.001))),this.position.y+=Math.abs(Math.sin(p+e(this,f)*a))*n.range.value,this.position.x+=k+Math.cos(e(this,f)*.01)*.25,this.position.x>o*.5&&(this.position.x=o*-.5)});return e(this,C)}}d=new WeakMap,W=new WeakMap,b=new WeakMap,T=new WeakMap,C=new WeakMap,f=new WeakMap;let l,c,g,m,R,I,U=.001,A=0,E={fillColor:{value:"#ffffff",type:"color"},strokeColor:{value:"#252525",type:"color"},range:{value:250}},H=async({scene:s,width:i,height:t})=>{l=new j(1,1,1,1,1,1e3),l.position.z=1,R=new O(i,t),I=new O(i,t);const o=-100;c=new F,c.position.z=o,c.position.y=t*-.5,c.size=100,c.strokeWidth=.05,c.traverse(n=>n.layers.set(1)),s.add(c),m=new S(new D(i,t),new v({map:R.texture,transparent:!0,opacity:.1,premultipliedAlpha:!1,depthTest:!1})),m.position.z=o,m.layers.set(2),s.add(m),g=new X,g.position.z=o+1,g.size=25,g.strokeWidth=.05,g.traverse(n=>n.layers.set(3)),s.add(g)},J=({renderer:s,scene:i,deltaTime:t,width:o,height:n})=>{s.autoClear=!1,c.fillColor.setStyle(E.fillColor.value),c.strokeColor.setStyle(E.strokeColor.value),c.onClear||(c.onClear=()=>{s.setRenderTarget(R),l.layers.set(1),s.clear(),s.render(i,l),U=.001+Math.random()*.001,A=Math.random()*Math.PI}),c.getUpdates({deltaTime:t,width:o,height:n,props:E,amplitude:U,offset:A}).forEach(a=>{a()}),s.setRenderTarget(null),g.getUpdates({deltaTime:t,width:o,height:n,props:E,amplitude:U,offset:A}).forEach(a=>{a()}),s.setRenderTarget(R),l.layers.set(1),s.clearDepth(),s.render(i,l),s.setRenderTarget(I),l.layers.set(3),s.clear(),s.setClearAlpha(.1),s.render(i,l),s.setRenderTarget(null),l.layers.set(2),m.material.map=R.texture,m.material.opacity=1,s.render(i,l),m.material.map=I.texture,m.material.opacity=1,s.render(i,l)},K=({width:s,height:i})=>{l.left=-s*.5,l.right=s*.5,l.top=i*.5,l.bottom=-i*.5,l.updateProjectionMatrix()},N="three";export{H as init,E as props,N as rendering,K as resize,J as update};
