var ca=Object.defineProperty;var da=(n,e,t)=>e in n?ca(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var hr=(n,e,t)=>(da(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function ae(){}function Zl(n,e){for(const t in e)n[t]=e[t];return n}function ha(n){return!!n&&(typeof n=="object"||typeof n=="function")&&typeof n.then=="function"}function $l(n){return n()}function Ei(){return Object.create(null)}function Ve(n){n.forEach($l)}function cn(n){return typeof n=="function"}function le(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let yn;function ma(n,e){return yn||(yn=document.createElement("a")),yn.href=e,n===yn.href}function ga(n){return Object.keys(n).length===0}function Hn(n,...e){if(n==null)return ae;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function xl(n){let e;return Hn(n,t=>e=t)(),e}function ne(n,e,t){n.$$.on_destroy.push(Hn(e,t))}function De(n,e,t,r){if(n){const i=es(n,e,t,r);return n[0](i)}}function es(n,e,t,r){return n[1]&&r?Zl(t.ctx.slice(),n[1](r(e))):t.ctx}function ze(n,e,t,r){if(n[2]&&r){const i=n[2](r(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)l[a]=e.dirty[a]|i[a];return l}return e.dirty|i}return e.dirty}function Fe(n,e,t,r,i,l){if(i){const s=es(e,t,r,l);n.p(s,i)}}function Oe(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function Pm(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function Dm(n){return n==null?"":n}function we(n,e,t){return n.set(t),e}function O(n,e){n.appendChild(e)}function L(n,e,t){n.insertBefore(e,t||null)}function M(n){n.parentNode&&n.parentNode.removeChild(n)}function At(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function F(n){return document.createElement(n)}function Pe(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Re(n){return document.createTextNode(n)}function Z(){return Re(" ")}function Se(){return Re("")}function pe(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function zm(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function k(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function pa(n){return Array.from(n.childNodes)}function Ge(n,e){e=""+e,n.data!==e&&(n.data=e)}function Bn(n,e){n.value=e==null?"":e}function be(n,e,t,r){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function Ai(n,e,t){for(let r=0;r<n.options.length;r+=1){const i=n.options[r];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function _a(n){const e=n.querySelector(":checked");return e&&e.__value}let kn;function ba(){if(kn===void 0){kn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{kn=!0}}return kn}function ts(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const r=F("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=ba();let l;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=pe(window,"message",s=>{s.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{l=pe(r.contentWindow,"resize",e),e()}),O(n,r),()=>{(i||l&&r.contentWindow)&&l(),M(r)}}function q(n,e,t){n.classList[t?"add":"remove"](e)}function wa(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}function Ln(n,e){return new n(e)}let dn;function gt(n){dn=n}function St(){if(!dn)throw new Error("Function called outside component initialization");return dn}function Ft(n){St().$$.on_mount.push(n)}function va(n){St().$$.after_update.push(n)}function bt(n){St().$$.on_destroy.push(n)}function tt(){const n=St();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const l=wa(e,t,{cancelable:r});return i.slice().forEach(s=>{s.call(n,l)}),!l.defaultPrevented}return!0}}function mr(n,e){return St().$$.context.set(n,e),e}function Nn(n){return St().$$.context.get(n)}function Si(n){return St().$$.context.has(n)}function Ye(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}const Jt=[],ke=[];let $t=[];const Er=[],ya=Promise.resolve();let Ar=!1;function ka(){Ar||(Ar=!0,ya.then(Dr))}function xt(n){$t.push(n)}function xe(n){Er.push(n)}const gr=new Set;let Kt=0;function Dr(){if(Kt!==0)return;const n=dn;do{try{for(;Kt<Jt.length;){const e=Jt[Kt];Kt++,gt(e),Ea(e.$$)}}catch(e){throw Jt.length=0,Kt=0,e}for(gt(null),Jt.length=0,Kt=0;ke.length;)ke.pop()();for(let e=0;e<$t.length;e+=1){const t=$t[e];gr.has(t)||(gr.add(t),t())}$t.length=0}while(Jt.length);for(;Er.length;)Er.pop()();Ar=!1,gr.clear(),gt(n)}function Ea(n){if(n.fragment!==null){n.update(),Ve(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(xt)}}function Aa(n){const e=[],t=[];$t.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),$t=e}const Sn=new Set;let Lt;function de(){Lt={r:0,c:[],p:Lt}}function he(){Lt.r||Ve(Lt.c),Lt=Lt.p}function y(n,e){n&&n.i&&(Sn.delete(n),n.i(e))}function E(n,e,t,r){if(n&&n.o){if(Sn.has(n))return;Sn.add(n),Lt.c.push(()=>{Sn.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function Ti(n,e){const t=e.token={};function r(i,l,s,a){if(e.token!==t)return;e.resolved=a;let o=e.ctx;s!==void 0&&(o=o.slice(),o[s]=a);const u=i&&(e.current=i)(o);let f=!1;e.block&&(e.blocks?e.blocks.forEach((c,d)=>{d!==l&&c&&(de(),E(c,1,1,()=>{e.blocks[d]===c&&(e.blocks[d]=null)}),he())}):e.block.d(1),u.c(),y(u,1),u.m(e.mount(),e.anchor),f=!0),e.block=u,e.blocks&&(e.blocks[l]=u),f&&Dr()}if(ha(n)){const i=St();if(n.then(l=>{gt(i),r(e.then,1,e.value,l),gt(null)},l=>{if(gt(i),r(e.catch,2,e.error,l),gt(null),!e.hasCatch)throw l}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function Sa(n,e,t){const r=e.slice(),{resolved:i}=n;n.current===n.then&&(r[n.value]=i),n.current===n.catch&&(r[n.error]=i),n.block.p(r,t)}function Ta(n,e){E(n,1,1,()=>{e.delete(n.key)})}function Ca(n,e,t,r,i,l,s,a,o,u,f,c){let d=n.length,m=l.length,h=d;const _={};for(;h--;)_[n[h].key]=h;const g=[],p=new Map,v=new Map,A=[];for(h=m;h--;){const C=c(i,l,h),N=t(C);let K=s.get(N);K?r&&A.push(()=>K.p(C,e)):(K=u(N,C),K.c()),p.set(N,g[h]=K),N in _&&v.set(N,Math.abs(h-_[N]))}const T=new Set,I=new Set;function H(C){y(C,1),C.m(a,f),s.set(C.key,C),f=C.first,m--}for(;d&&m;){const C=g[m-1],N=n[d-1],K=C.key,x=N.key;C===N?(f=C.first,d--,m--):p.has(x)?!s.has(K)||T.has(K)?H(C):I.has(x)?d--:v.get(K)>v.get(x)?(I.add(K),H(C)):(T.add(x),d--):(o(N,s),d--)}for(;d--;){const C=n[d];p.has(C.key)||o(C,s)}for(;m;)H(g[m-1]);return Ve(A),g}function Ra(n,e){const t={},r={},i={$$scope:1};let l=n.length;for(;l--;){const s=n[l],a=e[l];if(a){for(const o in s)o in a||(r[o]=1);for(const o in a)i[o]||(t[o]=a[o],i[o]=1);n[l]=a}else for(const o in s)i[o]=1}for(const s in r)s in t||(t[s]=void 0);return t}function Ia(n){return typeof n=="object"&&n!==null?n:{}}function et(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function z(n){n&&n.c()}function P(n,e,t,r){const{fragment:i,after_update:l}=n.$$;i&&i.m(e,t),r||xt(()=>{const s=n.$$.on_mount.map($l).filter(cn);n.$$.on_destroy?n.$$.on_destroy.push(...s):Ve(s),n.$$.on_mount=[]}),l.forEach(xt)}function D(n,e){const t=n.$$;t.fragment!==null&&(Aa(t.after_update),Ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ma(n,e){n.$$.dirty[0]===-1&&(Jt.push(n),ka(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ue(n,e,t,r,i,l,s,a=[-1]){const o=dn;gt(n);const u=n.$$={fragment:null,ctx:[],props:l,update:ae,not_equal:i,bound:Ei(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Ei(),dirty:a,skip_bound:!1,root:e.target||o.$$.root};s&&s(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(c,d,...m)=>{const h=m.length?m[0]:d;return u.ctx&&i(u.ctx[c],u.ctx[c]=h)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](h),f&&Ma(n,c)),d}):[],u.update(),f=!0,Ve(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const c=pa(e.target);u.fragment&&u.fragment.l(c),c.forEach(M)}else u.fragment&&u.fragment.c();e.intro&&y(n.$$.fragment),P(n,e.target,e.anchor,e.customElement),Dr()}gt(o)}class fe{$destroy(){D(this,1),this.$destroy=ae}$on(e,t){if(!cn(t))return ae;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ga(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yt=[];function ns(n,e){return{subscribe:st(n,e).subscribe}}function st(n,e=ae){let t;const r=new Set;function i(a){if(le(n,a)&&(n=a,t)){const o=!Yt.length;for(const u of r)u[1](),Yt.push(u,n);if(o){for(let u=0;u<Yt.length;u+=2)Yt[u][0](Yt[u+1]);Yt.length=0}}}function l(a){i(a(n))}function s(a,o=ae){const u=[a,o];return r.add(u),r.size===1&&(t=e(i)||ae),a(n),()=>{r.delete(u),r.size===0&&t&&(t(),t=null)}}return{set:i,update:l,subscribe:s}}function Ba(n,e,t){const r=!Array.isArray(n),i=r?[n]:n,l=e.length<2;return ns(t,s=>{let a=!1;const o=[];let u=0,f=ae;const c=()=>{if(u)return;f();const m=e(r?o[0]:o,s);l?s(m):f=cn(m)?m:ae},d=i.map((m,h)=>Hn(m,_=>{o[h]=_,u&=~(1<<h),a&&c()},()=>{u|=1<<h}));return a=!0,c(),function(){Ve(d),f(),a=!1}})}let Sr=new Map;function La(n,e){const t=localStorage.getItem(`fragment.${n}`);return t?typeof t=="string"?JSON.parse(t):t:e}function Na(n,e){localStorage.setItem(`fragment.${n}`,JSON.stringify(e))}function $e(n,e,{persist:t=!1,reset:r=!1}={}){const i=t&&!r?La(n,e):e,l=st(i);return t&&l.subscribe(s=>{Na(n,s)}),Sr.set(n,l),l}function rs(n,e,{persist:t=!1,reset:r=!1}={}){return Sr.has(n)?Sr.get(n):$e(n,e,{persist:t,reset:r})}const nt=rs("layout.current",{},{persist:!1}),pt=$e("layout",{editing:!1,previewing:!1,registerChild:(n,e)=>{Ft(()=>{n.children=e(),n.root&&nt.set(Pa(n))})}});function Pa(n){return JSON.parse(JSON.stringify(n,(e,t)=>{if(!(t instanceof HTMLElement))return t}))}function ct(n=()=>{},e=xl(nt)){const{children:t=[]}=e;n(e);for(let r=0;r<t.length;r++){const i=t[r];ct(n,i)}}const Da=(n,e)=>{nt.update(t=>(ct(r=>{r.id===n.id&&(r.children=e)},t),t))},za=n=>{nt.update(e=>(ct(t=>{!t.root&&t.type!=="module"&&(t.depth=t.depth+1)},n),n))},Fa=(n,e)=>{nt.update(t=>(ct(r=>{if(r.id===n.parent){const i=r.children.findIndex(a=>a.id===n.id),{size:l}=r.children[i];r.children[i].size=l*.5,e.size=l*.5;const s=[...r.children];s.splice(i+1,0,e),r.children=s}}),t))},Oa=(n,e)=>{nt.update(t=>(ct(r=>{r.id===n.id&&(r.children=[...r.children,e])},t),t))},is=n=>{nt.update(e=>(ct(t=>{const{children:r=[]}=t,i=r.findIndex(l=>l.id===n.id);if(i>=0){const l=[...r];l.splice(i,1),l.forEach(s=>{s.size=1/l.length}),l.length===0&&is(t),t.children=l}},e),e))},Ua=(n,e={})=>{nt.update(t=>(ct(r=>{r.mID===n.mID&&(typeof e=="object"?Object.assign(r,e):typeof e=="function"&&Object.assign(r,e(r)))},t),t))},ja=(n=[])=>{nt.update(e=>(ct(t=>{n.forEach(r=>{r.id===t.id&&(t.size=r.size)})},e),e))},Ci=st([]);let ls=["log","warn","error","dir"],Pn=!1,ss={};nt.subscribe(n=>{let e=!1;ct(t=>{t.type==="module"&&t.name==="console"&&(e=!0)},n),e&&!Pn?Ha():Pn&&!e&&Ga()});let os=console.clear;function Ha(){Pn=!0,ls.forEach(n=>{const e=console[`${n}`];ss[`${n}`]=e,console[`${n}`]=(...t)=>{let r=t.some(i=>typeof i=="string"&&i.includes("[vite]"));r||e(...t),Ci.update(i=>{if(r)return i;if(i.length>0){const l=i[i.length-1],{level:s,args:a}=l;if(s===n&&a[0]===t[0])return i[i.length-1].count++,i}return[...i,{level:n,args:t,count:1}]})}}),console.clear=()=>{os(),Ci.update(()=>[])}}function Ga(){Pn=!1,ls.forEach(n=>{const e=ss[n];console[`${n}`]=e}),console.clear=os}function Va(n){let e;return{c(){e=F("div"),e.innerHTML=`<div class="icon-cross-side svelte-13vdmu3"></div> 
	<div class="icon-cross-side svelte-13vdmu3"></div>`,k(e,"class","icon-cross svelte-13vdmu3")},m(t,r){L(t,e,r)},p:ae,i:ae,o:ae,d(t){t&&M(e)}}}class as extends fe{constructor(e){super(),ue(this,e,null,Va,le,{})}}function Wa(n){let e,t,r,i,l,s,a,o;const u=n[8].default,f=De(u,n,n[7],null);return{c(){e=F("div"),t=F("button"),r=F("span"),i=Re(n[0]),l=Z(),f&&f.c(),k(r,"class","label"),q(r,"visually-hidden",!n[2]),k(t,"class","button svelte-12tqpz"),t.disabled=n[1],k(t,"title",n[3]),k(e,"class","button-container svelte-12tqpz"),q(e,"disabled",n[1])},m(c,d){L(c,e,d),O(e,t),O(t,r),O(r,i),O(t,l),f&&f.m(t,null),s=!0,a||(o=[pe(t,"click",n[9]),pe(t,"mouseenter",n[10]),pe(t,"mouseleave",n[11])],a=!0)},p(c,[d]){(!s||d&1)&&Ge(i,c[0]),(!s||d&4)&&q(r,"visually-hidden",!c[2]),f&&f.p&&(!s||d&128)&&Fe(f,u,c,c[7],s?ze(u,c[7],d,null):Oe(c[7]),null),(!s||d&2)&&(t.disabled=c[1]),(!s||d&8)&&k(t,"title",c[3]),(!s||d&2)&&q(e,"disabled",c[1])},i(c){s||(y(f,c),s=!0)},o(c){E(f,c),s=!1},d(c){c&&M(e),f&&f.d(c),a=!1,Ve(o)}}}function qa(n,e,t){let{$$slots:r={},$$scope:i}=e,{value:l=null}=e,{label:s}=e,{disabled:a=!1}=e,{showLabel:o=!0}=e,{title:u=""}=e,{context:f=null}=e,{key:c=""}=e;function d(_){Ye.call(this,n,_)}function m(_){Ye.call(this,n,_)}function h(_){Ye.call(this,n,_)}return n.$$set=_=>{"value"in _&&t(4,l=_.value),"label"in _&&t(0,s=_.label),"disabled"in _&&t(1,a=_.disabled),"showLabel"in _&&t(2,o=_.showLabel),"title"in _&&t(3,u=_.title),"context"in _&&t(5,f=_.context),"key"in _&&t(6,c=_.key),"$$scope"in _&&t(7,i=_.$$scope)},[s,a,o,u,l,f,c,i,r,d,m,h]}class Et extends fe{constructor(e){super(),ue(this,e,qa,Wa,le,{value:4,label:0,disabled:1,showLabel:2,title:3,context:5,key:6})}}function Ka(n){let e,t,r,i;return{c(){e=F("div"),t=Pe("svg"),r=Pe("path"),k(r,"stroke","currentColor"),k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","1.5"),k(r,"d","M15.25 10.75L12 14.25L8.75 10.75"),k(t,"class","chevron chevron-bottom"),k(t,"width",n[0]),k(t,"height",n[1]),k(t,"fill","none"),k(t,"viewBox","0 0 24 24"),k(e,"class","chevrons svelte-hcggz5"),k(e,"style",i=`width: ${n[0]}px;`)},m(l,s){L(l,e,s),O(e,t),O(t,r)},p(l,[s]){s&1&&k(t,"width",l[0]),s&2&&k(t,"height",l[1]),s&1&&i!==(i=`width: ${l[0]}px;`)&&k(e,"style",i)},i:ae,o:ae,d(l){l&&M(e)}}}function Ya(n,e,t){let{width:r=24}=e,{height:i=24}=e;return n.$$set=l=>{"width"in l&&t(0,r=l.width),"height"in l&&t(1,i=l.height)},[r,i]}class us extends fe{constructor(e){super(),ue(this,e,Ya,Ka,le,{width:0,height:1})}}function Ri(n,e,t){const r=n.slice();return r[14]=e[t],r}function Ii(n){let e,t=n[14].label+"",r,i,l,s;return{c(){e=F("option"),r=Re(t),e.__value=i=n[14].value,e.value=e.__value,e.selected=l=n[4]===n[14].value,e.disabled=s=n[14].disabled},m(a,o){L(a,e,o),O(e,r)},p(a,o){o&32&&t!==(t=a[14].label+"")&&Ge(r,t),o&32&&i!==(i=a[14].value)&&(e.__value=i,e.value=e.__value),o&48&&l!==(l=a[4]===a[14].value)&&(e.selected=l),o&32&&s!==(s=a[14].disabled)&&(e.disabled=s)},d(a){a&&M(e)}}}function Mi(n){let e,t;return e=new us({}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Xa(n){let e,t,r,i,l,s,a,o=n[5],u=[];for(let c=0;c<o.length;c+=1)u[c]=Ii(Ri(n,o,c));let f=n[5].length>1&&Mi();return{c(){e=F("div"),t=F("div"),r=F("select");for(let c=0;c<u.length;c+=1)u[c].c();i=Z(),f&&f.c(),k(r,"class","select svelte-14quy77"),k(r,"name",n[0]),r.disabled=n[1],k(r,"title",n[2]),n[4]===void 0&&xt(()=>n[12].call(r)),k(t,"class","container svelte-14quy77"),k(e,"class","select-input svelte-14quy77"),q(e,"disabled",n[1]),q(e,"single",n[5].length===1)},m(c,d){L(c,e,d),O(e,t),O(t,r);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(r,null);n[11](r),Ai(r,n[4],!0),O(t,i),f&&f.m(t,null),l=!0,s||(a=[pe(r,"change",n[6]),pe(r,"change",n[12])],s=!0)},p(c,[d]){if(d&48){o=c[5];let m;for(m=0;m<o.length;m+=1){const h=Ri(c,o,m);u[m]?u[m].p(h,d):(u[m]=Ii(h),u[m].c(),u[m].m(r,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=o.length}(!l||d&1)&&k(r,"name",c[0]),(!l||d&2)&&(r.disabled=c[1]),(!l||d&4)&&k(r,"title",c[2]),d&48&&Ai(r,c[4]),c[5].length>1?f?d&32&&y(f,1):(f=Mi(),f.c(),y(f,1),f.m(t,null)):f&&(de(),E(f,1,1,()=>{f=null}),he()),(!l||d&2)&&q(e,"disabled",c[1]),(!l||d&32)&&q(e,"single",c[5].length===1)},i(c){l||(y(f),l=!0)},o(c){E(f),l=!1},d(c){c&&M(e),At(u,c),n[11](null),f&&f.d(),s=!1,Ve(a)}}}function fs(n,e=typeof n){return n===null?"null":n===void 0?"undefined":e==="object"?fs(n.value):e==="function"?n.name:n.toString()}function Ja(n,e,t){let{options:r=[]}=e,{name:i=""}=e,{value:l}=e,{disabled:s=!1}=e,{title:a=""}=e,{context:o=null}=e,{key:u=""}=e,f,c,d=[];const m=tt();function h(p){const v=d.findIndex(I=>I.value===p.currentTarget.value),A=r[v],T=typeof A=="object"?A.value:A;t(7,l=T),m("change",T)}function _(p){ke[p?"unshift":"push"](()=>{f=p,t(3,f)})}function g(){c=_a(this),t(4,c),t(8,r),t(7,l),t(5,d),t(8,r),t(7,l)}return n.$$set=p=>{"options"in p&&t(8,r=p.options),"name"in p&&t(0,i=p.name),"value"in p&&t(7,l=p.value),"disabled"in p&&t(1,s=p.disabled),"title"in p&&t(2,a=p.title),"context"in p&&t(9,o=p.context),"key"in p&&t(10,u=p.key)},n.$$.update=()=>{if(n.$$.dirty&384){t(5,d=[]);for(let p=0;p<r.length;p++){let v=r[p],A=typeof v,T=A==="object"&&typeof v.disabled=="boolean"?v.disabled:!1,I=A==="object"?v.value:v,H=fs(v),C;I===l&&t(4,c=H),v.label?C=v.label:C=H,t(5,d[p]={label:C,value:H,disabled:T},d)}}},[i,s,a,f,c,d,h,l,r,o,u,_,g]}class Gn extends fe{constructor(e){super(),ue(this,e,Ja,Xa,le,{options:8,name:0,value:7,disabled:1,title:2,context:9,key:10})}}const Qa="modulepreload",Za=function(n){return"/"+n},Bi={},Bt=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(l=>{if(l=Za(l),l in Bi)return;Bi[l]=!0;const s=l.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const c=i[f];if(c.href===l&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${a}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":Qa,s||(u.as="script",u.crossOrigin=""),u.href=l,document.head.appendChild(u),s)return new Promise((f,c)=>{u.addEventListener("load",f),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>e())};const $a=n=>({}),Li=n=>({}),xa=n=>({}),Ni=n=>({});function Pi(n){let e,t,r,i,l,s,a,o,u,f,c;const d=n[7]["header-left"],m=De(d,n,n[6],Ni),h=n[7]["header-right"],_=De(h,n,n[6],Li);return{c(){e=F("header"),t=F("div"),r=F("div"),m&&m.c(),i=Z(),l=F("div"),s=F("h2"),a=Re(n[0]),o=Z(),u=F("div"),f=F("div"),_&&_.c(),k(r,"class","slot slot--left svelte-d6vteg"),k(t,"class","header__col svelte-d6vteg"),k(s,"class","module__title svelte-d6vteg"),k(l,"class","header__col svelte-d6vteg"),k(f,"class","slot slot--right svelte-d6vteg"),k(u,"class","header__col svelte-d6vteg"),k(e,"class","module__header svelte-d6vteg")},m(g,p){L(g,e,p),O(e,t),O(t,r),m&&m.m(r,null),O(e,i),O(e,l),O(l,s),O(s,a),O(e,o),O(e,u),O(u,f),_&&_.m(f,null),c=!0},p(g,p){m&&m.p&&(!c||p&64)&&Fe(m,d,g,g[6],c?ze(d,g[6],p,xa):Oe(g[6]),Ni),(!c||p&1)&&Ge(a,g[0]),_&&_.p&&(!c||p&64)&&Fe(_,h,g,g[6],c?ze(h,g[6],p,$a):Oe(g[6]),Li)},i(g){c||(y(m,g),y(_,g),c=!0)},o(g){E(m,g),E(_,g),c=!1},d(g){g&&M(e),m&&m.d(g),_&&_.d(g)}}}function eu(n){let e,t,r,i,l,s=n[3]&&n[0]&&Pi(n);const a=n[7].default,o=De(a,n,n[6],null);return{c(){e=F("div"),s&&s.c(),t=Z(),r=F("div"),o&&o.c(),k(r,"class","module__container svelte-d6vteg"),k(e,"class",i="module module--"+n[1]+" svelte-d6vteg"),q(e,"scrollable",n[2]),q(e,"no-header",!n[3]),q(e,"editing",n[4].editing)},m(u,f){L(u,e,f),s&&s.m(e,null),O(e,t),O(e,r),o&&o.m(r,null),l=!0},p(u,[f]){u[3]&&u[0]?s?(s.p(u,f),f&9&&y(s,1)):(s=Pi(u),s.c(),y(s,1),s.m(e,t)):s&&(de(),E(s,1,1,()=>{s=null}),he()),o&&o.p&&(!l||f&64)&&Fe(o,a,u,u[6],l?ze(a,u[6],f,null):Oe(u[6]),null),(!l||f&2&&i!==(i="module module--"+u[1]+" svelte-d6vteg"))&&k(e,"class",i),(!l||f&6)&&q(e,"scrollable",u[2]),(!l||f&10)&&q(e,"no-header",!u[3]),(!l||f&18)&&q(e,"editing",u[4].editing)},i(u){l||(y(s),y(o,u),l=!0)},o(u){E(s),E(o,u),l=!1},d(u){u&&M(e),s&&s.d(),o&&o.d(u)}}}let Tn=0,tu=()=>Tn++;function nu(n,e,t){let r;ne(n,pt,h=>t(4,r=h));let{$$slots:i={},$$scope:l}=e,{mID:s=void 0}=e,{name:a}=e,{slug:o=a}=e,{scrollable:u=!0}=e,{hasHeader:f=!0}=e;const c=Nn("parent"),d={mID:isNaN(s)?Tn++:s,type:"module",name:o,hasHeader:f};return Tn=Math.max(Tn,isNaN(d.mID)?0:d.mID+1),c.registerChild(d),Nn("module").set(d),n.$$set=h=>{"mID"in h&&t(5,s=h.mID),"name"in h&&t(0,a=h.name),"slug"in h&&t(1,o=h.slug),"scrollable"in h&&t(2,u=h.scrollable),"hasHeader"in h&&t(3,f=h.hasHeader),"$$scope"in h&&t(6,l=h.$$scope)},[a,o,u,f,r,s,l,i]}class Vn extends fe{constructor(e){super(),ue(this,e,nu,eu,le,{mID:5,name:0,slug:1,scrollable:2,hasHeader:3})}}function ru(n){let e,t;return e=new Vn({props:{hasHeader:n[2],mID:n[0],name:n[1]}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&4&&(l.hasHeader=r[2]),i&1&&(l.mID=r[0]),i&2&&(l.name=r[1]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function iu(n){let e,t,r,i={ctx:n,current:null,token:null,hasCatch:!0,pending:ou,then:su,catch:lu,value:4,error:5,blocks:[,,,]};return Ti(t=n[3][n[1]](),i),{c(){e=Se(),i.block.c()},m(l,s){L(l,e,s),i.block.m(l,i.anchor=s),i.mount=()=>e.parentNode,i.anchor=e,r=!0},p(l,s){n=l,i.ctx=n,s&2&&t!==(t=n[3][n[1]]())&&Ti(t,i)||Sa(i,n,s)},i(l){r||(y(i.block),r=!0)},o(l){for(let s=0;s<3;s+=1){const a=i.blocks[s];E(a)}r=!1},d(l){l&&M(e),i.block.d(l),i.token=null,i=null}}}function lu(n){let e,t,r=n[5].message+"",i;return{c(){e=F("p"),t=Re("Something went wrong: "),i=Re(r)},m(l,s){L(l,e,s),O(e,t),O(e,i)},p(l,s){s&2&&r!==(r=l[5].message+"")&&Ge(i,r)},i:ae,o:ae,d(l){l&&M(e)}}}function su(n){let e,t,r;var i=n[4].default;function l(s){return{props:{mID:s[0],hasHeader:s[2]}}}return i&&(e=Ln(i,l(n))),{c(){e&&z(e.$$.fragment),t=Se()},m(s,a){e&&P(e,s,a),L(s,t,a),r=!0},p(s,a){const o={};if(a&1&&(o.mID=s[0]),a&4&&(o.hasHeader=s[2]),a&2&&i!==(i=s[4].default)){if(e){de();const u=e;E(u.$$.fragment,1,0,()=>{D(u,1)}),he()}i?(e=Ln(i,l(s)),z(e.$$.fragment),y(e.$$.fragment,1),P(e,t.parentNode,t)):e=null}else i&&e.$set(o)},i(s){r||(e&&y(e.$$.fragment,s),r=!0)},o(s){e&&E(e.$$.fragment,s),r=!1},d(s){s&&M(t),e&&D(e,s)}}}function ou(n){let e,t;return e=new Vn({props:{hasHeader:n[2],mID:n[0],name:n[1]}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&4&&(l.hasHeader=r[2]),i&1&&(l.mID=r[0]),i&2&&(l.name=r[1]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function au(n){let e,t,r,i;const l=[iu,ru],s=[];function a(o,u){return o[3][o[1]]?0:1}return e=a(n),t=s[e]=l[e](n),{c(){t.c(),r=Se()},m(o,u){s[e].m(o,u),L(o,r,u),i=!0},p(o,[u]){let f=e;e=a(o),e===f?s[e].p(o,u):(de(),E(s[f],1,1,()=>{s[f]=null}),he(),t=s[e],t?t.p(o,u):(t=s[e]=l[e](o),t.c()),y(t,1),t.m(r.parentNode,r))},i(o){i||(y(t),i=!0)},o(o){E(t),i=!1},d(o){s[e].d(o),o&&M(r)}}}let uu=["monitor","params","midi","console","exports"];function fu(n,e,t){let{mID:r=void 0}=e,{name:i}=e,{hasHeader:l=!0}=e;const s={monitor:()=>Bt(()=>Promise.resolve().then(()=>Wc),void 0),params:()=>Bt(()=>Promise.resolve().then(()=>Rh),void 0),midi:()=>Bt(()=>import("./MidiPanel.d46a024c.js"),[]),console:()=>Bt(()=>import("./Console.e94f9a86.js"),["assets/Console.e94f9a86.js","assets/Console.bb8de45e.css"]),exports:()=>Bt(()=>import("./Exports.e7f684d7.js"),[])};return n.$$set=a=>{"mID"in a&&t(0,r=a.mID),"name"in a&&t(1,i=a.name),"hasHeader"in a&&t(2,l=a.hasHeader)},[r,i,l,s]}class Wn extends fe{constructor(e){super(),ue(this,e,fu,au,le,{mID:0,name:1,hasHeader:2})}}function Di(n){let e,t,r,i,l;return t=new Gn({props:{value:n[0],options:n[8],title:"Switch module"}}),t.$on("change",n[9]),{c(){e=F("div"),z(t.$$.fragment),r=Z(),i=F("div"),k(e,"class","module svelte-13j84hl"),k(i,"class","separator svelte-13j84hl")},m(s,a){L(s,e,a),P(t,e,null),L(s,r,a),L(s,i,a),l=!0},p(s,a){const o={};a&1&&(o.value=s[0]),t.$set(o)},i(s){l||(y(t.$$.fragment,s),l=!0)},o(s){E(t.$$.fragment,s),l=!1},d(s){s&&M(e),D(t),s&&M(r),s&&M(i)}}}function cu(n){let e;return{c(){e=F("div"),e.innerHTML=`<div class="icon-box svelte-13j84hl"></div> 
					<div class="icon-box svelte-13j84hl"></div>`,k(e,"class","icon-layout svelte-13j84hl")},m(t,r){L(t,e,r)},p:ae,d(t){t&&M(e)}}}function du(n){let e;return{c(){e=F("div"),e.innerHTML=`<div class="icon-box svelte-13j84hl"></div> 
					<div class="icon-box svelte-13j84hl"></div>`,k(e,"class","icon-layout row svelte-13j84hl")},m(t,r){L(t,e,r)},p:ae,d(t){t&&M(e)}}}function zi(n){let e,t,r,i;return t=new Et({props:{label:"Delete",showLabel:!1,$$slots:{default:[hu]},$$scope:{ctx:n}}}),t.$on("click",n[7]),{c(){e=F("div"),r=F("div"),z(t.$$.fragment),be(r,"display","contents"),be(r,"--color-text","white"),be(r,"--background-color","var(--color-red)"),be(r,"--box-shadow-color-active","var(--color-lightred)"),k(e,"class","layout-delete")},m(l,s){L(l,e,s),O(e,r),P(t,r,null),i=!0},p(l,s){const a={};s&32768&&(a.$$scope={dirty:s,ctx:l}),t.$set(a)},i(l){i||(y(t.$$.fragment,l),i=!0)},o(l){E(t.$$.fragment,l),i=!1},d(l){l&&M(e),D(t)}}}function hu(n){let e,t;return e=new as({}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function mu(n){let e,t,r,i,l,s,a,o,u,f=!n[1]&&Di(n);l=new Et({props:{label:"Split in columns",showLabel:!1,title:"Split in columns",$$slots:{default:[cu]},$$scope:{ctx:n}}}),l.$on("mouseenter",n[10]),l.$on("mouseleave",n[11]),l.$on("click",n[6]),a=new Et({props:{label:"Split in rows",showLabel:!1,title:"Split in rows",$$slots:{default:[du]},$$scope:{ctx:n}}}),a.$on("mouseenter",n[12]),a.$on("mouseleave",n[13]),a.$on("click",n[5]);let c=!n[1]&&zi(n);return{c(){e=F("div"),t=F("div"),f&&f.c(),r=Z(),i=F("div"),z(l.$$.fragment),s=Z(),z(a.$$.fragment),o=Z(),c&&c.c(),k(i,"class","layout-actions svelte-13j84hl"),k(t,"class","content svelte-13j84hl"),q(t,"vertical",n[2]),k(e,"class","toolbar svelte-13j84hl"),q(e,"root",n[1]),q(e,"split-columns",n[3]),q(e,"split-rows",n[4])},m(d,m){L(d,e,m),O(e,t),f&&f.m(t,null),O(t,r),O(t,i),P(l,i,null),O(i,s),P(a,i,null),O(i,o),c&&c.m(i,null),u=!0},p(d,[m]){d[1]?f&&(de(),E(f,1,1,()=>{f=null}),he()):f?(f.p(d,m),m&2&&y(f,1)):(f=Di(d),f.c(),y(f,1),f.m(t,r));const h={};m&32768&&(h.$$scope={dirty:m,ctx:d}),l.$set(h);const _={};m&32768&&(_.$$scope={dirty:m,ctx:d}),a.$set(_),d[1]?c&&(de(),E(c,1,1,()=>{c=null}),he()):c?(c.p(d,m),m&2&&y(c,1)):(c=zi(d),c.c(),y(c,1),c.m(i,null)),(!u||m&4)&&q(t,"vertical",d[2]),(!u||m&2)&&q(e,"root",d[1]),(!u||m&8)&&q(e,"split-columns",d[3]),(!u||m&16)&&q(e,"split-rows",d[4])},i(d){u||(y(f),y(l.$$.fragment,d),y(a.$$.fragment,d),y(c),u=!0)},o(d){E(f),E(l.$$.fragment,d),E(a.$$.fragment,d),E(c),u=!1},d(d){d&&M(e),f&&f.d(),D(l),D(a),c&&c.d()}}}const gu="Select a module";function pu(n,e,t){let{moduleName:r=void 0}=e,{isRoot:i=!1}=e,{vertical:l=!1}=e;const s=tt();let a=!1,o=!1;function u(){s("add-row")}function f(){s("add-column")}function c(){s("delete")}const d=[{value:void 0,label:gu,disabled:!0},...uu.map(v=>({value:v,label:v}))];function m(v){Ye.call(this,n,v)}const h=()=>t(3,a=!0),_=()=>t(3,a=!1),g=()=>t(4,o=!0),p=()=>t(4,o=!1);return n.$$set=v=>{"moduleName"in v&&t(0,r=v.moduleName),"isRoot"in v&&t(1,i=v.isRoot),"vertical"in v&&t(2,l=v.vertical)},[r,i,l,a,o,u,f,c,d,m,h,_,g,p]}class _u extends fe{constructor(e){super(),ue(this,e,pu,mu,le,{moduleName:0,isRoot:1,vertical:2})}}function lt(n,e,t,r,i){return(n-e)/(t-e)*(i-r)+r}function hn(n,e,t){return Math.max(e,Math.min(n,t))}function bu(n){let e,t,r,i,l;return{c(){e=F("div"),t=F("div"),k(t,"class","resizer-hover svelte-1r3xnx4"),q(t,"visible",n[1]),k(e,"class",r="resizer resizer--"+n[0]+" svelte-1r3xnx4"),q(e,"dragging",n[2]),q(e,"editing",n[3].editing)},m(s,a){L(s,e,a),O(e,t),i||(l=[pe(window,"mouseup",n[6]),pe(window,"mousemove",n[7]),pe(t,"mousedown",n[5])],i=!0)},p(s,[a]){a&2&&q(t,"visible",s[1]),a&1&&r!==(r="resizer resizer--"+s[0]+" svelte-1r3xnx4")&&k(e,"class",r),a&5&&q(e,"dragging",s[2]),a&9&&q(e,"editing",s[3].editing)},i:ae,o:ae,d(s){s&&M(e),i=!1,Ve(l)}}}const Fi=25,sn={HORIZONTAL:"horizontal",VERTICAL:"vertical"};function wu(n,e,t){let r,i,l;ne(n,nt,H=>t(16,r=H)),ne(n,pt,H=>t(3,l=H));let{direction:s=sn.HORIZONTAL}=e,{current:a}=e,{parent:o={}}=e;const{children:u}=o;ne(n,u,H=>t(17,i=H));let f=!1,c=!1,d;function m(){if(u&&a.node&&a.node){const{parentNode:H}=a.node,C=[...H.children],N=C.findIndex(x=>x===a.node),K=C[N+2];d=i.find(x=>x.node===K),ct(x=>{x.id===d.id&&(p=x.size),x.id===a.id&&(g=x.size)},r)}}let h,_,g,p,v;function A(){m(),!c&&d&&(t(2,c=!0),document.body.style.userSelect="none",document.body.style.cursor=s===sn.HORIZONTAL?"ns-resize":"ew-resize",v=g+p,h=a.node.getBoundingClientRect(),_=d.node.getBoundingClientRect(),t(1,f=g===p))}function T(H){c&&(t(2,c=!1),t(1,f=!1),document.body.style.userSelect=null,document.body.style.cursor=null)}function I(H){if(!c)return;let C,N;if(s===sn.HORIZONTAL){const ee=h.top,j=_.bottom,$=hn(H.clientY,ee,j);C=Math.round(lt($,ee,j,0,v)*1e4)/1e4,N=Math.round(lt($,j,ee,0,v)*1e4)/1e4}else if(s===sn.VERTICAL){const ee=h.left,j=_.right,$=hn(H.clientX,ee+Fi,j-Fi);C=Math.round(lt($,ee,j,0,v)*1e4)/1e4,N=Math.round(lt($,j,ee,0,v)*1e4)/1e4}let K=h.width+_.width,x=h.height+_.height;Math.abs(N-C)<.05&&(C=v*.5,N=v*.5);let ie=K/v,B=x/v;t(1,f=C===N);function se(ee){return ee*(s===sn.HORIZONTAL?B:ie)<=25}se(C)?(N=v,C=0):se(N)&&(C=v,N=0),ja([{id:a.id,size:C},{id:d.id,size:N}])}return n.$$set=H=>{"direction"in H&&t(0,s=H.direction),"current"in H&&t(8,a=H.current),"parent"in H&&t(9,o=H.parent)},[s,f,c,l,u,A,T,I,a,o]}class vu extends fe{constructor(e){super(),ue(this,e,wu,bu,le,{direction:0,current:8,parent:9})}}let fn={};function yu(n,e){return fn[n]||(fn[n]=[]),fn[n].push(e),()=>{cs(n,e)}}function cs(n,e){const t=fn[n];if(t&&t.length){const r=t.filter(i=>i!==e);fn[n]=r}}function ku(n,e){}const qn={on:yu,off:cs,emit:ku},Eu="mm",Au=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]];let ds=Au.reduce((n,e)=>{const t={units:e[3]||Eu,dimensions:[e[1],e[2]]};return n[e[0]]=t,n[e[0].replace(/-/g," ")]=t,n},{});var zr={exports:{}},Su=function(){for(var e=0;e<arguments.length;e++)if(typeof arguments[e]<"u")return arguments[e]},Tu=Su,on=["mm","cm","m","pc","pt","in","ft","px"],Oi={m:{system:"metric",factor:1},cm:{system:"metric",factor:1/100},mm:{system:"metric",factor:1/1e3},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const Cu={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};function Ru(n,e){return Number(Math.round(n+"e"+e)+"e-"+e)}function Iu(n,e,t,r){if(typeof n!="number"||!isFinite(n))throw new Error("Value must be a finite number");if(!e||!t)throw new Error("Must specify from and to units");r=r||{};var i=Tu(r.pixelsPerInch,96),l=r.precision,s=r.roundPixel!==!1;if(e=e.toLowerCase(),t=t.toLowerCase(),on.indexOf(e)===-1)throw new Error('Invalid from unit "'+e+'", must be one of: '+on.join(", "));if(on.indexOf(t)===-1)throw new Error('Invalid from unit "'+t+'", must be one of: '+on.join(", "));if(e===t)return n;var a=1,o=1,u=!1;e==="px"&&(o=1/i,e="in"),t==="px"&&(u=!0,a=i,t="in");var f=Oi[e],c=Oi[t],d=n*f.factor*o;f.system!==c.system&&(d*=Cu[f.system].ratio);var m=d/c.factor*a;return u&&s?m=Math.round(m):typeof l=="number"&&isFinite(l)&&(m=Ru(m,l)),m}zr.exports=Iu;zr.exports.units=on;const Mu=Object.keys(ds);function hs(n,{pixelsPerInch:e}){const{dimensions:t,units:r}=ds[n];return t.map(i=>zr.exports(i,r,"px",{pixelsPerInch:e}))}const ve={FIXED:"fixed",PRESET:"preset",ASPECT_RATIO:"aspect-ratio",WINDOW:"window",SCALE:"scale"},Ne=$e("rendering",{width:1024,height:1024,pixelRatio:1,resizing:ve.FIXED,aspectRatio:1,scale:1,preset:"a4"},{persist:!1,reset:!1}),Ke=$e("monitors",[]),Dn=$e("preview",null),Bu=n=>{const{canvasSize:e=ve.WINDOW}=n,t=e,r={resizing:t};if(n.dimensions&&n.dimensions.length===2){const{dimensions:i}=n;r.width=i[0],r.height=i[1],n.canvasSize||(r.resizing=ve.FIXED)}if(t===ve.PRESET)if(n.preset){const[i,l]=hs(n.preset,{pixelsPerInch:300});r.width=i,r.height=l}else r.resizing=ve.WINDOW,console.warn("Cannot apply canvasSize preset if 'preset' is not specified in config.");if(t===ve.ASPECT_RATIO&&isNaN(n.aspectRatio)&&(r.resizing=ve.WINDOW,console.warn(`Cannot apply canvasSize:"aspectRatio" if 'aspectRatio' is not specified in config.`)),t===ve.SCALE&&(n.dimensions||(console.warn('Cannot apply canvasSize:"scale" if no dimensions are specified.'),r.resizing=ve.WINDOW),isNaN(n.scale)?(console.warn(`Cannot apply canvasSize:"scale" if 'scale' is not specified in config.`),r.resizing=ve.WINDOW):r.scale=n.scale),n.pixelRatio){const{pixelRatio:i}=n;r.pixelRatio=typeof i=="function"?i():i}Ne.update(i=>({...i,...r}))};let Mt=!1;const Tr=st(Mt);function Fr({clientCount:n}={}){let e=Mt;Mt=n>0,e&&!Mt?console.warn("[fragment] Sketch is running at specified framerate."):!e&&Mt&&console.warn("[fragment] Multiple instances of Fragment detected. Running sketch(s) at simulated framerate."),e!==Mt&&Tr.set(Mt)}qn.on("start",Fr);qn.on("client-connect",Fr);qn.on("client-disconnect",Fr);let Lu=0;class Or{constructor({inputType:e,eventName:t,fn:r,context:i,params:l={key:[]},destroy:s=()=>{},enabled:a=typeof e=="string"&&typeof t=="string",hot:o=!0}={}){this.id=Lu++,this.inputType=e,this.eventName=t,this.fn=r,this.context=i,this.params=l,this.enabled=a,this.hot=o,this._destroy=s}assign(e){this.fn=e}enable(){this.enabled=!0}disable(){this.enabled=!1}run(...e){this.enabled&&this.fn(...e)}destroy(){this._destroy(),this.inputType=null,this.eventName=null,this.fn=null,this.params=null,this.enabled=null,this._destroy=null}toJSON(){return{inputType:this.inputType,eventName:this.eventName,enabled:this.enabled,params:this.params}}}const Pt="*";let Cr=[];function Nu(n){Cr.push(...n)}function Ur(){let n;const{stack:e}=new Error,{url:t}=import.meta,r=e.split(`
`),i=r.findIndex(l=>l.includes(t));i>=0&&r.splice(0,i+1);for(let l=0;l<r.length;l++)for(let s=0;s<Cr.length;s++){const a=Cr[s];if(r[l].includes(a)){n=a;break}}return n||(n=Pt),n}const jr=(n,e,t)=>{n.has(e)?n.set(e,[...n.get(e),t]):n.set(e,[t])},Hr=(n,e,t)=>{if(n.has(e)){const r=n.get(e),i=r.findIndex(t);if(i>=0){const l=[...r];l.splice(i,1),l.length>0?n.set(e,l):n.delete(e)}}else console.error(`removeFromMapArray: key ${e} doesn't exist in Map.`,n)};window.mouseIsPressed=!1;window.mouseX=0;window.mouseY=0;const Kn=new Map,Yn=new Map,Xn=new Map,Jn=new Map,ms=n=>{Kn.delete(n),Yn.delete(n),Xn.delete(n),Jn.delete(n)},gs=n=>{function e(t){const r=t.get(n);if(r&&r.length>0){const i=r.filter(s=>s.hot),l=r.filter(s=>!s.hot);i.forEach(s=>s.destroy()),t.set(n,l)}}e(Kn),e(Yn),e(Xn),e(Jn)},Qn=(n,e,t)=>{[...n.has(t)?n.get(t):[],...n.has(Pt)?n.get(Pt):[]].forEach(i=>{i.run(e)})},Zn=(n,e)=>(t,{context:r,hot:i,enabled:l}={})=>{try{r||(r=Ur());const s=new Or({inputType:"Mouse",eventName:n,fn:t,params:{context:r},context:r,hot:i,enabled:l,destroy:()=>{Hr(e,r,a=>a.id===s.id)}});return jr(e,r,s),s}catch(s){return console.error(s),null}},Gr=(n,e)=>Qn(Kn,n,e),Vr=(n,e)=>Qn(Xn,n,e),Wr=(n,e)=>Qn(Yn,n,e),qr=(n,e)=>Qn(Jn,n,e),ps=Zn("onMouseDown",Kn),_s=Zn("onMouseUp",Yn),bs=Zn("onMouseMove",Xn),ws=Zn("onClick",Jn),Pu=Object.freeze(Object.defineProperty({__proto__:null,reset:ms,removeHotListeners:gs,checkForTriggersDown:Gr,checkForTriggersMove:Vr,checkForTriggersUp:Wr,checkForTriggersClick:qr,onMouseDown:ps,onMouseUp:_s,onMouseMove:bs,onClick:ws},Symbol.toStringTag,{value:"Module"}));class vs{constructor(){this.enabled=!0}enable(){this.enabled=!0}disable(){this.enabled=!1}}class Du extends vs{getStepFromEvent(e){return e.shiftKey?10:e.altKey?.1:1}}const ys=new Du,Kr=new Map,Yr=new Map,Xr=new Map,ks=n=>{function e(t){for(let r of t){const[i,l]=r;t.set(i,l.filter(s=>s.context!==n))}}e(Kr),e(Yr),e(Xr)};function Jr(n){return e=>{const{key:t,target:r}=e;r.classList.contains("input")||[...n.has(t)?n.get(t):[],...n.has(Pt)?n.get(Pt):[]].forEach(l=>{!ys.enabled||l.run(e)})}}function Qr(n,e){return(t,r,i={})=>{typeof t=="function"&&(typeof r=="object"&&(i={...i,...r}),r=t,t="*",i.key&&(t=i.key));const{hot:l,enabled:s,...a}=i,o=Ur(),u=Array.isArray(t)?t:[...t.split(",").map(c=>c!==" "?c.trim():c)],f=new Or({inputType:"Keyboard",eventName:n,fn:r,context:o,params:{...a,key:u},hot:l,enabled:s,destroy:()=>{u.forEach(c=>{Hr(e,c,d=>d.id===f.id)})}});return u.forEach(c=>{jr(e,c,f)}),f}}window.addEventListener("keypress",Jr(Kr));window.addEventListener("keyup",Jr(Yr));window.addEventListener("keydown",Jr(Xr));const Zr=Qr("onKeyPress",Kr),$r=Qr("onKeyDown",Xr),xr=Qr("onKeyUp",Yr),zu=Object.freeze(Object.defineProperty({__proto__:null,removeHotListeners:ks,onKeyPress:Zr,onKeyDown:$r,onKeyUp:xr},Symbol.toStringTag,{value:"Module"})),Fu={8:"noteoff",9:"noteon",11:"controlchange"},Ou=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Ui="midi.requested";class Uu extends vs{constructor(){super(),this.access=null,this.requesting=!1,this.enabled=!1,this.listeners=new Map,this.selectedInputID=null,this.selectedOutputID=null,localStorage.getItem(Ui)&&this.request()}get inputs(){return this.access?this.access.inputs:new Map}get outputs(){return this.access?this.access.outputs:new Map}start(){if(this.access.onstatechange=e=>this.onStateChange(e),this.attachListeners(),this.inputs.size===1){const[e]=this.inputs.values(),{id:t}=e;this.selectedInputID=t}if(this.outputs.size===1){const[e]=this.outputs.values(),{id:t}=e;this.selectedOutputID=t}}attachListeners(){this.inputs.forEach(e=>{e.onmidimessage=t=>{this.onMessage(t)}})}addEventListener(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.set(e,[...this.listeners.get(e),t])}onMessage(e){let t=e.data[0]>>4,r=Fu[t],i=(e.data[0]&15)+1,l=e.data[1],s=e.data[2],a={number:l,name:Ou[l%12]},o=s/127,u=s,f=e.target,c={type:r,note:a,channel:i,velocity:o,rawVelocity:u,value:o,rawValue:u,currentTarget:f,target:f,srcElement:f};this.emit("message",c),this.emit(r,c)}onStateChange(e){const t=e.port.state;this.emit(t,e),this.attachListeners()}emit(e,t){this.listeners.has(e)&&this.listeners.get(e).forEach(i=>i(t))}handleError(e){console.error(e)}async request(){try{!this.requesting&&!this.access&&(localStorage.setItem(Ui,!0),this.requesting=!0,this.access=await navigator.requestMIDIAccess(),this.enabled=!0,this.requesting=!1,this.start())}catch(e){this.handleError(e)}}}const _t=new Uu,ei=new Map,ti=new Map,ni=new Map,ri=new Map,ii=new Map,Es=n=>{function e(t){for(let r of t){const[i,l]=r;t.set(i,l.filter(s=>s.context!==n))}}e(ei),e(ti),e(ni),e(ri),e(ii)};function mn(n,e=t=>t.key){return t=>{const r=e(t),{id:i}=t.srcElement,l=[...n.has(r)?n.get(r):[],...n.has(Pt)?n.get(Pt):[]];_t.enabled&&i===_t.selectedInputID&&l.forEach(s=>{s.run(t)})}}function gn(n,e){return(t,r,i={})=>{typeof t=="function"&&(typeof r=="object"&&(i={...i,...r}),r=t,t="*",i.key&&(t=i.key));const{hot:l,enabled:s,...a}=i;let o=Array.isArray(t)?t:[...t.split(",").map(c=>c.trim())];["onControlChange","onNumberOn","onNumberOff"].includes(n)&&(o=o.map(c=>Number(c))),_t.enabled||_t.request();const u=Ur(),f=new Or({inputType:"MIDI",eventName:n,fn:r,params:{...a,key:o},hot:l,context:u,enabled:s,destroy:()=>{o.forEach(c=>{Hr(e,c,d=>d.id===f.id)})}});return o.forEach(c=>{jr(e,c,f)}),f}}_t.addEventListener("noteon",mn(ei,n=>n.note.name));_t.addEventListener("noteoff",mn(ti,n=>n.note.name));_t.addEventListener("noteon",mn(ni,n=>n.note.number));_t.addEventListener("noteoff",mn(ri,n=>n.note.number));_t.addEventListener("controlchange",mn(ii,n=>n.note.number));const As=gn("onNoteOn",ei),Ss=gn("onNoteOff",ti),Ts=gn("onNumberOn",ni),Cs=gn("onNumberOff",ri),Rs=gn("onControlChange",ii),ju=Object.freeze(Object.defineProperty({__proto__:null,removeHotListeners:Es,onNoteOn:As,onNoteOff:Ss,onNumberOn:Ts,onNumberOff:Cs,onControlChange:Rs},Symbol.toStringTag,{value:"Module"})),Is=n=>{gs(n),ks(n),Es(n)},Hu=Object.freeze(Object.defineProperty({__proto__:null,Mouse:Pu,Keyboard:zu,MIDI:ju,removeHotListeners:Is,reset:ms,checkForTriggersDown:Gr,checkForTriggersMove:Vr,checkForTriggersUp:Wr,checkForTriggersClick:qr,onMouseDown:ps,onMouseUp:_s,onMouseMove:bs,onClick:ws,onKeyPress:Zr,onKeyDown:$r,onKeyUp:xr,onNoteOn:As,onNoteOff:Ss,onNumberOn:Ts,onNumberOff:Cs,onControlChange:Rs},Symbol.toStringTag,{value:"Module"}));function Gu(n,e,t){let{key:r}=e,{type:i="press"}=e;const l=tt(),a={press:Zr,down:$r,up:xr}[i];let o;return Ft(()=>{o=a(r,u=>{l("trigger",u)})}),bt(()=>{o&&(o.destroy(),o=null)}),n.$$set=u=>{"key"in u&&t(0,r=u.key),"type"in u&&t(1,i=u.type)},[r,i]}class Zt extends fe{constructor(e){super(),ue(this,e,Gu,null,le,{key:0,type:1})}}const $n=$e("errors",new Map);function li(n,e){$n.update(t=>(t.set(e,n),t))}function ji(n){$n.update(e=>(e.has(n)&&e.delete(n),e))}function Vu(){$n.update(()=>new Map)}const Ms={"index.ts":()=>Bt(()=>import("./index.1867e8ab.js"),["assets/index.1867e8ab.js","assets/three.module.615c85f2.js"])},Dt=$e("sketches",{}),zt=$e("sketchesKeys",Object.keys(Ms)),si=$e("sketchesCount",0);async function Wu(n,e){try{return await n[e]()}catch(t){li(t,e)}}async function qu(n){const e=[...Object.keys(n)],t=await Promise.all(e.map(i=>Wu(n,i))),r=e.reduce((i,l,s)=>(t[s]&&(i[l]=t[s]),i),{});Dt.update(()=>r),zt.update(()=>e),si.update(()=>e.length)}qu(Ms);ns({time:0,deltaTime:0},n=>{let e,t=performance.now(),r=t-1698021646553,i=r;function l(s=0){t=i;let a=performance.now(),o=a-t;i=a,n({time:i,deltaTime:o,startTime:r}),e=requestAnimationFrame(l)}return l(),()=>{cancelAnimationFrame(e)}});const ft=st({});Dt.subscribe(n=>{ft.update(e=>(Object.keys(n).forEach(t=>{const r=n[t];r&&(e[t]=Ku(r.props,e[t]))}),e))});function Ku(n={},e={}){return Object.keys(n).forEach(t=>{let r=n[t];r.params||(r.params={})}),e&&Object.keys(e).forEach(t=>{let r=e[t],i=n[t];i&&r.params&&r.params.locked!==void 0&&(i.params.locked=r.params.locked)}),n}const Yu=["png","jpeg","webp"],Qt={FRAMES:"frames",MP4:"mp4",GIF:"gif",WEBM:"webm"},zn=$e("exports",{imageEncoding:Yu[0],videoFormat:Object.values(Qt)[0],pixelsPerInch:72,framerate:60,useDuration:!0,loopCount:1,imageQuality:100,videoQuality:100},{persist:!1,reset:!1}),pr=st(!1),Hi=st(!1);let En={};function Xu(n){if(n==="three")return Bt(()=>import("./THREERenderer.a881855f.js"),["assets/THREERenderer.a881855f.js","assets/three.module.615c85f2.js"])}async function Ju(n){if(En[n])return En[n];En[n]=await Xu(n);let e=En[n],t=!1;return e&&Ne.subscribe(r=>{let i;t||typeof e.init=="function"&&(i=e.init({canvas:document.createElement("canvas"),pixelRatio:r.pixelRatio,width:r.width,height:r.height})),t=!0,typeof e.resize=="function"&&e.resize({width:r.width,height:r.height,pixelRatio:r.pixelRatio,...i})}),e}var oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.changeDpiBlob=rf;var Qu=oi.changeDpiDataUrl=lf;function Zu(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}else return Array.from(n)}function $u(){for(var n=new Int32Array(256),e=0;e<256;e++){for(var t=e,r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;n[e]=t}return n}function xu(n){var e=-1;_r||(_r=$u());for(var t=0;t<n.length;t++)e=_r[(e^n[t])&255]^e>>>8;return e^-1}var _r=void 0,Rr="image/png",Ir="image/jpeg",ef="AAlwSFlz",tf="AAAJcEhZ",nf="AAAACXBI",Bs="p".charCodeAt(0),Ls="H".charCodeAt(0),Ns="Y".charCodeAt(0),Ps="s".charCodeAt(0);function rf(n,e){var t=n.slice(0,33);return new Promise(function(r,i){var l=new FileReader;l.onload=function(){var s=new Uint8Array(l.result),a=n.slice(33),o=Ds(s,e,n.type);r(new Blob([o,a],{type:n.type}))},l.readAsArrayBuffer(t)})}function lf(n,e){var t=n.split(","),r=t[0],i=t[1],l=void 0,s=void 0,a=!1;if(r.indexOf(Rr)!==-1){l=Rr;var o=sf(i);o>=0?(s=Math.ceil((o+28)/3)*4,a=!0):s=33/3*4}r.indexOf(Ir)!==-1&&(l=Ir,s=18/3*4);for(var u=i.substring(0,s),f=i.substring(s),c=atob(u),d=new Uint8Array(c.length),m=0;m<d.length;m++)d[m]=c.charCodeAt(m);var h=Ds(d,e,l,a),_=btoa(String.fromCharCode.apply(String,Zu(h)));return[r,",",_,f].join("")}function sf(n){var e=n.indexOf(ef);return e===-1&&(e=n.indexOf(tf)),e===-1&&(e=n.indexOf(nf)),e}function of(n){for(var e=n.length-1,t=e;t>=4;t--)if(n[t-4]===9&&n[t-3]===Bs&&n[t-2]===Ls&&n[t-1]===Ns&&n[t]===Ps)return t-3}function Ds(n,e,t,r){if(t===Ir)return n[13]=1,n[14]=e>>8,n[15]=e&255,n[16]=e>>8,n[17]=e&255,n;if(t===Rr){var i=new Uint8Array(13);e*=39.3701,i[0]=Bs,i[1]=Ls,i[2]=Ns,i[3]=Ps,i[4]=e>>>24,i[5]=e>>>16,i[6]=e>>>8,i[7]=e&255,i[8]=i[4],i[9]=i[5],i[10]=i[6],i[11]=i[7],i[12]=1;var l=xu(i),s=new Uint8Array(4);if(s[0]=l>>>24,s[1]=l>>>16,s[2]=l>>>8,s[3]=l&255,r){var a=of(n);return n.set(i,a),n.set(s,a+13),n}else{var o=new Uint8Array(4);o[0]=0,o[1]=0,o[2]=0,o[3]=9;var u=new Uint8Array(54);return u.set(n,0),u.set(o,33),u.set(i,37),u.set(s,50),u}}}function zs(n){return new Promise((e,t)=>{const r=n.indexOf(",");if(r===-1){t(new Error("createBlobFromDataURL: dataURL doesn't contain extension data."));return}const i=n.slice(r+1),l=window.atob(i),s=n.slice(0,r),a=/data:([^;]+)/.exec(s),o=(a?a[1]:"")||void 0,u=new ArrayBuffer(l.length),f=new Uint8Array(u);for(var c=0;c<l.length;c++)f[c]=l.charCodeAt(c);e(new window.Blob([u],{type:o}))})}function af(n,e){let t=uf(e);typeof n=="object"&&["json","txt"].includes(t)&&(n=JSON.stringify(n,void 0,4));let r=ff(t),i=new Blob([n],{type:r});Fs(i,{filename:e})}function Fs(n,{filename:e="untitled"}={}){let t=document.createElement("a");t.style.visibility="hidden",t.target="_blank",t.download=e,t.href=window.URL.createObjectURL(n),t.onclick=()=>{t.onclick=()=>{},setTimeout(()=>{window.URL.revokeObjectURL(n),t.parentElement&&t.parentElement.removeChild(t),t.removeAttribute("href")})},t.click()}function uf(n){const e=n.match(/[^\\/]\.([^.\\/]+)$/);if(e&&e.length>1)return e[1]}function ff(n){if(n==="json")return"application/json";if(n==="txt")return"text";if(n==="png")return"image/png";if(n==="jpeg"||n==="jpg")return"image/jpeg"}var Os={exports:{}};(function(n){(function(){function e(d,m){let h={};return[d,m].forEach(function(_){for(let g in _)Object.prototype.hasOwnProperty.call(_,g)&&(h[g]=_[g])}),h}function t(d){if(typeof d!="string"||!d.match(/^data:image\/webp;base64,/i))throw new Error("Failed to decode WebP Base64 URL");return window.atob(d.substring(23))}function r(d,m){let h=typeof d=="string"&&/^data:image\/webp/.test(d)?d:d.toDataURL("image/webp",m);return t(h)}function i(d){let m=d.charCodeAt(0),h=d.charCodeAt(1),_=d.charCodeAt(2),g=d.charCodeAt(3);return(m|h<<8|_<<16|g<<24)>>>0}function l(d){let m=d.indexOf("VP8",12);if(m===-1)throw new Error("Bad image format, does this browser support WebP?");let h=!1;for(;m<d.length-8;){let _,g;switch(g=d.substring(m,m+4),m+=4,_=i(d.substring(m,m+4)),m+=4,g){case"VP8 ":return{frame:d.substring(m,m+_),hasAlpha:h};case"ALPH":h=!0;break}m+=_,(_&1)!==0&&m++}throw new Error("Failed to find VP8 keyframe in WebP image, is this image mistakenly encoded in the Lossless WebP format?")}const s=-1,a=-2;function o(d){this.value=d}function u(d){this.value=d}function f(d,m,h){if(Array.isArray(h))for(let _=0;_<h.length;_++)f(d,m,h[_]);else if(typeof h=="string")d.writeString(h);else if(h instanceof Uint8Array)d.writeBytes(h);else if(h.id)if(h.offset=d.pos+m,d.writeUnsignedIntBE(h.id),Array.isArray(h.data)){let _,g,p;h.size===s?d.writeByte(255):h.size===a?(_=d.pos,d.writeBytes([15,255,255,255,255])):(_=d.pos,d.writeBytes([0,0,0,0])),g=d.pos,h.dataOffset=g+m,f(d,m,h.data),h.size!==s&&h.size!==a&&(p=d.pos,h.size=p-g,d.seek(_),d.writeEBMLVarIntWidth(h.size,4),d.seek(p))}else if(typeof h.data=="string")d.writeEBMLVarInt(h.data.length),h.dataOffset=d.pos+m,d.writeString(h.data);else if(typeof h.data=="number")h.size||(h.size=d.measureUnsignedInt(h.data)),d.writeEBMLVarInt(h.size),h.dataOffset=d.pos+m,d.writeUnsignedIntBE(h.data,h.size);else if(h.data instanceof u)d.writeEBMLVarInt(8),h.dataOffset=d.pos+m,d.writeDoubleBE(h.data.value);else if(h.data instanceof o)d.writeEBMLVarInt(4),h.dataOffset=d.pos+m,d.writeFloatBE(h.data.value);else if(h.data instanceof Uint8Array)d.writeEBMLVarInt(h.data.byteLength),h.dataOffset=d.pos+m,d.writeBytes(h.data);else throw new Error("Bad EBML datatype "+typeof h.data);else throw new Error("Bad EBML datatype "+typeof h.data)}let c=function(d,m){return function(h){let _=5e3,g=1,p=!1,v=0,A=0,T=null,I=null,H=null,C=[],N=0,K=0,x={quality:.95,transparent:!1,alphaQuality:void 0,fileWriter:null,fd:null,frameDuration:null,frameRate:null},ie={Cues:{id:new Uint8Array([28,83,187,107]),positionEBML:null},SegmentInfo:{id:new Uint8Array([21,73,169,102]),positionEBML:null},Tracks:{id:new Uint8Array([22,84,174,107]),positionEBML:null}},B,se={id:17545,data:new u(0)},ee,j=[],$=new m(h.fileWriter||h.fd);function oe(J){return J-B.dataOffset}function re(J){(T===null||T.width!==J.width||T.height!==J.height)&&(T=document.createElement("canvas"),T.width=J.width,T.height=J.height,I=T.getContext("2d"),H=I.createImageData(T.width,T.height));let me=J.getContext("2d"),Ee=me.getImageData(0,0,J.width,J.height).data,ge=H.data,Ue=0,it=J.width*J.height*4;for(let Ie=3;Ie<it;Ie+=4){let vt=Ee[Ie];ge[Ue++]=vt,ge[Ue++]=vt,ge[Ue++]=vt,ge[Ue++]=255}return I.putImageData(H,0,0),T}function te(){let J={id:21420,size:5,data:0},me={id:290298740,data:[]};for(let Ee in ie){let ge=ie[Ee];ge.positionEBML=Object.create(J),me.data.push({id:19899,data:[{id:21419,data:ge.id},ge.positionEBML]})}return me}function ye(){ee=te();let J={id:440786851,data:[{id:17030,data:1},{id:17143,data:1},{id:17138,data:4},{id:17139,data:8},{id:17026,data:"webm"},{id:17031,data:2},{id:17029,data:2}]},me={id:357149030,data:[{id:2807729,data:1e6},{id:19840,data:"webm-writer-js"},{id:22337,data:"webm-writer-js"},se]},Ee=[{id:176,data:v},{id:186,data:A}];h.transparent&&Ee.push({id:21440,data:1});let ge={id:374648427,data:[{id:174,data:[{id:215,data:g},{id:29637,data:g},{id:156,data:0},{id:2274716,data:"und"},{id:134,data:"V_VP8"},{id:2459272,data:"VP8"},{id:131,data:1},{id:224,data:Ee}]}]};B={id:408125543,size:a,data:[ee,me,ge]};let Ue=new d(256);f(Ue,$.pos,[J,B]),$.write(Ue.getAsDataArray()),ie.SegmentInfo.positionEBML.data=oe(me.offset),ie.Tracks.positionEBML.data=oe(ge.offset),p=!0}function Me(J){let me,Ee,ge=new d(4);if(!(J.trackNumber>0&&J.trackNumber<127))throw new Error("TrackNumber must be > 0 and < 127");return ge.writeEBMLVarInt(J.trackNumber),ge.writeU16BE(J.timecode),ge.writeByte(0),me={id:161,data:[ge.getAsDataArray(),J.frame]},Ee={id:30113,data:[{id:166,data:[{id:238,data:1},{id:165,data:J.alpha}]}]},{id:160,data:[me,Ee]}}function Be(J){let me=new d(4);if(!(J.trackNumber>0&&J.trackNumber<127))throw new Error("TrackNumber must be > 0 and < 127");return me.writeEBMLVarInt(J.trackNumber),me.writeU16BE(J.timecode),me.writeByte(1<<7),{id:163,data:[me.getAsDataArray(),J.frame]}}function rt(J){return J.alpha?Me(J):Be(J)}function ot(J){return{id:524531317,data:[{id:231,data:Math.round(J.timecode)}]}}function Ot(J,me,Ee){j.push({id:187,data:[{id:179,data:me},{id:183,data:[{id:247,data:J},{id:241,data:oe(Ee)}]}]})}function at(){let J={id:475249515,data:j},me=new d(16+j.length*32);f(me,$.pos,J),$.write(me.getAsDataArray()),ie.Cues.positionEBML.data=oe(J.offset)}function Tt(){if(C.length===0)return;let J=0;for(let ge=0;ge<C.length;ge++)J+=C[ge].frame.length+(C[ge].alpha?C[ge].alpha.length:0);let me=new d(J+C.length*64),Ee=ot({timecode:Math.round(N)});for(let ge=0;ge<C.length;ge++)Ee.data.push(rt(C[ge]));f(me,$.pos,Ee),$.write(me.getAsDataArray()),Ot(g,Math.round(N),Ee.offset),C=[],N+=K,K=0}function Ct(){if(!h.frameDuration)if(h.frameRate)h.frameDuration=1e3/h.frameRate;else throw new Error("Missing required frameDuration or frameRate setting");h.quality=Math.max(Math.min(h.quality,.99999),0),h.alphaQuality===void 0?h.alphaQuality=h.quality:h.alphaQuality=Math.max(Math.min(h.alphaQuality,.99999),0)}function Ut(J){J.trackNumber=g,J.timecode=Math.round(K),C.push(J),K+=J.duration,K>=_&&Tt()}function wt(){let J=new d(ee.size),me=$.pos;f(J,ee.dataOffset,ee.data),$.seek(ee.dataOffset),$.write(J.getAsDataArray()),$.seek(me)}function jt(){let J=new d(8),me=$.pos;J.writeDoubleBE(N),$.seek(se.dataOffset),$.write(J.getAsDataArray()),$.seek(me)}function Le(){let J=new d(10),me=$.pos;J.writeUnsignedIntBE(B.id),J.writeEBMLVarIntWidth($.pos-B.dataOffset,5),$.seek(B.offset),$.write(J.getAsDataArray()),$.seek(me)}this.addFrame=function(J,me,Ee){p||(v=J.width||0,A=J.height||0,ye());let ge=l(r(J,h.quality)),Ue,it=null;Ee?Ue=Ee:typeof me=="number"?Ue=me:Ue=h.frameDuration,h.transparent&&(me instanceof HTMLCanvasElement||typeof me=="string"?it=me:ge.hasAlpha&&(it=re(J))),Ut({frame:ge.frame,duration:Ue,alpha:it?l(r(it,h.alphaQuality)).frame:null})},this.complete=function(){return p||ye(),Tt(),at(),wt(),jt(),Le(),$.complete("video/webm")},this.getWrittenSize=function(){return $.length},h=e(x,h||{}),Ct()}};n.exports=c})()})(Os);var Us={exports:{}};(function(n){(function(){let e=function(t){this.data=new Uint8Array(t),this.pos=0};e.prototype.seek=function(t){this.pos=t},e.prototype.writeBytes=function(t){for(let r=0;r<t.length;r++)this.data[this.pos++]=t[r]},e.prototype.writeByte=function(t){this.data[this.pos++]=t},e.prototype.writeU8=e.prototype.writeByte,e.prototype.writeU16BE=function(t){this.data[this.pos++]=t>>8,this.data[this.pos++]=t},e.prototype.writeDoubleBE=function(t){let r=new Uint8Array(new Float64Array([t]).buffer);for(let i=r.length-1;i>=0;i--)this.writeByte(r[i])},e.prototype.writeFloatBE=function(t){let r=new Uint8Array(new Float32Array([t]).buffer);for(let i=r.length-1;i>=0;i--)this.writeByte(r[i])},e.prototype.writeString=function(t){for(let r=0;r<t.length;r++)this.data[this.pos++]=t.charCodeAt(r)},e.prototype.writeEBMLVarIntWidth=function(t,r){switch(r){case 1:this.writeU8(1<<7|t);break;case 2:this.writeU8(1<<6|t>>8),this.writeU8(t);break;case 3:this.writeU8(1<<5|t>>16),this.writeU8(t>>8),this.writeU8(t);break;case 4:this.writeU8(1<<4|t>>24),this.writeU8(t>>16),this.writeU8(t>>8),this.writeU8(t);break;case 5:this.writeU8(1<<3|t/4294967296&7),this.writeU8(t>>24),this.writeU8(t>>16),this.writeU8(t>>8),this.writeU8(t);break;default:throw new Error("Bad EBML VINT size "+r)}},e.prototype.measureEBMLVarInt=function(t){if(t<(1<<7)-1)return 1;if(t<(1<<14)-1)return 2;if(t<(1<<21)-1)return 3;if(t<(1<<28)-1)return 4;if(t<34359738367)return 5;throw new Error("EBML VINT size not supported "+t)},e.prototype.writeEBMLVarInt=function(t){this.writeEBMLVarIntWidth(t,this.measureEBMLVarInt(t))},e.prototype.writeUnsignedIntBE=function(t,r){switch(r===void 0&&(r=this.measureUnsignedInt(t)),r){case 5:this.writeU8(Math.floor(t/4294967296));case 4:this.writeU8(t>>24);case 3:this.writeU8(t>>16);case 2:this.writeU8(t>>8);case 1:this.writeU8(t);break;default:throw new Error("Bad UINT size "+r)}},e.prototype.measureUnsignedInt=function(t){return t<1<<8?1:t<1<<16?2:t<1<<24?3:t<4294967296?4:5},e.prototype.getAsDataArray=function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw new Error("ArrayBufferDataStream's pos lies beyond end of buffer")},n.exports=e})()})(Us);var js={exports:{}};(function(n){(function(){let e=function(t){return function(r){let i=[],l=Promise.resolve(),s=null,a=null;r&&r.constructor.name==="FileWriter"?s=r:t&&r&&(a=r),this.pos=0,this.length=0;function o(c){return new Promise(function(d,m){let h=new FileReader;h.addEventListener("loadend",function(){d(h.result)}),h.readAsArrayBuffer(c)})}function u(c){return new Promise(function(d,m){c instanceof Uint8Array?d(c):c instanceof ArrayBuffer||ArrayBuffer.isView(c)?d(new Uint8Array(c)):c instanceof Blob?d(o(c).then(function(h){return new Uint8Array(h)})):d(o(new Blob([c])).then(function(h){return new Uint8Array(h)}))})}function f(c){let d=c.byteLength||c.length||c.size;if(!Number.isInteger(d))throw new Error("Failed to determine size of element");return d}this.seek=function(c){if(c<0)throw new Error("Offset may not be negative");if(isNaN(c))throw new Error("Offset may not be NaN");if(c>this.length)throw new Error("Seeking beyond the end of file is not allowed");this.pos=c},this.write=function(c){let d={offset:this.pos,data:c,length:f(c)},m=d.offset>=this.length;this.pos+=d.length,this.length=Math.max(this.length,this.pos),l=l.then(function(){if(a)return new Promise(function(h,_){u(d.data).then(function(g){let p=0,v=Buffer.from(g.buffer),A=function(T,I,H){p+=I,p>=H.length?h():t.write(a,H,p,H.length-p,d.offset+p,A)};t.write(a,v,0,v.length,d.offset,A)})});if(s)return new Promise(function(h,_){s.onwriteend=h,s.seek(d.offset),s.write(new Blob([d.data]))});if(!m)for(let h=0;h<i.length;h++){let _=i[h];if(!(d.offset+d.length<=_.offset||d.offset>=_.offset+_.length)){if(d.offset<_.offset||d.offset+d.length>_.offset+_.length)throw new Error("Overwrite crosses blob boundaries");if(d.offset==_.offset&&d.length==_.length){_.data=d.data;return}else return u(_.data).then(function(g){return _.data=g,u(d.data)}).then(function(g){d.data=g,_.data.set(d.data,d.offset-_.offset)})}}i.push(d)})},this.complete=function(c){return a||s?l=l.then(function(){return null}):l=l.then(function(){let d=[];for(let m=0;m<i.length;m++)d.push(i[m].data);return new Blob(d,{type:c})}),l}}};n.exports=e})()})(js);var cf=Os.exports(Us.exports,js.exports(null));let br=()=>{};class xn{constructor(e,{duration:t=1/0,framerate:r=25,quality:i=100,onStart:l=br,onTick:s=br,onComplete:a=br}){this.canvas=e,this.framerate=r,this.duration=t,this.quality=i,this.onStart=l,this.onTick=s,this.onComplete=a,this.time=0,this.deltaTime=1e3/this.framerate,this.frameDuration=1e3/this.framerate,this.frameTotal=isFinite(t)?this.duration*this.framerate:1/0,this.started=!1,this.stopped=!1}async load(){}async start(){if(this.onStart(),await this.load(),this.stopped){console.log("CanvasRecorder : stopped while loading");return}console.log(`CanvasRecorder - start rendering ${this.frameTotal} frames at ${this.framerate}fps for ${this.duration}s.`),this.frameCount=0,this.started=!0,this.stopped=!1,this._tick()}async _tick(){console.log(`CanvasRecorder - render frame ${this.frameCount+1}`),this.onTick({time:this.time,deltaTime:this.deltaTime}),await this.tick({time:this.time,deltaTime:this.deltaTime,frameCount:this.frameCount}),this.started&&!this.stopped&&(!isFinite(this.frameTotal)||isFinite(this.frameTotal)&&this.frameCount<this.frameTotal-1)?(this.time+=this.deltaTime,this.frameCount++,requestAnimationFrame(()=>{this._tick()})):(console.log(`CanvasRecorder - compiling ${this.frameCount+1} frames...`),this.end())}tick(){}end(){console.log(`CanvasRecorder - compiled ${this.frameCount+1} frames`),this.onComplete(this.result)}stop(){this.stopped=!0}}class df extends xn{start(){const e=lt(this.quality,1,100,0,.99999);this.writer=new cf({quality:e,frameRate:this.framerate}),super.start()}tick(){this.writer.addFrame(this.canvas)}async end(){this.result=await this.writer.complete(),this.writer=null,super.end()}}var ai=function(){var n=import.meta.url;return function(t){t=t||{};var t=typeof t<"u"?t:{},r,i;t.ready=new Promise(function(b,w){r=b,i=w}),t.create_buffer=function(b){return t._malloc(b)},t.free_buffer=function(b){return t._free(b)},t.locateFile=function(b,w){return t.simd&&(b=b.replace(/\.wasm$/i,".simd.wasm")),t.getWasmPath?t.getWasmPath(b,w,t.simd):w+b},t.createWebCodecsEncoder=function(b){return gf(t,b)};var l={},s;for(s in t)t.hasOwnProperty(s)&&(l[s]=t[s]);var a=!1,o=!1;a=typeof window=="object",o=typeof importScripts=="function",typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var u="";function f(b){return t.locateFile?t.locateFile(b,u):u+b}var c;(a||o)&&(o?u=self.location.href:typeof document<"u"&&document.currentScript&&(u=document.currentScript.src),n&&(u=n),u.indexOf("blob:")!==0?u=u.substr(0,u.lastIndexOf("/")+1):u="",o&&(c=function(b){var w=new XMLHttpRequest;return w.open("GET",b,!1),w.responseType="arraybuffer",w.send(null),new Uint8Array(w.response)})),t.print||console.log.bind(console);var d=t.printErr||console.warn.bind(console);for(s in l)l.hasOwnProperty(s)&&(t[s]=l[s]);l=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit;var m;t.wasmBinary&&(m=t.wasmBinary),t.noExitRuntime,typeof WebAssembly!="object"&&ge("no native wasm support detected");var h,_=!1;function g(b,w,S){for(var R=w+S,G="";!(w>=R);){var W=b[w++];if(!W)return G;if(!(W&128)){G+=String.fromCharCode(W);continue}var Q=b[w++]&63;if((W&224)==192){G+=String.fromCharCode((W&31)<<6|Q);continue}var V=b[w++]&63;if((W&240)==224?W=(W&15)<<12|Q<<6|V:W=(W&7)<<18|Q<<12|V<<6|b[w++]&63,W<65536)G+=String.fromCharCode(W);else{var Y=W-65536;G+=String.fromCharCode(55296|Y>>10,56320|Y&1023)}}return G}function p(b,w){return b?g(ee,b,w):""}function v(b,w,S,R){if(!(R>0))return 0;for(var G=S,W=S+R-1,Q=0;Q<b.length;++Q){var V=b.charCodeAt(Q);if(V>=55296&&V<=57343){var Y=b.charCodeAt(++Q);V=65536+((V&1023)<<10)|Y&1023}if(V<=127){if(S>=W)break;w[S++]=V}else if(V<=2047){if(S+1>=W)break;w[S++]=192|V>>6,w[S++]=128|V&63}else if(V<=65535){if(S+2>=W)break;w[S++]=224|V>>12,w[S++]=128|V>>6&63,w[S++]=128|V&63}else{if(S+3>=W)break;w[S++]=240|V>>18,w[S++]=128|V>>12&63,w[S++]=128|V>>6&63,w[S++]=128|V&63}}return w[S]=0,S-G}function A(b,w,S){return v(b,ee,w,S)}function T(b){for(var w=0,S=0;S<b.length;++S){var R=b.charCodeAt(S);R>=55296&&R<=57343&&(R=65536+((R&1023)<<10)|b.charCodeAt(++S)&1023),R<=127?++w:R<=2047?w+=2:R<=65535?w+=3:w+=4}return w}function I(b,w){for(var S="",R=0;!(R>=w/2);++R){var G=j[b+R*2>>1];if(G==0)break;S+=String.fromCharCode(G)}return S}function H(b,w,S){if(S===void 0&&(S=2147483647),S<2)return 0;S-=2;for(var R=w,G=S<b.length*2?S/2:b.length,W=0;W<G;++W){var Q=b.charCodeAt(W);j[w>>1]=Q,w+=2}return j[w>>1]=0,w-R}function C(b){return b.length*2}function N(b,w){for(var S=0,R="";!(S>=w/4);){var G=oe[b+S*4>>2];if(G==0)break;if(++S,G>=65536){var W=G-65536;R+=String.fromCharCode(55296|W>>10,56320|W&1023)}else R+=String.fromCharCode(G)}return R}function K(b,w,S){if(S===void 0&&(S=2147483647),S<4)return 0;for(var R=w,G=R+S-4,W=0;W<b.length;++W){var Q=b.charCodeAt(W);if(Q>=55296&&Q<=57343){var V=b.charCodeAt(++W);Q=65536+((Q&1023)<<10)|V&1023}if(oe[w>>2]=Q,w+=4,w+4>G)break}return oe[w>>2]=0,w-R}function x(b){for(var w=0,S=0;S<b.length;++S){var R=b.charCodeAt(S);R>=55296&&R<=57343&&++S,w+=4}return w}function ie(b,w){return b%w>0&&(b+=w-b%w),b}var B,se,ee,j,$,oe,re,te,ye;function Me(b){B=b,t.HEAP8=se=new Int8Array(b),t.HEAP16=j=new Int16Array(b),t.HEAP32=oe=new Int32Array(b),t.HEAPU8=ee=new Uint8Array(b),t.HEAPU16=$=new Uint16Array(b),t.HEAPU32=re=new Uint32Array(b),t.HEAPF32=te=new Float32Array(b),t.HEAPF64=ye=new Float64Array(b)}t.INITIAL_MEMORY;var Be,rt=[],ot=[],Ot=[];function at(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Ut(t.preRun.shift());U(rt)}function Tt(){U(ot)}function Ct(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)jt(t.postRun.shift());U(Ot)}function Ut(b){rt.unshift(b)}function wt(b){ot.unshift(b)}function jt(b){Ot.unshift(b)}var Le=0,J=null;function me(b){Le++,t.monitorRunDependencies&&t.monitorRunDependencies(Le)}function Ee(b){if(Le--,t.monitorRunDependencies&&t.monitorRunDependencies(Le),Le==0&&J){var w=J;J=null,w()}}t.preloadedImages={},t.preloadedAudios={};function ge(b){t.onAbort&&t.onAbort(b),b+="",d(b),_=!0,b="abort("+b+"). Build with -s ASSERTIONS=1 for more info.";var w=new WebAssembly.RuntimeError(b);throw i(w),w}var Ue="data:application/octet-stream;base64,";function it(b){return b.startsWith(Ue)}var Ie;t.locateFile?(Ie="mp4.wasm",it(Ie)||(Ie=f(Ie))):Ie=new URL("/assets/mp4.2ae3801e.wasm",self.location).toString();function vt(b){try{if(b==Ie&&m)return new Uint8Array(m);if(c)return c(b);throw"both async and sync fetching of the wasm failed"}catch(w){ge(w)}}function ir(){return!m&&(a||o)&&typeof fetch=="function"?fetch(Ie,{credentials:"same-origin"}).then(function(b){if(!b.ok)throw"failed to load wasm binary file at '"+Ie+"'";return b.arrayBuffer()}).catch(function(){return vt(Ie)}):Promise.resolve().then(function(){return vt(Ie)})}function lr(){var b={a:ua};function w(Q,V){var Y=Q.exports;t.asm=Y,h=t.asm.x,Me(h.buffer),Be=t.asm.B,wt(t.asm.y),Ee()}me();function S(Q){w(Q.instance)}function R(Q){return ir().then(function(V){var Y=WebAssembly.instantiate(V,b);return Y}).then(Q,function(V){d("failed to asynchronously prepare wasm: "+V),ge(V)})}function G(){return!m&&typeof WebAssembly.instantiateStreaming=="function"&&!it(Ie)&&typeof fetch=="function"?fetch(Ie,{credentials:"same-origin"}).then(function(Q){var V=WebAssembly.instantiateStreaming(Q,b);return V.then(S,function(Y){return d("wasm streaming compile failed: "+Y),d("falling back to ArrayBuffer instantiation"),R(S)})}):R(S)}if(t.instantiateWasm)try{var W=t.instantiateWasm(b,w);return W}catch(Q){return d("Module.instantiateWasm callback failed with error: "+Q),!1}return G().catch(i),{}}function U(b){for(;b.length>0;){var w=b.shift();if(typeof w=="function"){w(t);continue}var S=w.func;typeof S=="number"?w.arg===void 0?Be.get(S)():Be.get(S)(w.arg):S(w.arg===void 0?null:w.arg)}}function ce(b,w,S,R){ge("Assertion failed: "+p(b)+", at: "+[w?p(w):"unknown filename",S,R?p(R):"unknown function"])}function We(b,w,S,R,G){}function qe(b){switch(b){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+b)}}function Xe(){for(var b=new Array(256),w=0;w<256;++w)b[w]=String.fromCharCode(w);je=b}var je=void 0;function Te(b){for(var w="",S=b;ee[S];)w+=je[ee[S++]];return w}var ut={},dt={},Ht={},wn=48,pi=57;function nn(b){if(b===void 0)return"_unknown";b=b.replace(/[^a-zA-Z0-9_]/g,"$");var w=b.charCodeAt(0);return w>=wn&&w<=pi?"_"+b:b}function Gt(b,w){return b=nn(b),new Function("body","return function "+b+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(w)}function Vt(b,w){var S=Gt(w,function(R){this.name=w,this.message=R;var G=new Error(R).stack;G!==void 0&&(this.stack=this.toString()+`
`+G.replace(/^Error(:[^\n]*)?\n/,""))});return S.prototype=Object.create(b.prototype),S.prototype.constructor=S,S.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},S}var Rt=void 0;function Je(b){throw new Rt(b)}var _i=void 0;function bi(b){throw new _i(b)}function ko(b,w,S){b.forEach(function(V){Ht[V]=w});function R(V){var Y=S(V);Y.length!==b.length&&bi("Mismatched type converter count");for(var _e=0;_e<b.length;++_e)ht(b[_e],Y[_e])}var G=new Array(w.length),W=[],Q=0;w.forEach(function(V,Y){dt.hasOwnProperty(V)?G[Y]=dt[V]:(W.push(V),ut.hasOwnProperty(V)||(ut[V]=[]),ut[V].push(function(){G[Y]=dt[V],++Q,Q===W.length&&R(G)}))}),W.length===0&&R(G)}function ht(b,w,S){if(S=S||{},!("argPackAdvance"in w))throw new TypeError("registerType registeredInstance requires argPackAdvance");var R=w.name;if(b||Je('type "'+R+'" must have a positive integer typeid pointer'),dt.hasOwnProperty(b)){if(S.ignoreDuplicateRegistrations)return;Je("Cannot register type '"+R+"' twice")}if(dt[b]=w,delete Ht[b],ut.hasOwnProperty(b)){var G=ut[b];delete ut[b],G.forEach(function(W){W()})}}function Eo(b,w,S,R,G){var W=qe(S);w=Te(w),ht(b,{name:w,fromWireType:function(Q){return!!Q},toWireType:function(Q,V){return V?R:G},argPackAdvance:8,readValueFromPointer:function(Q){var V;if(S===1)V=se;else if(S===2)V=j;else if(S===4)V=oe;else throw new TypeError("Unknown boolean type size: "+w);return this.fromWireType(V[Q>>W])},destructorFunction:null})}var sr=[],Qe=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function or(b){b>4&&--Qe[b].refcount==0&&(Qe[b]=void 0,sr.push(b))}function Ao(){for(var b=0,w=5;w<Qe.length;++w)Qe[w]!==void 0&&++b;return b}function So(){for(var b=5;b<Qe.length;++b)if(Qe[b]!==void 0)return Qe[b];return null}function To(){t.count_emval_handles=Ao,t.get_first_emval=So}function Wt(b){switch(b){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var w=sr.length?sr.pop():Qe.length;return Qe[w]={refcount:1,value:b},w}}}function ar(b){return this.fromWireType(re[b>>2])}function Co(b,w){w=Te(w),ht(b,{name:w,fromWireType:function(S){var R=Qe[S].value;return or(S),R},toWireType:function(S,R){return Wt(R)},argPackAdvance:8,readValueFromPointer:ar,destructorFunction:null})}function ur(b){if(b===null)return"null";var w=typeof b;return w==="object"||w==="array"||w==="function"?b.toString():""+b}function Ro(b,w){switch(w){case 2:return function(S){return this.fromWireType(te[S>>2])};case 3:return function(S){return this.fromWireType(ye[S>>3])};default:throw new TypeError("Unknown float type: "+b)}}function Io(b,w,S){var R=qe(S);w=Te(w),ht(b,{name:w,fromWireType:function(G){return G},toWireType:function(G,W){if(typeof W!="number"&&typeof W!="boolean")throw new TypeError('Cannot convert "'+ur(W)+'" to '+this.name);return W},argPackAdvance:8,readValueFromPointer:Ro(w,R),destructorFunction:null})}function Mo(b,w){if(!(b instanceof Function))throw new TypeError("new_ called with constructor type "+typeof b+" which is not a function");var S=Gt(b.name||"unknownFunctionName",function(){});S.prototype=b.prototype;var R=new S,G=b.apply(R,w);return G instanceof Object?G:R}function wi(b){for(;b.length;){var w=b.pop(),S=b.pop();S(w)}}function Bo(b,w,S,R,G){var W=w.length;W<2&&Je("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var Q=w[1]!==null&&S!==null,V=!1,Y=1;Y<w.length;++Y)if(w[Y]!==null&&w[Y].destructorFunction===void 0){V=!0;break}for(var _e=w[0].name!=="void",Ae="",Ce="",Y=0;Y<W-2;++Y)Ae+=(Y!==0?", ":"")+"arg"+Y,Ce+=(Y!==0?", ":"")+"arg"+Y+"Wired";var Ze="return function "+nn(b)+"("+Ae+`) {
if (arguments.length !== `+(W-2)+`) {
throwBindingError('function `+b+" called with ' + arguments.length + ' arguments, expected "+(W-2)+` args!');
}
`;V&&(Ze+=`var destructors = [];
`);var It=V?"destructors":"null",yt=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],ln=[Je,R,G,wi,w[0],w[1]];Q&&(Ze+="var thisWired = classParam.toWireType("+It+`, this);
`);for(var Y=0;Y<W-2;++Y)Ze+="var arg"+Y+"Wired = argType"+Y+".toWireType("+It+", arg"+Y+"); // "+w[Y+2].name+`
`,yt.push("argType"+Y),ln.push(w[Y+2]);if(Q&&(Ce="thisWired"+(Ce.length>0?", ":"")+Ce),Ze+=(_e?"var rv = ":"")+"invoker(fn"+(Ce.length>0?", ":"")+Ce+`);
`,V)Ze+=`runDestructors(destructors);
`;else for(var Y=Q?1:2;Y<w.length;++Y){var qt=Y===1?"thisWired":"arg"+(Y-2)+"Wired";w[Y].destructorFunction!==null&&(Ze+=qt+"_dtor("+qt+"); // "+w[Y].name+`
`,yt.push(qt+"_dtor"),ln.push(w[Y].destructorFunction))}_e&&(Ze+=`var ret = retType.fromWireType(rv);
return ret;
`),Ze+=`}
`,yt.push(Ze);var fa=Mo(Function,yt).apply(null,ln);return fa}function Lo(b,w,S){if(b[w].overloadTable===void 0){var R=b[w];b[w]=function(){return b[w].overloadTable.hasOwnProperty(arguments.length)||Je("Function '"+S+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+b[w].overloadTable+")!"),b[w].overloadTable[arguments.length].apply(this,arguments)},b[w].overloadTable=[],b[w].overloadTable[R.argCount]=R}}function No(b,w,S){t.hasOwnProperty(b)?((S===void 0||t[b].overloadTable!==void 0&&t[b].overloadTable[S]!==void 0)&&Je("Cannot register public name '"+b+"' twice"),Lo(t,b,b),t.hasOwnProperty(S)&&Je("Cannot register multiple overloads of a function with the same number of arguments ("+S+")!"),t[b].overloadTable[S]=w):(t[b]=w,S!==void 0&&(t[b].numArguments=S))}function Po(b,w){for(var S=[],R=0;R<b;R++)S.push(oe[(w>>2)+R]);return S}function Do(b,w,S){t.hasOwnProperty(b)||bi("Replacing nonexistant public symbol"),t[b].overloadTable!==void 0&&S!==void 0?t[b].overloadTable[S]=w:(t[b]=w,t[b].argCount=S)}function zo(b,w,S){var R=t["dynCall_"+b];return S&&S.length?R.apply(null,[w].concat(S)):R.call(null,w)}function Fo(b,w,S){return b.includes("j")?zo(b,w,S):Be.get(w).apply(null,S)}function Oo(b,w){var S=[];return function(){S.length=arguments.length;for(var R=0;R<arguments.length;R++)S[R]=arguments[R];return Fo(b,w,S)}}function Uo(b,w){b=Te(b);function S(){return b.includes("j")?Oo(b,w):Be.get(w)}var R=S();return typeof R!="function"&&Je("unknown function pointer with signature "+b+": "+w),R}var vi=void 0;function yi(b){var w=ki(b),S=Te(w);return mt(w),S}function jo(b,w){var S=[],R={};function G(W){if(!R[W]&&!dt[W]){if(Ht[W]){Ht[W].forEach(G);return}S.push(W),R[W]=!0}}throw w.forEach(G),new vi(b+": "+S.map(yi).join([", "]))}function Ho(b,w,S,R,G,W){var Q=Po(w,S);b=Te(b),G=Uo(R,G),No(b,function(){jo("Cannot call "+b+" due to unbound types",Q)},w-1),ko([],Q,function(V){var Y=[V[0],null].concat(V.slice(1));return Do(b,Bo(b,Y,null,G,W),w-1),[]})}function Go(b,w,S){switch(w){case 0:return S?function(R){return se[R]}:function(R){return ee[R]};case 1:return S?function(R){return j[R>>1]}:function(R){return $[R>>1]};case 2:return S?function(R){return oe[R>>2]}:function(R){return re[R>>2]};default:throw new TypeError("Unknown integer type: "+b)}}function Vo(b,w,S,R,G){w=Te(w),G===-1&&(G=4294967295);var W=qe(S),Q=function(_e){return _e};if(R===0){var V=32-8*S;Q=function(_e){return _e<<V>>>V}}var Y=w.includes("unsigned");ht(b,{name:w,fromWireType:Q,toWireType:function(_e,Ae){if(typeof Ae!="number"&&typeof Ae!="boolean")throw new TypeError('Cannot convert "'+ur(Ae)+'" to '+this.name);if(Ae<R||Ae>G)throw new TypeError('Passing a number "'+ur(Ae)+'" from JS side to C/C++ side to an argument of type "'+w+'", which is outside the valid range ['+R+", "+G+"]!");return Y?Ae>>>0:Ae|0},argPackAdvance:8,readValueFromPointer:Go(w,W,R!==0),destructorFunction:null})}function Wo(b,w,S){var R=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],G=R[w];function W(Q){Q=Q>>2;var V=re,Y=V[Q],_e=V[Q+1];return new G(B,_e,Y)}S=Te(S),ht(b,{name:S,fromWireType:W,argPackAdvance:8,readValueFromPointer:W},{ignoreDuplicateRegistrations:!0})}function qo(b,w){w=Te(w);var S=w==="std::string";ht(b,{name:w,fromWireType:function(R){var G=re[R>>2],W;if(S)for(var Q=R+4,V=0;V<=G;++V){var Y=R+4+V;if(V==G||ee[Y]==0){var _e=Y-Q,Ae=p(Q,_e);W===void 0?W=Ae:(W+=String.fromCharCode(0),W+=Ae),Q=Y+1}}else{for(var Ce=new Array(G),V=0;V<G;++V)Ce[V]=String.fromCharCode(ee[R+4+V]);W=Ce.join("")}return mt(R),W},toWireType:function(R,G){G instanceof ArrayBuffer&&(G=new Uint8Array(G));var W,Q=typeof G=="string";Q||G instanceof Uint8Array||G instanceof Uint8ClampedArray||G instanceof Int8Array||Je("Cannot pass non-string to std::string"),S&&Q?W=function(){return T(G)}:W=function(){return G.length};var V=W(),Y=cr(4+V+1);if(re[Y>>2]=V,S&&Q)A(G,Y+4,V+1);else if(Q)for(var _e=0;_e<V;++_e){var Ae=G.charCodeAt(_e);Ae>255&&(mt(Y),Je("String has UTF-16 code units that do not fit in 8 bits")),ee[Y+4+_e]=Ae}else for(var _e=0;_e<V;++_e)ee[Y+4+_e]=G[_e];return R!==null&&R.push(mt,Y),Y},argPackAdvance:8,readValueFromPointer:ar,destructorFunction:function(R){mt(R)}})}function Ko(b,w,S){S=Te(S);var R,G,W,Q,V;w===2?(R=I,G=H,Q=C,W=function(){return $},V=1):w===4&&(R=N,G=K,Q=x,W=function(){return re},V=2),ht(b,{name:S,fromWireType:function(Y){for(var _e=re[Y>>2],Ae=W(),Ce,Ze=Y+4,It=0;It<=_e;++It){var yt=Y+4+It*w;if(It==_e||Ae[yt>>V]==0){var ln=yt-Ze,qt=R(Ze,ln);Ce===void 0?Ce=qt:(Ce+=String.fromCharCode(0),Ce+=qt),Ze=yt+w}}return mt(Y),Ce},toWireType:function(Y,_e){typeof _e!="string"&&Je("Cannot pass non-string to C++ string type "+S);var Ae=Q(_e),Ce=cr(4+Ae+w);return re[Ce>>2]=Ae>>V,G(_e,Ce+4,Ae+w),Y!==null&&Y.push(mt,Ce),Ce},argPackAdvance:8,readValueFromPointer:ar,destructorFunction:function(Y){mt(Y)}})}function Yo(b,w){w=Te(w),ht(b,{isVoid:!0,name:w,argPackAdvance:0,fromWireType:function(){},toWireType:function(S,R){}})}function rn(b){return b||Je("Cannot use deleted val. handle = "+b),Qe[b].value}function fr(b,w){var S=dt[b];return S===void 0&&Je(w+" has unknown type "+yi(b)),S}function Xo(b,w,S){b=rn(b),w=fr(w,"emval::as");var R=[],G=Wt(R);return oe[S>>2]=G,w.toWireType(R,b)}function Jo(b,w){for(var S=new Array(b),R=0;R<b;++R)S[R]=fr(oe[(w>>2)+R],"parameter "+R);return S}function Qo(b,w,S,R){b=rn(b);for(var G=Jo(w,S),W=new Array(w),Q=0;Q<w;++Q){var V=G[Q];W[Q]=V.readValueFromPointer(R),R+=V.argPackAdvance}var Y=b.apply(void 0,W);return Wt(Y)}function Zo(b,w){return b=rn(b),w=rn(w),Wt(b[w])}function $o(b){b>4&&(Qe[b].refcount+=1)}function xo(b){return b=rn(b),typeof b=="number"}var ea={};function ta(b){var w=ea[b];return w===void 0?Te(b):w}function na(b){return Wt(ta(b))}function ra(b){var w=Qe[b].value;wi(w),or(b)}function ia(b,w){b=fr(b,"_emval_take_value");var S=b.readValueFromPointer(w);return Wt(S)}function la(){ge()}function sa(b,w,S){ee.copyWithin(b,w,w+S)}function oa(b){try{return h.grow(b-B.byteLength+65535>>>16),Me(h.buffer),1}catch{}}function aa(b){var w=ee.length;b=b>>>0;var S=2147483648;if(b>S)return!1;for(var R=1;R<=4;R*=2){var G=w*(1+.2/R);G=Math.min(G,b+100663296);var W=Math.min(S,ie(Math.max(b,G),65536)),Q=oa(W);if(Q)return!0}return!1}Xe(),Rt=t.BindingError=Vt(Error,"BindingError"),_i=t.InternalError=Vt(Error,"InternalError"),To(),vi=t.UnboundTypeError=Vt(Error,"UnboundTypeError");var ua={a:ce,q:We,u:Eo,t:Co,m:Io,k:Ho,d:Vo,c:Wo,n:qo,l:Ko,v:Yo,j:Xo,w:Qo,b:or,e:Zo,g:$o,p:xo,f:na,i:ra,h:ia,o:la,r:sa,s:aa};lr(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.y).apply(null,arguments)};var cr=t._malloc=function(){return(cr=t._malloc=t.asm.z).apply(null,arguments)},mt=t._free=function(){return(mt=t._free=t.asm.A).apply(null,arguments)},ki=t.___getTypeName=function(){return(ki=t.___getTypeName=t.asm.C).apply(null,arguments)};t.___embind_register_native_and_builtin_types=function(){return(t.___embind_register_native_and_builtin_types=t.asm.D).apply(null,arguments)},t.dynCall_ijiii=function(){return(t.dynCall_ijiii=t.asm.E).apply(null,arguments)};var vn;J=function b(){vn||dr(),vn||(J=b)};function dr(b){if(Le>0||(at(),Le>0))return;function w(){vn||(vn=!0,t.calledRun=!0,!_&&(Tt(),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Ct()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),w()},1)):w()}if(t.run=dr,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return dr(),t.ready}}(),hf=ai,wr=new Uint8Array([0,0,0,1]);function mf(n){console.error(n)}ai.createFile=Hs;function Hs(n=256){let e=0,t=0,r=new Uint8Array(n);return{contents:function(){return r.slice(0,t)},seek:function(l){e=l},write:function(l){let s=l.byteLength;return i(e+s),r.set(l,e),e+=s,t=Math.max(t,e),s}};function i(l){var s=r.length;if(s>=l)return;var a=1024*1024;l=Math.max(l,s*(s<a?2:1.125)>>>0),s!=0&&(l=Math.max(l,256));let o=r;r=new Uint8Array(l),t>0&&r.set(o.subarray(0,t),0)}}ai.isWebCodecsSupported=Gs;function Gs(){return typeof window<"u"&&typeof window.VideoEncoder=="function"}function gf(n,e={}){let{width:t,height:r,groupOfPictures:i=20,fps:l=30,fragmentation:s=!1,sequential:a=!1,hevc:o=!1,format:u="annexb",codec:f="avc1.4d0034",acceleration:c,bitrate:d,error:m=mf,encoderOptions:h={},flushFrequency:_=10}=e;if(!Gs())throw new Error("MP4 H264 encoding/decoding depends on WebCodecs API which is not supported in this environment");if(typeof t!="number"||typeof r!="number")throw new Error("Must specify { width, height } options");if(!isFinite(t)||t<0||!isFinite(r)||r<0)throw new Error("{ width, height } options must be positive integers");let g=Hs(),p=n.create_muxer({width:t,height:r,fps:l,fragmentation:s,sequential:a,hevc:o},I),v={codec:f,width:t,height:r,avc:{format:u},hardwareAcceleration:c,bitrate:d,...h},A=0,T=new window.VideoEncoder({output(N,K){C(N,K)},error:m});return T.configure(v),{async end(){return await T.flush(),T.close(),n.finalize_muxer(p),g.contents()},async addFrame(N){let K=1/l*A*1e6,x=A%i==0,ie=new VideoFrame(N,{timestamp:K});T.encode(ie,{keyFrame:x}),ie.close(),_!=null&&(A+1)%_==0&&await T.flush(),A++},async flush(){return T.flush()}};function I(N,K,x){g.seek(x);let ie=n.HEAPU8.subarray(N,N+K);return g.write(ie)!==ie.byteLength}function H(N){let K=n._malloc(N.byteLength);n.HEAPU8.set(N,K),n.mux_nal(p,K,N.byteLength),n._free(K)}function C(N,K){let x=null,ie;if(K&&(K.description&&(ie=K.description),K.decoderConfig&&K.decoderConfig.description&&(ie=K.decoderConfig.description)),ie)try{x=bf(ie)}catch(se){m(se);return}let B=[];if(x&&(x.sps_list.forEach(se=>{B.push(wr),B.push(se)}),x.pps_list.forEach(se=>{B.push(wr),B.push(se)})),u==="annexb"){let se=new Uint8Array(N.byteLength);N.copyTo(se),B.push(se)}else try{let se=new ArrayBuffer(N.byteLength);N.copyTo(se),_f(se).forEach(ee=>{B.push(wr),B.push(ee)})}catch(se){m(se);return}H(pf(B))}}function pf(n){let e=n.reduce((i,l)=>i+l.byteLength,0),t=new Uint8Array(e),r=0;for(let i=0;i<n.length;i++){let l=n[i];t.set(l,r),r+=l.byteLength}return t}function _f(n){let e=4,t=0,r=[],i=n.byteLength,l=new Uint8Array(n);for(;t+e<i;){let s=l[t];if(s=(s<<8)+l[t+1],s=(s<<8)+l[t+2],s=(s<<8)+l[t+3],r.push(new Uint8Array(n,t+e,s)),s==0)throw new Error("Error: invalid nal_length 0");t+=e+s}return r}function bf(n){let e=new DataView(n),t=0,r=e.getUint8(t++),i=e.getUint8(t++),l=e.getUint8(t++),s=e.getUint8(t++),a=(e.getUint8(t++)&3)+1;if(a!==4)throw new Error("Expected length_size to indicate 4 bytes");let o=e.getUint8(t++)&31,u=[];for(let d=0;d<o;d++){let m=e.getUint16(t,!1);t+=2;let h=new Uint8Array(e.buffer,t,m);u.push(h),t+=m}let f=e.getUint8(t++),c=[];for(let d=0;d<f;d++){let m=e.getUint16(t,!1);t+=2;let h=new Uint8Array(e.buffer,t,m);c.push(h),t+=m}return{offset:t,version:r,profile:i,compat:l,level:s,length_size:a,pps_list:c,sps_list:u,numSPS:o}}let Gi;const jn=class extends xn{constructor(e,t){super(e,t)}async load(){jn.loaded||(Gi=await hf(),jn.loaded=!0),this.encoder=Gi.createWebCodecsEncoder({width:this.canvas.width,height:this.canvas.height,fps:this.framerate})}async tick(){const e=await window.createImageBitmap(this.canvas);await this.encoder.addFrame(e)}async end(){const e=await this.encoder.end();this.result=new Blob([e],{type:"video/mp4"}),super.end()}};let an=jn;hr(an,"loaded",!1),hr(an,"isSupported",!0);var wf={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function Vs(n=256){let e=0,t=new Uint8Array(n);return{get buffer(){return t.buffer},reset(){e=0},bytesView(){return t.subarray(0,e)},bytes(){return t.slice(0,e)},writeByte(i){r(e+1),t[e]=i,e++},writeBytes(i,l=0,s=i.length){r(e+s);for(let a=0;a<s;a++)t[e++]=i[a+l]},writeBytesView(i,l=0,s=i.byteLength){r(e+s),t.set(i.subarray(l,l+s),e),e+=s}};function r(i){var l=t.length;if(l>=i)return;var s=1024*1024;i=Math.max(i,l*(l<s?2:1.125)>>>0),l!=0&&(i=Math.max(i,256));let a=t;t=new Uint8Array(i),e>0&&t.set(a.subarray(0,e),0)}}var vr=12,Vi=5003,vf=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function yf(n,e,t,r,i=Vs(512),l=new Uint8Array(256),s=new Int32Array(Vi),a=new Int32Array(Vi)){let o=s.length,u=Math.max(2,r);l.fill(0),a.fill(0),s.fill(-1);let f=0,c=0,d=u+1,m=d,h=!1,_=m,g=(1<<_)-1,p=1<<d-1,v=p+1,A=p+2,T=0,I=t[0],H=0;for(let K=o;K<65536;K*=2)++H;H=8-H,i.writeByte(u),N(p);let C=t.length;for(let K=1;K<C;K++){e:{let x=t[K],ie=(x<<vr)+I,B=x<<H^I;if(s[B]===ie){I=a[B];break e}let se=B===0?1:o-B;for(;s[B]>=0;)if(B-=se,B<0&&(B+=o),s[B]===ie){I=a[B];break e}N(I),I=x,A<1<<vr?(a[B]=A++,s[B]=ie):(s.fill(-1),A=p+2,h=!0,N(p))}}return N(I),N(v),i.writeByte(0),i.bytesView();function N(K){for(f&=vf[c],c>0?f|=K<<c:f=K,c+=_;c>=8;)l[T++]=f&255,T>=254&&(i.writeByte(T),i.writeBytesView(l,0,T),T=0),f>>=8,c-=8;if((A>g||h)&&(h?(_=m,g=(1<<_)-1,h=!1):(++_,g=_===vr?1<<_:(1<<_)-1)),K==v){for(;c>0;)l[T++]=f&255,T>=254&&(i.writeByte(T),i.writeBytesView(l,0,T),T=0),f>>=8,c-=8;T>0&&(i.writeByte(T),i.writeBytesView(l,0,T),T=0)}}}var kf=yf;function Ws(n,e,t){return n<<8&63488|e<<2&992|t>>3}function qs(n,e,t,r){return n>>4|e&240|(t&240)<<4|(r&240)<<8}function Ks(n,e,t){return n>>4<<8|e&240|t>>4}function An(n,e,t){return n<e?e:n>t?t:n}function un(n){return n*n}function Wi(n,e,t){var r=0,i=1e100;let l=n[e],s=l.cnt,a=l.ac,o=l.rc,u=l.gc,f=l.bc;for(var c=l.fw;c!=0;c=n[c].fw){let m=n[c],h=m.cnt,_=s*h/(s+h);if(!(_>=i)){var d=0;t&&(d+=_*un(m.ac-a),d>=i)||(d+=_*un(m.rc-o),!(d>=i)&&(d+=_*un(m.gc-u),!(d>=i)&&(d+=_*un(m.bc-f),!(d>=i)&&(i=d,r=c))))}}l.err=i,l.nn=r}function yr(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function Ef(n,e){let t=e==="rgb444"?4096:65536,r=new Array(t),i=n.length;if(e==="rgba4444")for(let l=0;l<i;++l){let s=n[l],a=s>>24&255,o=s>>16&255,u=s>>8&255,f=s&255,c=qs(f,u,o,a),d=c in r?r[c]:r[c]=yr();d.rc+=f,d.gc+=u,d.bc+=o,d.ac+=a,d.cnt++}else if(e==="rgb444")for(let l=0;l<i;++l){let s=n[l],a=s>>16&255,o=s>>8&255,u=s&255,f=Ks(u,o,a),c=f in r?r[f]:r[f]=yr();c.rc+=u,c.gc+=o,c.bc+=a,c.cnt++}else for(let l=0;l<i;++l){let s=n[l],a=s>>16&255,o=s>>8&255,u=s&255,f=Ws(u,o,a),c=f in r?r[f]:r[f]=yr();c.rc+=u,c.gc+=o,c.bc+=a,c.cnt++}return r}function Af(n,e,t={}){let{format:r="rgb565",clearAlpha:i=!0,clearAlphaColor:l=0,clearAlphaThreshold:s=0,oneBitAlpha:a=!1}=t;if(!n||!n.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(n instanceof Uint8Array)&&!(n instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");let o=new Uint32Array(n.buffer),u=t.useSqrt!==!1,f=r==="rgba4444",c=Ef(o,r),d=c.length,m=d-1,h=new Uint32Array(d+1);for(var _=0,g=0;g<d;++g){let ee=c[g];if(ee!=null){var p=1/ee.cnt;f&&(ee.ac*=p),ee.rc*=p,ee.gc*=p,ee.bc*=p,c[_++]=ee}}un(e)/_<.022&&(u=!1);for(var g=0;g<_-1;++g)c[g].fw=g+1,c[g+1].bk=g,u&&(c[g].cnt=Math.sqrt(c[g].cnt));u&&(c[g].cnt=Math.sqrt(c[g].cnt));var v,A,T;for(g=0;g<_;++g){Wi(c,g,!1);var I=c[g].err;for(A=++h[0];A>1&&(T=A>>1,!(c[v=h[T]].err<=I));A=T)h[A]=v;h[A]=g}var H=_-e;for(g=0;g<H;){for(var C;;){var N=h[1];if(C=c[N],C.tm>=C.mtm&&c[C.nn].mtm<=C.tm)break;C.mtm==m?N=h[1]=h[h[0]--]:(Wi(c,N,!1),C.tm=g);var I=c[N].err;for(A=1;(T=A+A)<=h[0]&&(T<h[0]&&c[h[T]].err>c[h[T+1]].err&&T++,!(I<=c[v=h[T]].err));A=T)h[A]=v;h[A]=N}var K=c[C.nn],x=C.cnt,ie=K.cnt,p=1/(x+ie);f&&(C.ac=p*(x*C.ac+ie*K.ac)),C.rc=p*(x*C.rc+ie*K.rc),C.gc=p*(x*C.gc+ie*K.gc),C.bc=p*(x*C.bc+ie*K.bc),C.cnt+=K.cnt,C.mtm=++g,c[K.bk].fw=K.fw,c[K.fw].bk=K.bk,K.mtm=m}let B=[];var se=0;for(g=0;;++se){let ee=An(Math.round(c[g].rc),0,255),j=An(Math.round(c[g].gc),0,255),$=An(Math.round(c[g].bc),0,255),oe=255;f&&(oe=An(Math.round(c[g].ac),0,255),a&&(oe=oe<=(typeof a=="number"?a:127)?0:255),i&&oe<=s&&(ee=j=$=l,oe=0));let re=f?[ee,j,$,oe]:[ee,j,$];if(Sf(B,re)||B.push(re),(g=c[g].fw)==0)break}return B}function Sf(n,e){for(let t=0;t<n.length;t++){let r=n[t],i=r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2],l=r.length>=4&&e.length>=4?r[3]===e[3]:!0;if(i&&l)return!0}return!1}function Tf(n,e,t="rgb565"){if(!n||!n.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(n instanceof Uint8Array)&&!(n instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(e.length>256)throw new Error("applyPalette() only works with 256 colors or less");let r=new Uint32Array(n.buffer),i=r.length,l=t==="rgb444"?4096:65536,s=new Uint8Array(i),a=new Array(l);if(t==="rgba4444")for(let o=0;o<i;o++){let u=r[o],f=u>>24&255,c=u>>16&255,d=u>>8&255,m=u&255,h=qs(m,d,c,f),_=h in a?a[h]:a[h]=Cf(m,d,c,f,e);s[o]=_}else{let o=t==="rgb444"?Ks:Ws;for(let u=0;u<i;u++){let f=r[u],c=f>>16&255,d=f>>8&255,m=f&255,h=o(m,d,c),_=h in a?a[h]:a[h]=Rf(m,d,c,e);s[u]=_}}return s}function Cf(n,e,t,r,i){let l=0,s=1e100;for(let a=0;a<i.length;a++){let o=i[a],u=o[3],f=Nt(u-r);if(f>s)continue;let c=o[0];if(f+=Nt(c-n),f>s)continue;let d=o[1];if(f+=Nt(d-e),f>s)continue;let m=o[2];f+=Nt(m-t),!(f>s)&&(s=f,l=a)}return l}function Rf(n,e,t,r){let i=0,l=1e100;for(let s=0;s<r.length;s++){let a=r[s],o=a[0],u=Nt(o-n);if(u>l)continue;let f=a[1];if(u+=Nt(f-e),u>l)continue;let c=a[2];u+=Nt(c-t),!(u>l)&&(l=u,i=s)}return i}function Nt(n){return n*n}function If(n={}){let{initialCapacity:e=4096,auto:t=!0}=n,r=Vs(e),i=5003,l=new Uint8Array(256),s=new Int32Array(i),a=new Int32Array(i),o=!1;return{reset(){r.reset(),o=!1},finish(){r.writeByte(wf.trailer)},bytes(){return r.bytes()},bytesView(){return r.bytesView()},get buffer(){return r.buffer},get stream(){return r},writeHeader:u,writeFrame(f,c,d,m={}){let{transparent:h=!1,transparentIndex:_=0,delay:g=0,palette:p=null,repeat:v=0,colorDepth:A=8,dispose:T=-1}=m,I=!1;if(t?o||(I=!0,u(),o=!0):I=Boolean(m.first),c=Math.max(0,Math.floor(c)),d=Math.max(0,Math.floor(d)),I){if(!p)throw new Error("First frame must include a { palette } option");Bf(r,c,d,p,A),qi(r,p),v>=0&&Lf(r,v)}let H=Math.round(g/10);Mf(r,T,H,h,_);let C=Boolean(p)&&!I;Nf(r,c,d,C?p:null),C&&qi(r,p),Pf(r,f,c,d,A,l,s,a)}};function u(){Ys(r,"GIF89a")}}function Mf(n,e,t,r,i){n.writeByte(33),n.writeByte(249),n.writeByte(4),i<0&&(i=0,r=!1);var l,s;r?(l=1,s=2):(l=0,s=0),e>=0&&(s=e&7),s<<=2;let a=0;n.writeByte(0|s|a|l),kt(n,t),n.writeByte(i||0),n.writeByte(0)}function Bf(n,e,t,r,i=8){let l=1,s=0,a=ui(r.length)-1,o=l<<7|i-1<<4|s<<3|a,u=0,f=0;kt(n,e),kt(n,t),n.writeBytes([o,u,f])}function Lf(n,e){n.writeByte(33),n.writeByte(255),n.writeByte(11),Ys(n,"NETSCAPE2.0"),n.writeByte(3),n.writeByte(1),kt(n,e),n.writeByte(0)}function qi(n,e){let t=1<<ui(e.length);for(let r=0;r<t;r++){let i=[0,0,0];r<e.length&&(i=e[r]),n.writeByte(i[0]),n.writeByte(i[1]),n.writeByte(i[2])}}function Nf(n,e,t,r){if(n.writeByte(44),kt(n,0),kt(n,0),kt(n,e),kt(n,t),r){let i=0,l=0,s=ui(r.length)-1;n.writeByte(128|i|l|0|s)}else n.writeByte(0)}function Pf(n,e,t,r,i=8,l,s,a){kf(t,r,e,i,n,l,s,a)}function kt(n,e){n.writeByte(e&255),n.writeByte(e>>8&255)}function Ys(n,e){for(var t=0;t<e.length;t++)n.writeByte(e.charCodeAt(t))}function ui(n){return Math.max(Math.ceil(Math.log2(n)),1)}class Df extends xn{start(){this.encoder=If(),this.tmpCanvas=document.createElement("canvas"),this.tmpContext=this.tmpCanvas.getContext("2d"),this.maxColors=Math.floor(lt(this.quality,1,100,1,256)),super.start()}getBitmapRGBA(e,t=e.width,r=e.height){return this.tmpCanvas.width=t,this.tmpCanvas.height=r,this.tmpContext.clearRect(0,0,t,r),this.tmpContext.drawImage(e,0,0,t,r),this.tmpContext.getImageData(0,0,t,r).data}tick(){const{width:e,height:t}=this.canvas,r=this.getBitmapRGBA(this.canvas,e,t),i=Af(r,this.maxColors),l=Tf(r,i);this.encoder.writeFrame(l,e,t,{palette:i,delay:this.frameDuration})}end(){this.encoder.finish(),this.result=new Blob([this.encoder.bytes()],{type:"image/gif"}),super.end()}}const zf=["image/png","image/jpeg","image/webp"];function Xs(n,{encoding:e="image/png",encodingQuality:t=.92}={}){if(!zf.includes(e))throw new Error(`Invalid canvas encoding ${e}`);let r=(e.split("/")[1]||"").replace(/jpeg/i,"jpg");r&&(r=`.${r}`.toLowerCase());let i=n.toDataURL(e,t);return{extension:r,type:e,dataURL:i}}class Ff extends xn{constructor(e,t){super(e,t);const{imageEncoding:r="png"}=t;this.imageEncoding=r,this.imageQuality=lt(this.quality,1,100,0,1)}start(){this.frames=[],super.start()}tick(){let{dataURL:e}=Xs(this.canvas,{encoding:`image/${this.imageEncoding}`,encodingQuality:this.imageQuality});this.frames[this.frameCount]=e}async end(){this.result=await Promise.all(this.frames.map(e=>zs(e))),super.end()}}async function Js(n,e,t){async function r(){t||(t=await zs(n)),await Fs(t,e)}async function i(l){typeof e.onError=="function"&&e.onError(l),await r()}try{await r()}catch(l){i(l)}}async function Of(n){return new Promise((e,t)=>{const r=new FileReader;r.onerror=i=>{t(i)},r.onload=i=>{e(i.target.result)},r.readAsDataURL(n)})}async function Ki(n,e){const t=await Of(n);return Js(t,e,n)}function Qs(){const n=new Date,e=n.toLocaleString("default",{year:"numeric"}),t=n.toLocaleString("default",{month:"numeric"}).padStart(2,"0"),r=n.toLocaleString("default",{day:"numeric"}),i=n.toLocaleString("default",{hour:"numeric"}).split(" ")[0],l=n.toLocaleString("default",{minute:"numeric"}).padStart(2,"0"),s=n.toLocaleString("default",{second:"numeric"}).padStart(2,"0"),a=`${e}.${t}.${r}-${i}.${l}.${s}`;return{year:e,month:t,day:r,hours:i,minutes:l,seconds:s,timestamp:a}}const Zs=({filename:n,timestamp:e})=>`${n}.${e}`;async function Uf(n,{filename:e="",pattern:t=Zs,params:r={}}){const{imageEncoding:i,imageQuality:l,pixelsPerInch:s}=xl(zn);let{extension:a,dataURL:o}=Xs(n,{encoding:`image/${i}`,encodingQuality:lt(l,1,100,0,1)}),u=Qs(),f=t({filename:e,...r,...u});i!=="webp"&&s!==72&&(o=Qu(o,s)),await Js(o,{filename:`${f}${a}`,onError:()=>{console.error("[fragment] Error while saving screenshot.")}})}function jf(n,e){let t=new df(n,e);return t.start(),t}function Hf(n,e){let t=new an(n,e);return t.start(),t}function Gf(n,e){let t=new Df(n,e);return t.start(),t}function Vf(n,e){let t=new Ff(n,e);return t.start(),t}function Wf(n,{filename:e="output",format:t="mp4",framerate:r=25,duration:i=1/0,quality:l=100,pattern:s=Zs,imageEncoding:a,onStart:o=()=>{},onTick:u=()=>{},onComplete:f=()=>{}}={}){let c=Qs(),d=s({filename:e,...c});function m(g){if(Array.isArray(g)){const p=t===Qt.FRAMES?a:t;for(let v=0;v<g.length;v++){const A=`${v}`.padStart(`${g.length}`.length,"0");Ki(g[v],{filename:`${d}-${A}.${p}`,onError:()=>{console.log("[fragment] Error while saving record.")}})}}else Ki(g,{filename:`${d}.${t}`,onError:()=>{console.log("[fragment] Error while saving record.")}});f()}const h={framerate:r,duration:i,quality:l,onStart:o,onTick:u,onComplete:m};let _;return t===Qt.WEBM?_=jf(n,h):t===Qt.MP4?_=Hf(n,h):t===Qt.GIF?_=Gf(n,h):t===Qt.FRAMES&&(_=Vf(n,{...h,imageEncoding:a})),_||console.error("Cannot find matching recorder"),_}function Yi(n,e,t){const r=n.slice();return r[5]=e[t],r}function Xi(n,e,t){const r=n.slice();return r[8]=e[t],r}function Ji(n){let e,t=n[2],r=[];for(let i=0;i<t.length;i+=1)r[i]=Qi(Xi(n,t,i));return{c(){e=F("p");for(let i=0;i<r.length;i+=1)r[i].c();k(e,"class","stack svelte-f9ct9r")},m(i,l){L(i,e,l);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(i,l){if(l&4){t=i[2];let s;for(s=0;s<t.length;s+=1){const a=Xi(i,t,s);r[s]?r[s].p(a,l):(r[s]=Qi(a),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},d(i){i&&M(e),At(r,i)}}}function Qi(n){let e,t=n[8]+"",r;return{c(){e=F("span"),r=Re(t),k(e,"class","svelte-f9ct9r")},m(i,l){L(i,e,l),O(e,r)},p(i,l){l&4&&t!==(t=i[8]+"")&&Ge(r,t)},d(i){i&&M(e)}}}function Zi(n){let e,t=n[1],r=[];for(let i=0;i<t.length;i+=1)r[i]=$i(Yi(n,t,i));return{c(){e=F("div");for(let i=0;i<r.length;i+=1)r[i].c();k(e,"class","extract svelte-f9ct9r")},m(i,l){L(i,e,l);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(i,l){if(l&2){t=i[1];let s;for(s=0;s<t.length;s+=1){const a=Yi(i,t,s);r[s]?r[s].p(a,l):(r[s]=$i(a),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},d(i){i&&M(e),At(r,i)}}}function $i(n){let e,t=n[5].text+"",r;return{c(){e=F("span"),r=Re(t),k(e,"class","extract-line svelte-f9ct9r"),q(e,"highlighted",n[5].highlighted)},m(i,l){L(i,e,l),O(e,r)},p(i,l){l&2&&t!==(t=i[5].text+"")&&Ge(r,t),l&2&&q(e,"highlighted",i[5].highlighted)},d(i){i&&M(e)}}}function qf(n){let e,t,r,i=n[0].name+"",l,s,a=n[0].message+"",o,u,f,c,d,m,h,_=n[0].stack&&Ji(n),g=n[1].length>0&&Zi(n);return{c(){e=F("div"),t=F("div"),r=F("h2"),l=Re(i),s=Re(": "),o=Re(a),u=Z(),_&&_.c(),f=Z(),g&&g.c(),c=Z(),d=F("span"),d.textContent="Open your browser's console to further inspect this error. Click to dismiss.",k(r,"class","svelte-f9ct9r"),k(t,"class","display"),k(d,"class","console svelte-f9ct9r"),k(e,"class","error-overlay svelte-f9ct9r")},m(p,v){L(p,e,v),O(e,t),O(t,r),O(r,l),O(r,s),O(r,o),O(t,u),_&&_.m(t,null),O(t,f),g&&g.m(t,null),O(e,c),O(e,d),m||(h=pe(e,"click",n[4]),m=!0)},p(p,[v]){v&1&&i!==(i=p[0].name+"")&&Ge(l,i),v&1&&a!==(a=p[0].message+"")&&Ge(o,a),p[0].stack?_?_.p(p,v):(_=Ji(p),_.c(),_.m(t,f)):_&&(_.d(1),_=null),p[1].length>0?g?g.p(p,v):(g=Zi(p),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},i:ae,o:ae,d(p){p&&M(e),_&&_.d(),g&&g.d(),m=!1,h()}}}function $s(n){const e=n.match(/(:([0-9]+)\:([0-9]+))/);let t,r;return e&&e[2]&&e[3]&&(t=e[2],r=e[3]),{lineNumber:t,colNumber:r}}function Kf(n,e,t){let r,i,{error:l}=e;const s=()=>Vu();return n.$$set=a=>{"error"in a&&t(0,l=a.error)},n.$$.update=()=>{n.$$.dirty&1&&t(2,r=l.stack?l.stack.split(`
`).filter((a,o,u)=>u.length===1?!0:o!==0).filter(a=>!a.includes("/app")).map(a=>(a=a.replace(`${window.location.origin}/@fs/Users/furiouzz/Documents/2023-10-gobelins/_DEV/fragments/`,""),a=a.replace(/\?.+?\:/g,":"),a)):null),n.$$.dirty&1&&t(1,i=l.source?l.source.split(`
`).map((a,o)=>({text:a,highlighted:a.includes(`> ${l.lineNumber}:`)})):[])},[l,i,r,$s,s]}class Yf extends fe{constructor(e){super(),ue(this,e,Kf,qf,le,{error:0,getLineAndColNumber:3})}get getLineAndColNumber(){return $s}}function xi(n){let e;return{c(){e=F("span"),e.textContent="REC",k(e,"class","record svelte-1phe1cq")},m(t,r){L(t,e,r)},d(t){t&&M(e)}}}function el(n){let e,t;return e=new Yf({props:{error:n[6]}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i[0]&64&&(l.error=r[6]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Xf(n){let e,t,r,i,l,s,a,o,u,f,c,d,m,h,_,g=n[2]&&xi();s=new Zt({props:{type:"down",key:" "}}),s.$on("trigger",n[7]),o=new Zt({props:{type:"down",key:"r"}}),o.$on("trigger",n[10]),f=new Zt({props:{type:"down",key:"s"}}),f.$on("trigger",n[8]),d=new Zt({props:{type:"down",key:"S"}}),d.$on("trigger",n[9]);let p=n[6]&&el(n);return{c(){e=F("div"),t=F("div"),r=Z(),g&&g.c(),l=Z(),z(s.$$.fragment),a=Z(),z(o.$$.fragment),u=Z(),z(f.$$.fragment),c=Z(),z(d.$$.fragment),m=Z(),p&&p.c(),h=Se(),k(t,"class","canvas-container svelte-1phe1cq"),be(t,"max-width",n[1].width+"px"),be(t,"max-height",n[1].height+"px"),k(e,"class","sketch-renderer svelte-1phe1cq"),k(e,"style",i=`--background-color: ${n[5]}`),q(e,"visible",n[0]),q(e,"recording",n[2])},m(v,A){L(v,e,A),O(e,t),n[26](t),O(e,r),g&&g.m(e,null),n[27](e),L(v,l,A),P(s,v,A),L(v,a,A),P(o,v,A),L(v,u,A),P(f,v,A),L(v,c,A),P(d,v,A),L(v,m,A),p&&p.m(v,A),L(v,h,A),_=!0},p(v,A){(!_||A[0]&2)&&be(t,"max-width",v[1].width+"px"),(!_||A[0]&2)&&be(t,"max-height",v[1].height+"px"),v[2]?g||(g=xi(),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!_||A[0]&32&&i!==(i=`--background-color: ${v[5]}`))&&k(e,"style",i),(!_||A[0]&1)&&q(e,"visible",v[0]),(!_||A[0]&4)&&q(e,"recording",v[2]),v[6]?p?(p.p(v,A),A[0]&64&&y(p,1)):(p=el(v),p.c(),y(p,1),p.m(h.parentNode,h)):p&&(de(),E(p,1,1,()=>{p=null}),he())},i(v){_||(y(s.$$.fragment,v),y(o.$$.fragment,v),y(f.$$.fragment,v),y(d.$$.fragment,v),y(p),_=!0)},o(v){E(s.$$.fragment,v),E(o.$$.fragment,v),E(f.$$.fragment,v),E(d.$$.fragment,v),E(p),_=!1},d(v){v&&M(e),n[26](null),g&&g.d(),n[27](null),v&&M(l),D(s,v),v&&M(a),D(o,v),v&&M(u),D(f,v),v&&M(c),D(d,v),v&&M(m),p&&p.d(v),v&&M(h)}}}function Jf(n,e,t){let r,i,l,s,a,o,u,f,c,d,m,h;ne(n,$n,U=>t(21,i=U)),ne(n,Ke,U=>t(22,l=U)),ne(n,zt,U=>t(23,s=U)),ne(n,Ne,U=>t(1,a=U)),ne(n,pr,U=>t(2,o=U)),ne(n,Hi,U=>t(24,u=U)),ne(n,Tr,U=>t(39,f=U)),ne(n,zn,U=>t(25,c=U)),ne(n,Dt,U=>t(40,d=U)),ne(n,pt,U=>t(41,m=U)),ne(n,ft,U=>t(42,h=U));let{key:_}=e,{id:g=0}=e,{paused:p=!1}=e,{visible:v=!0}=e,A,T,I=60,H=0,C=0,N=performance.now(),K=performance.now(),x=0,ie=performance.now(),B,se,ee=_,j,$=!1,oe=!1,re,te=()=>{},ye=te,Me="inherit";function Be(){if(!A)return;let U=a.resizing===ve.WINDOW||a.resizing===ve.ASPECT_RATIO,ce,We;if(a.resizing===ve.WINDOW)ce=A.offsetWidth,We=A.offsetHeight;else if(a.resizing===ve.ASPECT_RATIO){const{offsetWidth:qe,offsetHeight:Xe}=A,je=a.aspectRatio,Te=qe/Xe;je<Te?(We=Xe,ce=We*je):(ce=qe,We=ce/je)}U=U&&(ce!==a.width||We!==a.height),U&&Ne.update(qe=>({...qe,width:ce,height:We}))}let rt=new ResizeObserver(()=>{Be()}),ot={},Ot=Ba(ft,()=>h[_]),at=!1;Ot.subscribe(()=>{I===0&&requestAnimationFrame(()=>{at=!0})}),pt.subscribe(()=>{Ut()});function Tt(U=document.createElement("canvas")){return U.width=a.width*a.pixelRatio,U.height=a.height*a.pixelRatio,U.onmousedown=ce=>Gr(ce,_),U.onmousemove=ce=>Vr(ce,_),U.onmouseup=ce=>Wr(ce,_),U.onclick=ce=>qr(ce,_),T.appendChild(U),we(Ke,l=l.map(ce=>ce.id===g?{...ce,canvas:U}:ce),l),U}function Ct(U){U.onmousedown=null,U.onmousemove=null,U.onmouseup=null,U.onclick=null,U.parentNode===T&&U.parentNode.removeChild(U),U=null}function Ut(){j?(m.previewing||!0)&&j.buildConfig&&j.buildConfig.backgroundColor?t(5,Me=j.buildConfig.backgroundColor):!m.previewing&&j.backgroundColor?t(5,Me=j.backgroundColor):t(5,Me="inherit"):t(5,Me="inherit")}async function wt(U){if(t(17,$=!1),t(16,j=d[U]),!U||!j){oe=!0,se&&(cancelAnimationFrame(se),se=null);return}if(ji(U),Ut(),B&&(re&&typeof re.onDestroyPreview=="function"&&re.onDestroyPreview({id:g,canvas:B}),Ct(B)),t(18,re=await Ju(j.rendering)),!T)return;t(14,B=Tt()),a.resizing===ve.SCALE?t(14,B.style.transform=`scale(${a.scale})`,B):t(14,B.style.transform=null,B),Is(U);let ce={};re&&typeof re.onMountPreview=="function"&&(ce=re.onMountPreview({id:g,canvas:B,width:a.width,height:a.height,pixelRatio:a.pixelRatio})),ce.canvas&&ce.canvas!==B&&(Ct(B),t(14,B=Tt(ce.canvas))),ot={...ce,canvas:B},I=isFinite(j.fps)?j.fps:60;const We=j.setup||j.init||te,qe=j.resize||te,{width:Xe,height:je,pixelRatio:Te}=a;try{C=0,j.load&&await j.load(),We({width:Xe,height:je,pixelRatio:Te,props:ft,...ot}),qe({canvas:B,width:Xe,height:je,pixelRatio:Te,props:ft,...ot}),t(17,$=!0),oe=!1,t(19,ye=me()),requestAnimationFrame(()=>{at=!0,se||Ee()})}catch(ut){jt(ut)}}function jt(U){oe=!0,console.error(U),li(U,_),cancelAnimationFrame(se),se=null}let Le=o,J=u;function me(){const{width:U,height:ce,pixelRatio:We}=a,qe=j.draw||j.update,{duration:Xe}=j;let je=0,Te=0,ut=isFinite(Xe),dt=re&&re.onBeforeUpdatePreview||te,Ht=re&&re.onAfterUpdatePreview||te,wn=1e3/I,nn=1/(I*Xe);return({time:Gt=performance.now(),deltaTime:Vt=Gt-ie}={})=>{at=!1,ie=Gt;try{dt({id:g,canvas:B});let Rt=f?Math.floor(Gt/wn)*wn:C;ut&&I>0&&(je=Rt/1e3/Xe,je%=1,je=Math.floor(je/nn)*nn,Te=Math.floor(C/1e3/Xe)),qe({...re,...ot,props:j.props,playhead:je,playcount:Te,width:U,height:ce,pixelRatio:We,time:Rt,deltaTime:Vt}),Ht({id:g,canvas:B}),C+=Vt}catch(Rt){jt(Rt)}}}function Ee(){se=requestAnimationFrame(Ee),N=performance.now(),x=N-K,K=N,p?ie=N:(H+=x,f?ye():H>=1/I*1e3&&(H=0,ye())),at&&ye()}Ne.subscribe(U=>{if(B&&$){U.resizing===ve.SCALE?t(14,B.style.transform=`scale(${U.scale})`,B):t(14,B.style.transform=null,B);const{width:ce,height:We,pixelRatio:qe}=U;(j.resize||te)({canvas:B,width:ce,height:We,pixelRatio:qe,...ot}),t(19,ye=me()),at=!0}});async function ge(){t(11,p=!0),ye(),await Uf(B,{filename:_,pattern:j==null?void 0:j.filenamePattern,params:{props:j.props}}),t(11,p=!1),we(Hi,u=!1,u)}Dt.subscribe(()=>{($||oe)&&wt(_)}),Tr.subscribe(()=>{$&&t(19,ye=me())}),Ft(()=>{wt(_),qn.on("shader-update",()=>{I===0&&(at=!0)}),rt.observe(A)});function Ue(U){const ce=U.detail;(!ce.metaKey||!ce.ctrlKey)&&(ce.preventDefault(),o?console.warn("Cannot pause while recording."):(K=performance.now(),t(11,p=!p)))}function it(U){const ce=U.detail;(ce.metaKey||ce.ctrlKey)&&(ce.preventDefault(),o?console.warn("Cannot save while recording."):ge())}function Ie(U){U.detail.preventDefault(),we(pr,o=!o,o)}function vt(U){const ce=U.detail;!ce.metaKey&&!ce.ctrlKey&&(ce.preventDefault(),console.log(`[fragment] ${_} reloaded.`),wt(_))}bt(()=>{rt.unobserve(A),cancelAnimationFrame(se),re&&typeof re.onDestroyPreview=="function"&&re.onDestroyPreview({id:g,canvas:B}),t(18,re=null),B&&Ct(B),t(17,$=!1)});function ir(U){ke[U?"unshift":"push"](()=>{T=U,t(4,T)})}function lr(U){ke[U?"unshift":"push"](()=>{A=U,t(3,A)})}return n.$$set=U=>{"key"in U&&t(12,_=U.key),"id"in U&&t(13,g=U.id),"paused"in U&&t(11,p=U.paused),"visible"in U&&t(0,v=U.visible)},n.$$.update=()=>{if(n.$$.dirty[0]&286722&&(Be(),re&&typeof re.onResizePreview=="function"&&re.onResizePreview({id:g,width:a.width,height:a.height,pixelRatio:a.pixelRatio}),B)){const U=a.pixelRatio;t(14,B.width=a.width*U,B),t(14,B.height=a.height*U,B)}if(n.$$.dirty[0]&35213316){if(o&&!Le){let U={onTick:ye,framerate:c.framerate,filename:_,pattern:j==null?void 0:j.filenamePattern,format:c.videoFormat,imageEncoding:c.imageEncoding,quality:c.videoQuality,params:{props:j.props},onStart:()=>{C=0,t(11,p=!0)},onComplete:()=>{we(pr,o=!1,o),t(20,Le=null),t(11,p=!1)}};c.useDuration&&(U.duration=j.duration*c.loopCount),t(20,Le=Wf(B,U))}Le&&!o&&(Le.stop(),t(20,Le=!1))}n.$$.dirty[0]&16777216&&!J&&u&&ge(),n.$$.dirty[0]&184320&&B&&ee!==_&&($&&ji(ee),t(15,ee=_),wt(_)),n.$$.dirty[0]&14684160&&t(6,r=_&&i.has(_)?i.get(_):i.size===1&&![...i.keys()].some(U=>s.includes(U))&&(l.length===1||!l.some(U=>U.selected===i.keys().next().value))?i.get(i.keys().next().value):null)},[v,a,o,A,T,Me,r,Ue,it,Ie,vt,p,_,g,B,ee,j,$,re,ye,Le,i,l,s,u,c,ir,lr]}class Qf extends fe{constructor(e){super(),ue(this,e,Jf,Xf,le,{key:12,id:13,paused:11,visible:0},null,[-1,-1])}}class Zf{constructor(e,{attributes:t={position:{data:[-1,-1,3,-1,-1,3]},uv:{data:[0,0,2,0,0,2]}}}={}){this.gl=e,this.attributes=t,this.buffers=Object.keys(t).reduce((r,i)=>{let l=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t[i].data),e.STATIC_DRAW),r[i]=l,r},{})}destroy(){Object.keys(this.buffers).forEach(e=>{let t=this.buffers[e];this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,1,this.gl.STATIC_DRAW),this.gl.deleteBuffer(t)}),this.buffers=null,this.attributes=null}}function tl(n){return(n&n-1)===0}const $f=new Uint8Array([0,0,0,0]);let xf=0;class Mr{constructor(e,{image:t,name:r="",target:i=e.TEXTURE_2D,type:l=e.UNSIGNED_BYTE,wrapS:s=e.CLAMP_TO_EDGE,wrapT:a=e.CLAMP_TO_EDGE,generateMipmaps:o=!0,format:u=e.RGBA,internalFormat:f=u,minFilter:c=o?e.NEAREST_MIPMAP_LINEAR:e.LINEAR,magFilter:d=e.LINEAR,flipY:m=i===e.TEXTURE_2D}={}){this.gl=e,this.image=t,this.name=r,this.target=i,this.type=l,this.wrapS=s,this.wrapT=a,this.generateMipmaps=o,this.format=u,this.internalFormat=f,this.minFilter=c,this.magFilter=d,this.flipY=m,this.needsUpdate=!0,this.glTexture=this.gl.createTexture(),this.id=xf++}bind(){this.gl.state.textureUnits[this.gl.state.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.glTexture),this.gl.state.textureUnits[this.gl.state.activeTextureUnit]=this.id)}update(e=0){(this.needsUpdate||this.gl.state.textureUnits[e]!==this.id)&&(this.gl.state.activeTextureUnit!==e&&(this.gl.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e)),this.bind()),this.needsUpdate&&(this.needsUpdate=!1,this.flipY!==this.gl.state.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.gl.state.flipY=this.flipY),this.image&&this.generateMipmaps&&(!tl(this.image.width)||!tl(this.image.height))&&(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR),this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.image?(this.gl.texImage2D(this.target,0,this.internalFormat,this.format,this.type,this.image),this.generateMipmaps&&this.gl.generateMipmap(this.target)):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,$f))}destroy(){this.gl.deleteTexture(this.glTexture),this.glTexture=null,this.gl=null,this.image=null}}function nl(n,e,t){let r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS))return r;console.warn(`fragment-gl.Program: Shader Info Log: ${n.getShaderInfoLog(r)}`),n.deleteShader(r)}let ec=0,xs=`
    attribute vec4 position;
    attribute vec2 uv;

    varying vec2 vUv;

    void main(){
        vUv = uv;
        gl_Position = position;
    }
`,eo=`
    precision highp float;

    varying vec2 vUv;

    void main() {
        gl_FragColor = vec4(vec3(0., 1., 0.), 1.);
    }
`;class tc{constructor(e,{vertex:t=xs,fragment:r=eo,uniforms:i={}}={}){this.gl=e,this.vertexShader=t,this.fragmentShader=r,this.uniforms=i,this.needsUpdate=!0,this._program=e.createProgram(),this.id=ec++,this.compile()}set vertexShader(e){this.vertex=e,this._vertexShader=nl(this.gl,this.gl.VERTEX_SHADER,e),this.needsUpdate=!0}get vertexShader(){return this._vertexShader}set fragmentShader(e){this.fragment=e,this._fragmentShader=nl(this.gl,this.gl.FRAGMENT_SHADER,e),this.needsUpdate=!0}get fragmentShader(){return this._fragmentShader}compile(){const{gl:e,_program:t,uniforms:r}=this;if(!this.vertexShader||!this.fragmentShader)return;e.attachShader(t,this.vertexShader),e.attachShader(t,this.fragmentShader),e.linkProgram(t);let i=e.getProgramInfoLog(t),l=e.getShaderInfoLog(this.vertexShader),s=e.getShaderInfoLog(this.fragmentShader);e.getProgramParameter(t,e.LINK_STATUS)===!1?console.error(`Program: shader error
			${l}
			${s}
			`):i!==""&&console.warn(`fragment-gl.Program: Program Info Log: ${i}`),e.getProgramParameter(t,e.LINK_STATUS)||(console.warn(`fragment-gl.Program: Program Info Log: ${e.getProgramInfoLog(t)}`),e.deleteProgram(t));let o=Object.keys(r).reduce((c,d)=>(c[d]=e.getUniformLocation(t,d),c),{}),u=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),f={};for(let c=0;c<u;c++){let d=e.getActiveAttrib(t,c),m=e.getAttribLocation(t,d.name);f[d.name]=m}this.gl.detachShader(t,this._vertexShader),this.gl.detachShader(t,this._fragmentShader),this.attributesLocations=f,this.uniformsLocations=o,this.needsUpdate=!1}}class nc{constructor({canvas:e=document.createElement("canvas"),antialias:t=!1,alpha:r=!0,depth:i=!1,stencil:l=!1,premultipliedAlpha:s=!1,pixelRatio:a=window.devicePixelRatio,webgl:o=2}){let u,f={depth:i,stencil:l,antialias:t,alpha:r,premultipliedAlpha:s,preserveDrawingBuffer:!0};this.canvas=e,o===2&&(u=e.getContext("webgl2",f)),u||(u=e.getContext("webgl",f)||e.getContext("experimental-webgl",f)),this.gl=u,this.state={activeTextureUnit:0,textureUnits:[],flipY:!1,viewport:{width:0,height:0},pixelRatio:a,width:0,height:0},this.gl.state=this.state}render({geometry:e,program:t,primitiveType:r=this.gl.TRIANGLES,offset:i=0,count:l=3}){t.needsUpdate&&t.compile(),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(t._program);for(let a in t.attributesLocations){let o=t.attributesLocations[a],u=e.buffers[a];this.gl.enableVertexAttribArray(o),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u);const f=2,c=this.gl.FLOAT,d=!1,m=0,h=0;this.gl.vertexAttribPointer(o,f,c,d,m,h)}let s=-1;for(let a in t.uniforms){let o=t.uniformsLocations[a];if(o){let u=t.uniforms[a];u.type==="float"?this.gl.uniform1f(o,u.value):u.type==="vec2"?this.gl.uniform2f(o,u.value[0],u.value[1]):u.type==="vec3"?this.gl.uniform3f(o,u.value[0],u.value[1],u.value[2]):u.type==="vec4"?this.gl.uniform4f(o,u.value[0],u.value[1],u.value[2],u.value[3]):u.type==="sampler2D"&&u.value&&(s=s+1,u.value.update(s),this.gl.uniform1i(o,s))}}this.gl.drawArrays(r,i,l)}setPixelRatio(e=this.state.pixelRatio){this.state.pixelRatio!==e&&(this.state.pixelRatio=e,this.setSize())}setSize({width:e=this.state.width,height:t=this.state.height}={}){this.state.width=e,this.state.height=t,this.canvas.width=this.state.width*this.state.pixelRatio,this.canvas.height=this.state.height*this.state.pixelRatio,this.setViewport()}setViewport({width:e=this.state.width,height:t=this.state.height}={}){let r=Math.floor(e*this.state.pixelRatio),i=Math.floor(t*this.state.pixelRatio);(this.state.viewport.width!==r||this.state.viewport.height!==i)&&(this.gl.viewport(0,0,r,i),this.state.viewport.width=r,this.state.viewport.height=i)}destroy(){let e=this.gl.getExtension("WEBGL_lose_context");e&&e.loseContext()}}function rc({canvas:n=document.createElement("canvas"),shader:e=eo,uniforms:t={}}){let r=e,i=xs,l=t,s=new nc({canvas:n}),a=new Zf(s.gl),o=new tc(s.gl,{fragment:e,uniforms:t});function u(){s.render({geometry:a,program:o})}let f,c,d;function m({width:g=f,height:p=c,pixelRatio:v=d}){s.setPixelRatio(v),s.setSize({width:g,height:p}),f=g,c=p,d=v}function h(){a.destroy(),s.destroy(),t=null}const _={gl:s.gl,program:o,texture:(g={})=>new Mr(gl,g),resize:m,render:u,destroy:h};return Object.defineProperty(_,"shader",{enumerable:!0,configurable:!0,get:()=>r,set:g=>{r=g,o.fragmentShader=r}}),Object.defineProperty(_,"fragmentShader",{enumerable:!0,configurable:!0,get:()=>r,set:g=>{r=g,o.fragmentShader=r}}),Object.defineProperty(_,"vertexShader",{enumerable:!0,configurable:!0,get:()=>i,set:g=>{i=g,o.vertexShader=i}}),Object.defineProperty(_,"uniforms",{enumerable:!0,configurable:!0,get:()=>l,set:g=>{l=g,o.uniforms=l,o.needsUpdate=!0}}),_}let ic="Fade",lc={},sc=`
precision highp float;

uniform sampler2D uSampler0;
uniform sampler2D uSampler1;
uniform float threshold;

varying vec2 vUv;

void main() {
    gl_FragColor = mix(texture2D(uSampler0, vUv), texture2D(uSampler1, vUv), threshold);
}
`;const oc=Object.freeze(Object.defineProperty({__proto__:null,name:ic,props:lc,fragmentShader:sc},Symbol.toStringTag,{value:"Module"}));let ac="SplitX",uc={},fc=`
precision highp float;

uniform float threshold;
uniform sampler2D uSampler0;
uniform sampler2D uSampler1;

varying vec2 vUv;

void main() {
    gl_FragColor = mix(texture2D(uSampler0, vUv), texture2D(uSampler1, vUv), step(1. - vUv.x, threshold));
}
`;const cc=Object.freeze(Object.defineProperty({__proto__:null,name:ac,props:uc,fragmentShader:fc},Symbol.toStringTag,{value:"Module"}));let dc="SplitY",hc={},mc=`
precision highp float;

uniform float threshold;
uniform sampler2D uSampler0;
uniform sampler2D uSampler1;

varying vec2 vUv;

void main() {
    gl_FragColor = mix(texture2D(uSampler0, vUv), texture2D(uSampler1, vUv), step(1. - vUv.y, threshold));
}
`;const gc=Object.freeze(Object.defineProperty({__proto__:null,name:dc,props:hc,fragmentShader:mc},Symbol.toStringTag,{value:"Module"})),Br={"fade.js":oc,"splitX.js":cc,"splitY.js":gc},Fn=$e("multisampling",[],{persist:!1,reset:!0}),Cn=$e("threshold",0,{persist:!1,reset:!1}),Rn=$e("transition",!1,{persist:!1,reset:!1});function pc(n){let e,t,r;return{c(){e=F("div"),t=F("div"),r=F("canvas"),k(t,"class","canvas-container svelte-1i6qddt"),be(t,"max-width",n[1].width+"px"),k(e,"class","output-renderer svelte-1i6qddt")},m(i,l){L(i,e,l),O(e,t),O(t,r),n[7](r)},p(i,[l]){l&2&&be(t,"max-width",i[1].width+"px")},i:ae,o:ae,d(i){i&&M(e),n[7](null)}}}function _c(n,e,t){let r,i,l,s,a,o,u;ne(n,Ne,T=>t(1,l=T)),ne(n,Cn,T=>t(11,s=T)),ne(n,Ke,T=>t(12,a=T)),ne(n,Fn,T=>t(13,o=T)),ne(n,Rn,T=>t(6,u=T));let{paused:f=!1}=e,c,d,m,h={threshold:{value:0,type:"float"},uSampler0:{value:null,type:"sampler2D"},uSampler1:{value:null,type:"sampler2D"}},_=`
precision highp float;

uniform float threshold;
uniform sampler2D uSampler0;
uniform sampler2D uSampler1;

varying vec2 vUv;

void main() {
    vec4 mapTexel0 = texture2D(uSampler0, vUv);
    vec4 mapTexel1 = texture2D(uSampler1, vUv);

    vec3 color = mix(mapTexel0.rgb, mapTexel1.rgb, threshold);

    gl_FragColor = vec4(color, 1.);
}
`;Ft(()=>{t(3,m=rc({canvas:d,shader:i,uniforms:h})),h.uSampler0.value=new Mr(m.gl),h.uSampler1.value=new Mr(m.gl),g(),v(),p(),Ne.subscribe(()=>{v()})}),bt(()=>{cancelAnimationFrame(c),m.destroy(),t(3,m=null)});function g([T,I]=o){!m||(T>=0&&(h.uSampler0.value.image=a.find(H=>H.id===T).canvas),I>=0&&(h.uSampler1.value.image=a.find(H=>H.id===I).canvas))}Fn.subscribe(g);function p(){h.threshold.value=s,f||(h.uSampler0.value.needsUpdate=!0,h.uSampler1.value.needsUpdate=!0,m.render()),c=requestAnimationFrame(p)}function v(){if(!m)return;const{width:T,height:I,pixelRatio:H}=l;m.resize({width:T,height:I,pixelRatio:H})}function A(T){ke[T?"unshift":"push"](()=>{d=T,t(0,d)})}return n.$$set=T=>{"paused"in T&&t(2,f=T.paused)},n.$$.update=()=>{n.$$.dirty&64&&t(5,r=Br[u]),n.$$.dirty&32&&t(4,i=r?r.fragmentShader:_),n.$$.dirty&24&&m&&t(3,m.fragmentShader=i,m)},[d,l,f,m,i,r,u,A]}class bc extends fe{constructor(e){super(),ue(this,e,_c,pc,le,{paused:2})}}function rl(n,e,t){const r=n.slice();return r[5]=e[t],r}function il(n){let e,t=n[5].label+"",r,i,l;return{c(){e=F("option"),r=Re(t),e.__value=i=n[5].value,e.value=e.__value,e.selected=l=n[0]===n[5].value},m(s,a){L(s,e,a),O(e,r)},p(s,a){a&2&&t!==(t=s[5].label+"")&&Ge(r,t),a&2&&i!==(i=s[5].value)&&(e.__value=i,e.value=e.__value),a&3&&l!==(l=s[0]===s[5].value)&&(e.selected=l)},d(s){s&&M(e)}}}function ll(n){let e,t,r;return e=new us({props:{width:15,height:15}}),{c(){t=F("div"),z(e.$$.fragment),be(t,"display","contents"),be(t,"--color","rgba(255, 255, 255, 0.75)")},m(i,l){L(i,t,l),P(e,t,null),r=!0},i(i){r||(y(e.$$.fragment,i),r=!0)},o(i){E(e.$$.fragment,i),r=!1},d(i){i&&e&&M(t),D(e,i)}}}function wc(n){let e,t,r,i,l,s,a=n[1],o=[];for(let f=0;f<a.length;f+=1)o[f]=il(rl(n,a,f));let u=n[1].length>1&&ll();return{c(){e=F("div"),t=F("select");for(let f=0;f<o.length;f+=1)o[f].c();r=Z(),u&&u.c(),k(t,"class","select svelte-1nr0bpk"),t.disabled=n[2],q(t,"single",n[1].length===1),k(e,"class","module-header-select svelte-1nr0bpk")},m(f,c){L(f,e,c),O(e,t);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(t,null);O(e,r),u&&u.m(e,null),i=!0,l||(s=pe(t,"change",n[3]),l=!0)},p(f,[c]){if(c&3){a=f[1];let d;for(d=0;d<a.length;d+=1){const m=rl(f,a,d);o[d]?o[d].p(m,c):(o[d]=il(m),o[d].c(),o[d].m(t,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=a.length}(!i||c&4)&&(t.disabled=f[2]),(!i||c&2)&&q(t,"single",f[1].length===1),f[1].length>1?u?c&2&&y(u,1):(u=ll(),u.c(),y(u,1),u.m(e,null)):u&&(de(),E(u,1,1,()=>{u=null}),he())},i(f){i||(y(u),i=!0)},o(f){E(u),i=!1},d(f){f&&M(e),At(o,f),u&&u.d(),l=!1,s()}}}function vc(n,e,t){let{value:r}=e,{options:i=[]}=e,{disabled:l=!1}=e;const s=tt();function a(o){s("change",o.currentTarget.value)}return n.$$set=o=>{"value"in o&&t(0,r=o.value),"options"in o&&t(1,i=o.options),"disabled"in o&&t(2,l=o.disabled)},[r,i,l,a]}class yc extends fe{constructor(e){super(),ue(this,e,vc,wc,le,{value:0,options:1,disabled:2})}}function kc(n){let e,t,r,i;const l=n[2].default,s=De(l,n,n[1],null);return{c(){e=F("button"),s&&s.c(),k(e,"class","module-header-action__button svelte-1cx4r95"),k(e,"aria-label",n[0])},m(a,o){L(a,e,o),s&&s.m(e,null),t=!0,r||(i=pe(e,"click",n[3]),r=!0)},p(a,[o]){s&&s.p&&(!t||o&2)&&Fe(s,l,a,a[1],t?ze(l,a[1],o,null):Oe(a[1]),null),(!t||o&1)&&k(e,"aria-label",a[0])},i(a){t||(y(s,a),t=!0)},o(a){E(s,a),t=!1},d(a){a&&M(e),s&&s.d(a),r=!1,i()}}}function Ec(n,e,t){let{$$slots:r={},$$scope:i}=e,{label:l}=e;function s(a){Ye.call(this,n,a)}return n.$$set=a=>{"label"in a&&t(0,l=a.label),"$$scope"in a&&t(1,i=a.$$scope)},[l,i,r,s]}class Ac extends fe{constructor(e){super(),ue(this,e,Ec,kc,le,{label:0})}}const Sc=n=>({}),sl=n=>({}),Tc=n=>({}),ol=n=>({});function Cc(n){let e,t;return e=new Ac({props:{label:n[0],$$slots:{default:[Mc]},$$scope:{ctx:n}}}),e.$on("click",n[9]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&1&&(l.label=r[0]),i&1024&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Rc(n){let e,t;return e=new yc({props:{options:n[5],value:n[2],disabled:n[6]}}),e.$on("change",n[8]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&32&&(l.options=r[5]),i&4&&(l.value=r[2]),i&64&&(l.disabled=r[6]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Ic(n){let e,t;const r=n[7].default,i=De(r,n,n[10],null);return{c(){e=F("div"),i&&i.c(),k(e,"class","text svelte-1s7fghb")},m(l,s){L(l,e,s),i&&i.m(e,null),t=!0},p(l,s){i&&i.p&&(!t||s&1024)&&Fe(i,r,l,l[10],t?ze(r,l[10],s,null):Oe(l[10]),null)},i(l){t||(y(i,l),t=!0)},o(l){E(i,l),t=!1},d(l){l&&M(e),i&&i.d(l)}}}function Mc(n){let e,t;const r=n[7].text,i=De(r,n,n[10],ol),l=i||Ic(n),s=n[7].icon,a=De(s,n,n[10],sl);return{c(){l&&l.c(),e=Z(),a&&a.c()},m(o,u){l&&l.m(o,u),L(o,e,u),a&&a.m(o,u),t=!0},p(o,u){i?i.p&&(!t||u&1024)&&Fe(i,r,o,o[10],t?ze(r,o[10],u,Tc):Oe(o[10]),ol):l&&l.p&&(!t||u&1024)&&l.p(o,t?u:-1),a&&a.p&&(!t||u&1024)&&Fe(a,s,o,o[10],t?ze(s,o[10],u,Sc):Oe(o[10]),sl)},i(o){t||(y(l,o),y(a,o),t=!0)},o(o){E(l,o),E(a,o),t=!1},d(o){l&&l.d(o),o&&M(e),a&&a.d(o)}}}function Bc(n){let e,t,r,i;const l=[Rc,Cc],s=[];function a(o,u){return o[5].length>0?0:1}return t=a(n),r=s[t]=l[t](n),{c(){e=F("div"),r.c(),k(e,"class","module-header-action svelte-1s7fghb"),q(e,"permanent",n[1]),q(e,"border",n[3]),q(e,"no-margin",!n[4]),q(e,"disabled",n[6])},m(o,u){L(o,e,u),s[t].m(e,null),i=!0},p(o,[u]){let f=t;t=a(o),t===f?s[t].p(o,u):(de(),E(s[f],1,1,()=>{s[f]=null}),he(),r=s[t],r?r.p(o,u):(r=s[t]=l[t](o),r.c()),y(r,1),r.m(e,null)),(!i||u&2)&&q(e,"permanent",o[1]),(!i||u&8)&&q(e,"border",o[3]),(!i||u&16)&&q(e,"no-margin",!o[4]),(!i||u&64)&&q(e,"disabled",o[6])},i(o){i||(y(r),i=!0)},o(o){E(r),i=!1},d(o){o&&M(e),s[t].d()}}}function Lc(n,e,t){let r,{$$slots:i={},$$scope:l}=e,{label:s=""}=e,{permanent:a=!1}=e,{value:o=null}=e,{border:u=!1}=e,{margin:f=!0}=e,{options:c=[]}=e;function d(h){Ye.call(this,n,h)}function m(h){Ye.call(this,n,h)}return n.$$set=h=>{"label"in h&&t(0,s=h.label),"permanent"in h&&t(1,a=h.permanent),"value"in h&&t(2,o=h.value),"border"in h&&t(3,u=h.border),"margin"in h&&t(4,f=h.margin),"options"in h&&t(5,c=h.options),"$$scope"in h&&t(10,l=h.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&t(6,r=c.length===1)},[s,a,o,u,f,c,r,i,d,m,l]}class to extends fe{constructor(e){super(),ue(this,e,Lc,Bc,le,{label:0,permanent:1,value:2,border:3,margin:4,options:5})}}function Nc(n){let e,t;return e=new to({props:{value:n[0],permanent:!0,border:!0,options:n[1]}}),e.$on("change",n[6]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,[i]){const l={};i&1&&(l.value=r[0]),i&2&&(l.options=r[1]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Pc(n,e,t){let r,i,l,s;ne(n,si,f=>t(3,i=f)),ne(n,Dt,f=>t(4,l=f)),ne(n,zt,f=>t(5,s=f));let{monitorID:a}=e,{selected:o}=e;const u=f=>t(0,o=f.detail);return n.$$set=f=>{"monitorID"in f&&t(2,a=f.monitorID),"selected"in f&&t(0,o=f.selected)},n.$$.update=()=>{n.$$.dirty&48&&t(1,r=[...s.map(f=>({value:f,label:l[f]&&l[f].name?l[f].name:f}))]),n.$$.dirty&11&&(i>1&&!r.some(f=>f.value==="output")&&t(1,r=[...r,{value:"output",label:"output"}]),r.length>0&&o===void 0&&t(0,o=r[0].value)),n.$$.dirty&5&&Ke.update(f=>f.map(c=>(c.id===a&&(c.selected=o),c)))},[o,r,a,i,l,s,u]}class Dc extends fe{constructor(e){super(),ue(this,e,Pc,Nc,le,{monitorID:2,selected:0})}}function zc(n){let e,t;return e=new bc({}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Fc(n){let e,t;return e=new Qf({props:{key:n[2],id:n[4]}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&4&&(l.key=r[2]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Oc(n){let e,t,r,i;const l=[Fc,zc],s=[];function a(o,u){return o[2]&&o[2]!=="output"?0:o[2]?1:-1}return~(e=a(n))&&(t=s[e]=l[e](n)),{c(){t&&t.c(),r=Se()},m(o,u){~e&&s[e].m(o,u),L(o,r,u),i=!0},p(o,u){let f=e;e=a(o),e===f?~e&&s[e].p(o,u):(t&&(de(),E(s[f],1,1,()=>{s[f]=null}),he()),~e?(t=s[e],t?t.p(o,u):(t=s[e]=l[e](o),t.c()),y(t,1),t.m(r.parentNode,r)):t=null)},i(o){i||(y(t),i=!0)},o(o){E(t),i=!1},d(o){~e&&s[e].d(o),o&&M(r)}}}function Uc(n){let e,t;return e=new Dc({props:{monitorID:n[4],selected:n[2]}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&4&&(l.selected=r[2]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function jc(n){let e,t;return e=new Vn({props:{hasHeader:n[1],mID:n[0],slug:"monitor",name:n[3],scrollable:!1,$$slots:{"header-left":[Uc],default:[Oc]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,[i]){const l={};i&2&&(l.hasHeader=r[1]),i&1&&(l.mID=r[0]),i&8&&(l.name=r[3]),i&1028&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}let Hc=0,Gc="monitor";function Vc(n,e,t){let r,i,l,s,a;ne(n,Ke,m=>t(7,l=m)),ne(n,zt,m=>t(8,s=m)),ne(n,Dn,m=>t(9,a=m));let{mID:o}=e,{hasHeader:u=!0}=e,{sketchKey:f=null}=e,c=Hc++,d=f||a||s[Math.min(c,s.length-1)];return zt.subscribe(m=>{!d&&m.length>0&&we(Ke,l=l.map(h=>(h.id===c&&(h.selected=s[Math.min(c,s.length-1)]),h)),l)}),Ft(()=>{we(Ke,l=[...l,{id:c,selected:d}],l)}),Ke.subscribe(m=>{const h=m.find(_=>_.id===c);h&&h.selected!==d&&t(2,d=h.selected)}),bt(()=>{we(Ke,l=l.filter(m=>m.id!==c),l)}),n.$$set=m=>{"mID"in m&&t(0,o=m.mID),"hasHeader"in m&&t(1,u=m.hasHeader),"sketchKey"in m&&t(5,f=m.sketchKey)},n.$$.update=()=>{n.$$.dirty&128&&t(6,r=l.findIndex(m=>m.id===c)),n.$$.dirty&192&&t(3,i=`${Gc} ${l.length>1?r+1:""}`)},[o,u,d,i,c,f,r,l]}class pn extends fe{constructor(e){super(),ue(this,e,Vc,jc,le,{mID:0,hasHeader:1,sketchKey:5})}}const Wc=Object.freeze(Object.defineProperty({__proto__:null,default:pn},Symbol.toStringTag,{value:"Module"}));function qc(n){let e,t;const r=n[1].default,i=De(r,n,n[0],null);return{c(){e=F("div"),i&&i.c(),k(e,"class","row svelte-6abffh")},m(l,s){L(l,e,s),i&&i.m(e,null),t=!0},p(l,[s]){i&&i.p&&(!t||s&1)&&Fe(i,r,l,l[0],t?ze(r,l[0],s,null):Oe(l[0]),null)},i(l){t||(y(i,l),t=!0)},o(l){E(i,l),t=!1},d(l){l&&M(e),i&&i.d(l)}}}function Kc(n,e,t){let{$$slots:r={},$$scope:i}=e;return n.$$set=l=>{"$$scope"in l&&t(0,i=l.$$scope)},[i,r]}class er extends fe{constructor(e){super(),ue(this,e,Kc,qc,le,{})}}function al(n){let e,t;return{c(){e=F("span"),t=Re(n[1]),k(e,"class","label svelte-1puxpq4")},m(r,i){L(r,e,i),O(e,t)},p(r,i){i&2&&Ge(t,r[1])},d(r){r&&M(e)}}}function Yc(n){let e,t,r,i,l,s=n[1]&&al(n);return{c(){e=F("div"),s&&s.c(),t=Z(),r=F("input"),k(r,"class","input svelte-1puxpq4"),r.disabled=n[2],k(r,"autocomplete","off"),k(r,"spellcheck","false"),k(e,"class","input-container svelte-1puxpq4"),q(e,"disabled",n[2])},m(a,o){L(a,e,o),s&&s.m(e,null),O(e,t),O(e,r),n[12](r),Bn(r,n[0]),i||(l=[pe(r,"input",n[13]),pe(r,"change",n[6]),pe(r,"input",n[5]),pe(r,"keypress",n[4]),pe(r,"keydown",n[9]),pe(r,"focus",n[10]),pe(r,"blur",n[11])],i=!0)},p(a,[o]){a[1]?s?s.p(a,o):(s=al(a),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o&4&&(r.disabled=a[2]),o&1&&r.value!==a[0]&&Bn(r,a[0]),o&4&&q(e,"disabled",a[2])},i:ae,o:ae,d(a){a&&M(e),s&&s.d(),n[12](null),i=!1,Ve(l)}}}function Xc(n,e,t){let{label:r=null}=e,{value:i}=e,{disabled:l=!1}=e,{context:s=null}=e,{key:a=""}=e,o;const u=tt();function f(v){v.key==="Enter"&&o.blur()}function c(v){u("input",v.currentTarget.value)}function d(v){u("change",v.currentTarget.value)}function m(v){Ye.call(this,n,v)}function h(v){Ye.call(this,n,v)}function _(v){Ye.call(this,n,v)}function g(v){ke[v?"unshift":"push"](()=>{o=v,t(3,o)})}function p(){i=this.value,t(0,i)}return n.$$set=v=>{"label"in v&&t(1,r=v.label),"value"in v&&t(0,i=v.value),"disabled"in v&&t(2,l=v.disabled),"context"in v&&t(7,s=v.context),"key"in v&&t(8,a=v.key)},[i,r,l,o,f,c,d,s,a,m,h,_,g,p]}class fi extends fe{constructor(e){super(),ue(this,e,Xc,Yc,le,{label:1,value:0,disabled:2,context:7,key:8})}}function Jc(n){let e,t,r,i,l;return{c(){e=F("div"),t=F("div"),k(t,"class","fill svelte-tr26ua"),be(t,"opacity",n[2]>0?1:0),be(t,"transform","scaleX("+n[2]+")"),k(e,"class",r="progress "+(n[1]?"dragging":"")+" svelte-tr26ua")},m(s,a){L(s,e,a),O(e,t),n[10](e),i||(l=pe(e,"mousedown",n[3]),i=!0)},p(s,[a]){a&4&&be(t,"opacity",s[2]>0?1:0),a&4&&be(t,"transform","scaleX("+s[2]+")"),a&2&&r!==(r="progress "+(s[1]?"dragging":"")+" svelte-tr26ua")&&k(e,"class",r)},i:ae,o:ae,d(s){s&&M(e),n[10](null),i=!1,l()}}}function Qc(n,e,t){let r,{value:i}=e,{min:l}=e,{max:s}=e,{step:a}=e,{context:o=null}=e,{key:u=""}=e,f,c;const d=tt();let m=!1;function h(A){document.addEventListener("mousemove",_),document.addEventListener("mouseup",p),c=f.getBoundingClientRect(),t(1,m=!0),g(A)}function _(A){g(A)}function g(A){let T=hn(lt(A.clientX,c.left,c.right,l,s),l,s);T=Math.floor(T*(1/a))/(1/a),T!==i&&d("change",T)}function p(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",p),t(1,m=!1)}function v(A){ke[A?"unshift":"push"](()=>{f=A,t(0,f)})}return n.$$set=A=>{"value"in A&&t(4,i=A.value),"min"in A&&t(5,l=A.min),"max"in A&&t(6,s=A.max),"step"in A&&t(7,a=A.step),"context"in A&&t(8,o=A.context),"key"in A&&t(9,u=A.key)},n.$$.update=()=>{n.$$.dirty&112&&t(2,r=hn(lt(i,l,s,0,1),0,1))},[f,m,r,h,i,l,s,a,o,u,v]}class Zc extends fe{constructor(e){super(),ue(this,e,Qc,Jc,le,{value:4,min:5,max:6,step:7,context:8,key:9})}}function $c(n){let e,t,r;function i(s){n[18](s)}let l={label:n[0],disabled:n[4],context:n[5],key:n[6]};return n[9]!==void 0&&(l.value=n[9]),e=new fi({props:l}),ke.push(()=>et(e,"value",i)),e.$on("keydown",n[12]),e.$on("focus",n[10]),e.$on("blur",n[11]),{c(){z(e.$$.fragment)},m(s,a){P(e,s,a),r=!0},p(s,a){const o={};a&1&&(o.label=s[0]),a&16&&(o.disabled=s[4]),a&32&&(o.context=s[5]),a&64&&(o.key=s[6]),!t&&a&512&&(t=!0,o.value=s[9],xe(()=>t=!1)),e.$set(o)},i(s){r||(y(e.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),r=!1},d(s){D(e,s)}}}function xc(n){let e,t,r;return e=new er({props:{$$slots:{default:[ed]},$$scope:{ctx:n}}}),{c(){t=F("div"),z(e.$$.fragment),be(t,"display","contents"),be(t,"--grid-template-columns","1fr 0.5fr")},m(i,l){L(i,t,l),P(e,t,null),r=!0},p(i,l){const s={};l&2097919&&(s.$$scope={dirty:l,ctx:i}),e.$set(s)},i(i){r||(y(e.$$.fragment,i),r=!0)},o(i){E(e.$$.fragment,i),r=!1},d(i){i&&e&&M(t),D(e,i)}}}function ed(n){let e,t,r,i,l;e=new Zc({props:{step:n[1],value:n[7],min:n[2],max:n[3],context:n[5],key:n[6]}}),e.$on("change",n[13]);function s(o){n[17](o)}let a={label:n[0],disabled:n[4],context:n[5],key:n[6]};return n[9]!==void 0&&(a.value=n[9]),r=new fi({props:a}),ke.push(()=>et(r,"value",s)),r.$on("keydown",n[12]),r.$on("focus",n[10]),r.$on("blur",n[11]),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment)},m(o,u){P(e,o,u),L(o,t,u),P(r,o,u),l=!0},p(o,u){const f={};u&2&&(f.step=o[1]),u&128&&(f.value=o[7]),u&4&&(f.min=o[2]),u&8&&(f.max=o[3]),u&32&&(f.context=o[5]),u&64&&(f.key=o[6]),e.$set(f);const c={};u&1&&(c.label=o[0]),u&16&&(c.disabled=o[4]),u&32&&(c.context=o[5]),u&64&&(c.key=o[6]),!i&&u&512&&(i=!0,c.value=o[9],xe(()=>i=!1)),r.$set(c)},i(o){l||(y(e.$$.fragment,o),y(r.$$.fragment,o),l=!0)},o(o){E(e.$$.fragment,o),E(r.$$.fragment,o),l=!1},d(o){D(e,o),o&&M(t),D(r,o)}}}function td(n){let e,t,r,i,l;const s=[xc,$c],a=[];function o(u,f){return u[8]?0:1}return t=o(n),r=a[t]=s[t](n),{c(){e=F("div"),r.c(),k(e,"class",i="number-input "+(n[8]?"number-input--with-progress":"")+" svelte-1p5dkl8")},m(u,f){L(u,e,f),a[t].m(e,null),l=!0},p(u,[f]){let c=t;t=o(u),t===c?a[t].p(u,f):(de(),E(a[c],1,1,()=>{a[c]=null}),he(),r=a[t],r?r.p(u,f):(r=a[t]=s[t](u),r.c()),y(r,1),r.m(e,null)),(!l||f&256&&i!==(i="number-input "+(u[8]?"number-input--with-progress":"")+" svelte-1p5dkl8"))&&k(e,"class",i)},i(u){l||(y(r),l=!0)},o(u){E(r),l=!1},d(u){u&&M(e),a[t].d()}}}function nd(n,e){return Math.round(n*(1/e))/(1/e)}function ul(n,e){return Number(e&&e!==""?n.split(e)[0]:n)}function rd(n,e,t){let r,i,l,s,{value:a=null}=e,{label:o=""}=e,{step:u=1}=e,{suffix:f=""}=e,{min:c=-1/0}=e,{max:d=1/0}=e,{disabled:m=!1}=e,{context:h=null}=e,{key:_=""}=e;const g=tt();function p(N,K,x=""){const ie=hn(N,isFinite(c)?c:-1/0,isFinite(d)?d:1/0),B=typeof u=="number"?nd(ie,u):N;return K?`${B}`:`${B}${x}`}function v(){t(16,r=!0)}function A(N){t(16,r=!1);let K=N.currentTarget.value;isNaN(Number(N.currentTarget.value))&&(K=`${a}`),t(7,i=ul(K,f)),g("change",i)}function T(N){if([38,40].includes(N.keyCode)){N.preventDefault();const K=ys.getStepFromEvent(N)*u,x=N.keyCode===38?1:-1,ie=ul(l,f)+x*K;t(7,i=ie),g("change",i)}}function I(N){t(7,i=N.detail),g("change",N.detail)}function H(N){l=N,t(9,l),t(7,i),t(16,r),t(15,f),t(14,a)}function C(N){l=N,t(9,l),t(7,i),t(16,r),t(15,f),t(14,a)}return n.$$set=N=>{"value"in N&&t(14,a=N.value),"label"in N&&t(0,o=N.label),"step"in N&&t(1,u=N.step),"suffix"in N&&t(15,f=N.suffix),"min"in N&&t(2,c=N.min),"max"in N&&t(3,d=N.max),"disabled"in N&&t(4,m=N.disabled),"context"in N&&t(5,h=N.context),"key"in N&&t(6,_=N.key)},n.$$.update=()=>{n.$$.dirty&16384&&t(7,i=a),n.$$.dirty&98432&&t(9,l=p(i,r,f)),n.$$.dirty&12&&t(8,s=isFinite(c)&&isFinite(d))},t(16,r=!1),[o,u,c,d,m,h,_,i,s,l,v,A,T,I,a,f,r,H,C]}class no extends fe{constructor(e){super(),ue(this,e,rd,td,le,{value:14,label:0,step:1,suffix:15,min:2,max:3,disabled:4,context:5,key:6})}}function id(n){let e,t,r,i,l,s;return{c(){e=F("div"),t=F("input"),r=Z(),i=F("div"),k(t,"class","input svelte-ti7bo6"),k(t,"type","checkbox"),k(i,"class","checked svelte-ti7bo6"),k(e,"class","checkbox svelte-ti7bo6")},m(a,o){L(a,e,o),O(e,t),t.checked=n[0],O(e,r),O(e,i),l||(s=[pe(t,"change",n[4]),pe(t,"change",n[1])],l=!0)},p(a,[o]){o&1&&(t.checked=a[0])},i:ae,o:ae,d(a){a&&M(e),l=!1,Ve(s)}}}function ld(n,e,t){let{value:r}=e,{context:i=null}=e,{key:l=""}=e;const s=tt();function a(){s("change",r)}function o(){r=this.checked,t(0,r)}return n.$$set=u=>{"value"in u&&t(0,r=u.value),"context"in u&&t(2,i=u.context),"key"in u&&t(3,l=u.key)},[r,a,i,l,o]}class sd extends fe{constructor(e){super(),ue(this,e,ld,id,le,{value:0,context:2,key:3})}}function fl(n,e,t){const r=n.slice();return r[17]=e[t],r[19]=t,r}function cl(n){let e,t;function r(...i){return n[14](n[19],...i)}return e=new no({props:{min:n[1],max:n[2],step:n[3],suffix:n[0],disabled:n[5],context:n[6],key:n[7],label:n[9][n[19]],value:n[17]}}),e.$on("change",r),{c(){z(e.$$.fragment)},m(i,l){P(e,i,l),t=!0},p(i,l){n=i;const s={};l&2&&(s.min=n[1]),l&4&&(s.max=n[2]),l&8&&(s.step=n[3]),l&1&&(s.suffix=n[0]),l&32&&(s.disabled=n[5]),l&64&&(s.context=n[6]),l&128&&(s.key=n[7]),l&512&&(s.label=n[9][n[19]]),l&256&&(s.value=n[17]),e.$set(s)},i(i){t||(y(e.$$.fragment,i),t=!0)},o(i){E(e.$$.fragment,i),t=!1},d(i){D(e,i)}}}function od(n){let e,t,r=n[8],i=[];for(let s=0;s<r.length;s+=1)i[s]=cl(fl(n,r,s));const l=s=>E(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Se()},m(s,a){for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(s,a);L(s,e,a),t=!0},p(s,a){if(a&2031){r=s[8];let o;for(o=0;o<r.length;o+=1){const u=fl(s,r,o);i[o]?(i[o].p(u,a),y(i[o],1)):(i[o]=cl(u),i[o].c(),y(i[o],1),i[o].m(e.parentNode,e))}for(de(),o=r.length;o<i.length;o+=1)l(o);he()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)y(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)E(i[a]);t=!1},d(s){At(i,s),s&&M(e)}}}function ad(n){let e,t,r,i,l,s;return t=new er({props:{$$slots:{default:[od]},$$scope:{ctx:n}}}),{c(){e=F("div"),r=F("div"),z(t.$$.fragment),be(r,"display","contents"),be(r,"--grid-template-columns",i=n[8].map(dl).join(" ")),k(e,"class",l="vector-container vec"+n[8].length+" svelte-1hheeax"),q(e,"locked",n[4])},m(a,o){L(a,e,o),O(e,r),P(t,r,null),s=!0},p(a,[o]){o&256&&i!==(i=a[8].map(dl).join(" "))&&be(r,"--grid-template-columns",i);const u={};o&1049583&&(u.$$scope={dirty:o,ctx:a}),t.$set(u),(!s||o&256&&l!==(l="vector-container vec"+a[8].length+" svelte-1hheeax"))&&k(e,"class",l),(!s||o&272)&&q(e,"locked",a[4])},i(a){s||(y(t.$$.fragment,a),s=!0)},o(a){E(t.$$.fragment,a),s=!1},d(a){a&&M(e),D(t)}}}const dl=()=>"1fr";function ud(n,e,t){let r,i,l,s,{value:a}=e,{suffix:o=""}=e,{min:u=-1/0}=e,{max:f=1/0}=e,{step:c=.1}=e,{locked:d=!1}=e,{disabled:m=!1}=e,{context:h=null}=e,{key:_=""}=e;const g=tt();function p(){let T=!1;for(let I=0;I<l.length;I++){const H=r?I:s[I];a[H]!==l[I]&&(t(11,a[H]=l[I],a),T=!0)}T&&g("change",a)}function v(T,I){let H=T/l[I];isFinite(H)||(H=1),t(8,l=l.map((C,N)=>N===I?T:d?Math.round(C*H*(1/c))/(1/c):C)),p()}const A=(T,I)=>v(I.detail,T);return n.$$set=T=>{"value"in T&&t(11,a=T.value),"suffix"in T&&t(0,o=T.suffix),"min"in T&&t(1,u=T.min),"max"in T&&t(2,f=T.max),"step"in T&&t(3,c=T.step),"locked"in T&&t(4,d=T.locked),"disabled"in T&&t(5,m=T.disabled),"context"in T&&t(6,h=T.context),"key"in T&&t(7,_=T.key)},n.$$.update=()=>{n.$$.dirty&2048&&t(12,r=Array.isArray(a)),n.$$.dirty&6144&&t(13,i=!r&&typeof a=="object"),n.$$.dirty&10240&&t(8,l=i?Object.values(a):a),n.$$.dirty&10240&&t(9,s=i?Object.keys(a):a.map(()=>{}))},[o,u,f,c,d,m,h,_,l,s,v,a,r,i,A]}class fd extends fe{constructor(e){super(),ue(this,e,ud,ad,le,{value:11,suffix:0,min:1,max:2,step:3,locked:4,disabled:5,context:6,key:7})}}function cd(n){let e,t,r,i;function l(a){n[5](a)}let s={context:n[3],key:n[4],label:n[1],disabled:n[2]};return n[0]!==void 0&&(s.value=n[0]),t=new fi({props:s}),ke.push(()=>et(t,"value",l)),t.$on("change",n[6]),t.$on("input",n[7]),{c(){e=F("div"),z(t.$$.fragment),k(e,"class","text-input svelte-v2ywfa")},m(a,o){L(a,e,o),P(t,e,null),i=!0},p(a,[o]){const u={};o&8&&(u.context=a[3]),o&16&&(u.key=a[4]),o&2&&(u.label=a[1]),o&4&&(u.disabled=a[2]),!r&&o&1&&(r=!0,u.value=a[0],xe(()=>r=!1)),t.$set(u)},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){E(t.$$.fragment,a),i=!1},d(a){a&&M(e),D(t)}}}function dd(n,e,t){let{value:r}=e,{label:i=""}=e,{disabled:l=!1}=e,{context:s=null}=e,{key:a=""}=e;function o(c){r=c,t(0,r)}function u(c){Ye.call(this,n,c)}function f(c){Ye.call(this,n,c)}return n.$$set=c=>{"value"in c&&t(0,r=c.value),"label"in c&&t(1,i=c.label),"disabled"in c&&t(2,l=c.disabled),"context"in c&&t(3,s=c.context),"key"in c&&t(4,a=c.key)},[r,i,l,s,a,o,u,f]}class _n extends fe{constructor(e){super(),ue(this,e,dd,cd,le,{value:0,label:1,disabled:2,context:3,key:4})}}const X={HEX_STRING:"hex-string",RGB_STRING:"rgb-string",RGBA_STRING:"rgba-string",HSL_STRING:"hsl-string",HSLA_STRING:"hsla-string",RGB_OBJECT:"rgb-object",RGBA_OBJECT:"rgba-object",VEC3_STRING:"vec3-string",VEC4_STRING:"vec4-string",VEC3_ARRAY:"vec3-array",VEC4_ARRAY:"vec4-array",THREE:"three",CSS_COLOR:"css-color"};function hl(n,e=tr(n)){if(e||console.error("toHex :: cannot parse color for",n),e===X.THREE)return _o(n);if(e===X.HEX_STRING)return n;if(e===X.HSL_STRING||e===X.HSLA_STRING)return _d(n);if(e===X.RGB_STRING||e===X.RGBA_STRING)return md(n);if(e===X.RGB_OBJECT||e===X.RGBA_OBJECT)return tn([n.r,n.g,n.b,n.a]);if(e===X.VEC3_STRING||e===X.VEC4_STRING)return gd(n);if(e===X.VEC3_ARRAY||e===X.VEC4_ARRAY)return pd(n);if(e===X.CSS_COLOR)return hd(n)}function ci(n,e=tr(n)){if(e||console.error("toComponents :: cannot parse color for",n),e===X.THREE)return[n.r,n.g,n.b,1];if(e===X.HEX_STRING)return In(n);if(e===X.HSL_STRING||e===X.HSLA_STRING)return lo(n);if(e===X.RGB_STRING||e===X.RGBA_STRING)return hi(n);if(e===X.RGB_OBJECT||e===X.RGBA_OBJECT)return[n.r,n.g,n.b,isFinite(n.a)?n.a:1];if(e===X.VEC3_STRING||e===X.VEC4_STRING)return ro(n);if(e===X.CSS_COLOR)return di(n)}function kr(n,e=tr(n)){if(e||console.error("toString :: cannot parse color for",n),e===X.HEX_STRING||e===X.RGB_STRING||e===X.RGBA_STRING||e===X.HSL_STRING||e===X.HSLA_STRING||e===X.VEC3_STRING||e===X.VEC4_STRING||e===X.CSS_COLOR)return n;if(e===X.VEC3_ARRAY)return Nr(Lr(n));if(e===X.VEC4_ARRAY)return On(Lr(n));if(e===X.THREE)return _o(n);if(e===X.RGB_OBJECT)return Nr([n.r,n.g,n.b]);if(e===X.RGBA_OBJECT)return On([n.r,n.g,n.b,n.a?n.a:1])}function di(n,e="temp"){if(n.toLowerCase()==="transparent")return[0,0,0,0];let t=document.createElement(e);document.body.appendChild(t);const r=()=>t.parentNode.removeChild(t);let i="rgb(1, 2, 3)";if(t.style.color=i,t.style.color!==i){r();return}if(t.style.color=n,t.style.color===i||t.style.color===""){r();return}let l=getComputedStyle(t).color;return r(),hi(l)}function hd(n){return tn(di(n))}function hi(n){const e=n.match(/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3})\)?(?:, ?(\d*(?:\.?\d*?))\))?/);return e?[parseInt(e[1])/255,parseInt(e[2])/255,parseInt(e[3])/255,e[4]?Number(e[4]):1]:[]}function md(n){return tn(hi(n))}function ro(n){const e=n.match(/vec[3-4]?\((\d*(?:\.\d*?)), ?(\d*(?:\.\d*?)), ?(\d*(?:\.\d*))?(?:, ?(\d*(?:\.?\d*?))\))?/);return e?[Math.min(1,Math.max(Number(e[1]),0)),Math.min(1,Math.max(Number(e[2]),0)),Math.min(1,Math.max(Number(e[3]),0)),e[4]?Math.min(1,Math.max(Number(e[4]),0)):1]:(console.error("color.vecStringToComponents :: cannot parse color",n),[])}function Lr(n){if(n.every(e=>isFinite(e))){const[e,t,r,i=1]=n;return[e,t,r,i]}return console.error("color.vecArrayToComponents :: cannot parse color",n),[]}function gd(n){return tn(ro(n))}function pd(n){return tn(Lr(n))}function io(n){const e=n.match(/hsla?\((\d{1,3}),?[\s]?(\d{1,3})\%,?[\s]?(\d{1,3})\%\)?(?:,?[\s]?(\d*(?:\.?\d*?))\))?/);if(e){const t=Math.min(360,Math.max(Number(e[1]),0)),r=Math.min(100,Math.max(Number(e[2]),0)),i=Math.min(100,Math.max(Number(e[3]),0)),l=e[4]?Math.min(1,Math.max(Number(e[4]),0)):1;return[t,r,i,l]}return console.error("color.hslToHSLComponents :: cannot parse color",n),[]}function lo(n){let[e,t,r,i=1]=io(n);e=e%360,e<0&&(e+=360),t/=100,r/=100;function l(s){let a=(s+e/30)%12,o=t*Math.min(r,1-r);return r-o*Math.max(-1,Math.min(a-3,9-a,1))}return[l(0),l(8),l(4),i]}function _d(n){return tn(lo(n))}function In(n){if(n.length<7){const e=n[1],t=n[2],r=n[3];if(n.length>4){const i=n[4];n=`#${e}${e}${t}${t}${r}${r}${i}${i}`}else n=`#${e}${e}${t}${t}${r}${r}`}return[parseInt(n.substr(1,2),16)/255,parseInt(n.substr(3,2),16)/255,parseInt(n.substr(5,2),16)/255,n.length>7?parseInt(n.substr(7,2),16)/255:1]}function bd(n=[]){const[e=0,t=0,r=0]=n;let i=`${Math.round(e*1e3)/1e3}`,l=`${Math.round(t*1e3)/1e3}`,s=`${Math.round(r*1e3)/1e3}`;return(e===1||e===0)&&(i=`${e}.0`),(t===1||t===0)&&(l=`${t}.0`),(r===1||r===0)&&(s=`${r}.0`),`vec3(${i}, ${l}, ${s})`}function ml(n=[]){const[e=0,t=0,r=0,i=1]=n;let l=`${Math.round(e*1e3)/1e3}`,s=`${Math.round(t*1e3)/1e3}`,a=`${Math.round(r*1e3)/1e3}`,o=`${i}`;return(e===1||e===0)&&(l=`${e}.0`),(t===1||t===0)&&(s=`${t}.0`),(r===1||r===0)&&(a=`${r}.0`),(i===1||i===0)&&(o=`${o}.0`),`vec4(${l}, ${s}, ${a}, ${o})`}function wd(n){const[e,t,r]=ci(n);return Nr([e,t,r])}function vd(n){return On(ci(n))}function Nr(n){const[e,t,r]=n;return`rgb(${Math.round(e*255)}, ${Math.round(t*255)}, ${Math.round(r*255)})`}function On(n=[]){const[e=0,t=0,r=0,i=1]=n;return`rgba(${Math.round(e*255)}, ${Math.round(t*255)}, ${Math.round(r*255)}, ${i})`}function so(n=[]){let[e,t,r]=n,i=Math.max(...n),l=Math.min(...n),[s,a,o]=[NaN,0,(l+i)/2],u=i-l;if(u!==0){switch(a=o===0||o===1?0:(i-o)/Math.min(o,1-o),i){case e:s=(t-r)/u+(t<r?6:0);break;case t:s=(r-e)/u+2;break;case r:s=(e-t)/u+4}s=s*60}return(a===0||o===0)&&(s=0),[s,a*100,o*100]}function yd(n){const[e=0,t=0,r=0]=n;return`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(r)}%)`}function oo(n){const[e=0,t=0,r=0,i=1]=n;return`hsla(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(r)}%, ${i})`}function kd(n=[]){const[e=0,t=0,r=0,i=1]=n;return yd(so([e,t,r]))}function Ed(n=[]){const[e=0,t=0,r=0,i=1]=n,[l,s,a]=so([e,t,r]);return oo([l,s,a,i])}function tn(n=[]){const[e=0,t=0,r=0]=n;return`#${[e,t,r].map(l=>Math.round(l*255)).map(l=>l.toString(16).padStart(2,"0")).join("")}`}function ao(n,e=typeof n=="string"){return e&&/^#([a-f0-9]{3,4}){1,2}$/i.test(n)}function Ad(n,e=typeof n=="string"){return e&&/rgba\((\d{1,3}),[\s]*(\d{1,3}),[\s]*(\d{1,3})\)?(?:,[\s]*(\d*(?:\.?\d*?))\))?/.test(n)}function uo(n,e=typeof n=="string"){return e&&/rgb\((\d{1,3}),[\s]*(\d{1,3}),[\s]*(\d{1,3})\)/.test(n)}function Sd(n,e=typeof n=="string"){return e&&n.includes("hsla")}function fo(n,e=typeof n=="string"){return e&&n.includes("hsl")}function co(n,e=typeof n=="string"){return e&&n.includes("vec3(")}function ho(n,e=typeof n=="string"){return e&&n.includes("vec4(")}function mo(n){if(typeof n=="object"){const e=Object.keys(n);return e.length===4&&e.includes("r")&&e.includes("g")&&e.includes("b")&&e.includes("a")}return!1}function go(n){if(typeof n=="object"){const e=Object.keys(n);return e.length===3&&e.includes("r")&&e.includes("g")&&e.includes("b")}return!1}function Td(n){return Array.isArray(n)?n.length==3&&n.every(e=>e>=0&&e<=1):!1}function Cd(n){return Array.isArray(n)?n.length==4&&n.every(e=>e>=0&&e<=1):!1}function po(n,e=typeof n=="string"){const t=e&&di(n);return t&&t.length>0}function mi(n){return n&&n.isColor}function _o(n){return mi(n)||console.error("color.threeToHex() : value is not an instance of THREE.Color"),`#${n.getHexString()}`}function bo(n){let e=typeof n=="string";return!!(mi(n)||ao(n,e)||uo(n,e)||co(n,e)||ho(n,e)||fo(n,e)||mo(n)||go(n)||po(n))}function tr(n){if(mi(n))return X.THREE;if(ao(n))return X.HEX_STRING;if(Ad(n))return X.RGBA_STRING;if(uo(n))return X.RGB_STRING;if(go(n))return X.RGB_OBJECT;if(mo(n))return X.RGBA_OBJECT;if(co(n))return X.VEC3_STRING;if(ho(n))return X.VEC4_STRING;if(Td(n))return X.VEC3_ARRAY;if(Cd(n))return X.VEC4_ARRAY;if(Sd(n))return X.HSLA_STRING;if(fo(n))return X.HSL_STRING;if(po(n))return X.CSS_COLOR}function pl(n){let e,t,r,i,l,s,a;return{c(){e=Pe("svg"),t=Pe("pattern"),r=Pe("rect"),i=Pe("rect"),l=Pe("rect"),s=Pe("rect"),a=Pe("rect"),k(r,"fill","white"),k(r,"x","0"),k(r,"width","3.6"),k(r,"height","3.6"),k(r,"y","0"),k(i,"fill","grey"),k(i,"x","3.6"),k(i,"width","3.6"),k(i,"height","3.6"),k(i,"y","0"),k(l,"fill","white"),k(l,"x","3.6"),k(l,"width","3.6"),k(l,"height","3.6"),k(l,"y","3.6"),k(s,"fill","grey"),k(s,"x","0"),k(s,"width","3.6"),k(s,"height","3.6"),k(s,"y","3.6"),k(t,"id","checker"),k(t,"x","0"),k(t,"y","0"),k(t,"width","7.2"),k(t,"height","7.2"),k(t,"patternUnits","userSpaceOnUse"),k(a,"x","0"),k(a,"y","0"),k(a,"width","100%"),k(a,"height","100%"),k(a,"fill","url(#checker)"),k(e,"width","calc(100% - 2px)"),k(e,"height","calc(100% - 2px)"),k(e,"class","alpha-svg svelte-12sllg5")},m(o,u){L(o,e,u),O(e,t),O(t,r),O(t,i),O(t,l),O(t,s),O(e,a)},d(o){o&&M(e)}}}function _l(n){let e,t;return e=new He({props:{key:`${n[1]}.alpha`,value:n[5],params:{label:"alpha",min:0,max:1,step:.01},context:n[0]}}),e.$on("change",n[8]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&2&&(l.key=`${r[1]}.alpha`),i&32&&(l.value=r[5]),i&1&&(l.context=r[0]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Rd(n){let e,t,r,i,l,s,a,o,u,f,c,d,m=n[2]&&pl();function h(p){n[13](p)}let _={context:n[0],key:n[1]};n[4]!==void 0&&(_.value=n[4]),a=new _n({props:_}),ke.push(()=>et(a,"value",h)),a.$on("change",n[7]);let g=n[2]&&_l(n);return{c(){e=F("div"),t=F("div"),r=F("div"),m&&m.c(),i=Z(),l=F("input"),s=Z(),z(a.$$.fragment),u=Z(),g&&g.c(),k(l,"class","input svelte-12sllg5"),k(l,"type","color"),k(r,"class","mirror svelte-12sllg5"),be(r,"--currentColor",n[3]),be(r,"--opacity",n[5]),k(t,"class","layout svelte-12sllg5"),k(e,"class","color-input svelte-12sllg5")},m(p,v){L(p,e,v),O(e,t),O(t,r),m&&m.m(r,null),O(r,i),O(r,l),Bn(l,n[3]),O(t,s),P(a,t,null),O(e,u),g&&g.m(e,null),f=!0,c||(d=[pe(l,"input",n[12]),pe(l,"blur",n[6]),pe(l,"input",n[9])],c=!0)},p(p,[v]){p[2]?m||(m=pl(),m.c(),m.m(r,i)):m&&(m.d(1),m=null),v&8&&Bn(l,p[3]),(!f||v&8)&&be(r,"--currentColor",p[3]),(!f||v&32)&&be(r,"--opacity",p[5]);const A={};v&1&&(A.context=p[0]),v&2&&(A.key=p[1]),!o&&v&16&&(o=!0,A.value=p[4],xe(()=>o=!1)),a.$set(A),p[2]?g?(g.p(p,v),v&4&&y(g,1)):(g=_l(p),g.c(),y(g,1),g.m(e,null)):g&&(de(),E(g,1,1,()=>{g=null}),he())},i(p){f||(y(a.$$.fragment,p),y(g),f=!0)},o(p){E(a.$$.fragment,p),E(g),f=!1},d(p){p&&M(e),m&&m.d(),D(a),g&&g.d(),c=!1,Ve(d)}}}function Id(n,e,t){let r,i,l,s,a,{value:o}=e,{context:u=null}=e,{key:f=""}=e;const c=tt();function d(){const[A,T,I]=In(i);switch(r){case X.VEC3_ARRAY:t(10,o[0]=A,o),t(10,o[1]=T,o),t(10,o[2]=I,o),c("change",o);break;case X.VEC4_ARRAY:t(10,o[0]=A,o),t(10,o[1]=T,o),t(10,o[2]=I,o),t(10,o[3]=s,o),c("change",o);break;case X.THREE:case X.RGB_OBJECT:t(10,o.r=A,o),t(10,o.g=T,o),t(10,o.b=I,o),c("change",o);break;case X.RGBA_OBJECT:t(10,o.r=A,o),t(10,o.g=T,o),t(10,o.b=I,o),t(10,o.a=s,o),c("change",o);break;default:c("change",l)}}function m(){d()}function h(A){const T=A.detail;bo(T)?t(4,l=T):t(4,l=kr(o,r)),t(3,i=hl(l)),d()}function _(A){t(5,s=A.detail);const[T,I,H]=In(i);switch(r){case X.RGBA_STRING:case X.RGBA_OBJECT:t(4,l=On([T,I,H,s]));break;case X.VEC4_STRING:t(4,l=ml([T,I,H,s]));break;case X.HSLA_STRING:const[C,N,K]=io(l);t(4,l=oo([C,N,K,s]));break}d()}function g(A){t(3,i=A.currentTarget.value);const[T,I,H]=In(i);switch(r){case X.RGBA_STRING:case X.RGBA_OBJECT:t(4,l=vd({r:T,g:I,b:H,a:s}));break;case X.VEC3_STRING:t(4,l=bd([T,I,H]));break;case X.VEC4_STRING:t(4,l=ml([T,I,H,s]));break;case X.RGB_STRING:case X.RGB_OBJECT:t(4,l=wd(i));break;case X.HSL_STRING:t(4,l=kd([T,I,H]));break;case X.HSLA_STRING:t(4,l=Ed([T,I,H,s]));break;default:t(4,l=kr(i));break}d()}function p(){i=this.value,t(3,i),t(10,o),t(11,r)}function v(A){l=A,t(4,l),t(10,o),t(11,r)}return n.$$set=A=>{"value"in A&&t(10,o=A.value),"context"in A&&t(0,u=A.context),"key"in A&&t(1,f=A.key)},n.$$.update=()=>{if(n.$$.dirty&1024&&t(11,r=tr(o)),n.$$.dirty&3072&&t(3,i=hl(o,r)),n.$$.dirty&3072&&t(4,l=kr(o,r)),n.$$.dirty&2048&&t(2,a=[X.RGBA_STRING,X.VEC4_STRING,X.VEC4_ARRAY,X.RGBA_OBJECT,X.HSLA_STRING].includes(r)),n.$$.dirty&1028)if(a){const[A,T,I,H=1]=ci(o);t(5,s=H)}else t(5,s=1)},t(5,s=1),[u,f,a,i,l,s,m,h,_,g,o,r,p,v]}class Md extends fe{constructor(e){super(),ue(this,e,Id,Rd,le,{value:10,context:0,key:1})}}function bl(n,e,t){const r=n.slice();return r[6]=e[t],r[8]=t,r}function Bd(n){let e,t=n[6]+"",r;return{c(){e=F("button"),r=Re(t),k(e,"class","label svelte-1os5llw")},m(i,l){L(i,e,l),O(e,r)},p(i,l){l&2&&t!==(t=i[6]+"")&&Ge(r,t)},d(i){i&&M(e)}}}function Ld(n){let e,t=n[6]+"",r;return{c(){e=F("span"),r=Re(t),k(e,"class","label svelte-1os5llw")},m(i,l){L(i,e,l),O(e,r)},p(i,l){l&2&&t!==(t=i[6]+"")&&Ge(r,t)},d(i){i&&M(e)}}}function wl(n){let e,t;function r(s,a){return s[0]?Ld:Bd}let i=r(n),l=i(n);return{c(){e=F("li"),l.c(),t=Z(),k(e,"class","item svelte-1os5llw")},m(s,a){L(s,e,a),l.m(e,null),O(e,t)},p(s,a){i===(i=r(s))&&l?l.p(s,a):(l.d(1),l=i(s),l&&(l.c(),l.m(e,t)))},d(s){s&&M(e),l.d()}}}function Nd(n){let e,t,r,i,l=n[1],s=[];for(let a=0;a<l.length;a+=1)s[a]=wl(bl(n,l,a));return{c(){e=F("div"),t=F("div"),r=F("ul");for(let a=0;a<s.length;a+=1)s[a].c();k(r,"class","ul svelte-1os5llw"),k(t,"class","container svelte-1os5llw"),k(e,"class",i="list "+(n[0]?"disabled":"")+" svelte-1os5llw")},m(a,o){L(a,e,o),O(e,t),O(t,r);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(r,null);n[5](t)},p(a,[o]){if(o&3){l=a[1];let u;for(u=0;u<l.length;u+=1){const f=bl(a,l,u);s[u]?s[u].p(f,o):(s[u]=wl(f),s[u].c(),s[u].m(r,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=l.length}o&1&&i!==(i="list "+(a[0]?"disabled":"")+" svelte-1os5llw")&&k(e,"class",i)},i:ae,o:ae,d(a){a&&M(e),At(s,a),n[5](null)}}}function Pd(n,e,t){let{disabled:r}=e,{value:i=null}=e,{context:l=null}=e,{key:s=""}=e,a;va(()=>{a.scrollTo(0,a.scrollHeight)});function o(u){ke[u?"unshift":"push"](()=>{a=u,t(2,a)})}return n.$$set=u=>{"disabled"in u&&t(0,r=u.disabled),"value"in u&&t(1,i=u.value),"context"in u&&t(3,l=u.context),"key"in u&&t(4,s=u.key)},[r,i,a,l,s,o]}class Dd extends fe{constructor(e){super(),ue(this,e,Pd,Nd,le,{disabled:0,value:1,context:3,key:4})}}function zd(n,{id:e=n,img:t=new Image}={}){return new Promise((r,i)=>{function l(){t.removeEventListener("load",l),r(t)}function s(a){t.removeEventListener("load",l),t.removeEventListener("error",s),i(a)}t.addEventListener("load",l),t.addEventListener("error",s),t.src=n})}function Fd(n){let e,t,r,i,l,s,a,o,u,f,c,d,m;return o=new _n({props:{disabled:!0,value:n[3]}}),f=new Et({props:{label:"change"}}),f.$on("click",n[4]),f.$on("dragover",n[6]),f.$on("dragleave",n[7]),f.$on("drop",n[5]),{c(){e=F("div"),t=F("div"),r=F("img"),l=Z(),s=F("input"),a=Z(),z(o.$$.fragment),u=Z(),z(f.$$.fragment),k(r,"class","img svelte-1x7it4v"),ma(r.src,i="")||k(r,"src",i),k(r,"alt",""),k(s,"class","input svelte-1x7it4v"),k(s,"type","file"),k(t,"class","preview svelte-1x7it4v"),k(e,"class","row svelte-1x7it4v")},m(h,_){L(h,e,_),O(e,t),O(t,r),n[13](r),O(t,l),O(t,s),n[14](s),O(e,a),P(o,e,null),L(h,u,_),P(f,h,_),c=!0,d||(m=[pe(s,"change",n[5]),pe(t,"click",n[4])],d=!0)},p(h,_){const g={};_&8&&(g.value=h[3]),o.$set(g)},i(h){c||(y(o.$$.fragment,h),y(f.$$.fragment,h),c=!0)},o(h){E(o.$$.fragment,h),E(f.$$.fragment,h),c=!1},d(h){h&&M(e),n[13](null),n[14](null),D(o),h&&M(u),D(f,h),d=!1,Ve(m)}}}function Od(n){let e,t,r,i,l,s;return t=new er({props:{$$slots:{default:[Fd]},$$scope:{ctx:n}}}),{c(){e=F("div"),r=F("div"),z(t.$$.fragment),be(r,"display","contents"),be(r,"--grid-template-columns","1fr 0.5fr"),k(e,"class","img-container svelte-1x7it4v"),q(e,"dragover",n[2])},m(a,o){L(a,e,o),O(e,r),P(t,r,null),i=!0,l||(s=[pe(e,"dragover",n[6]),pe(e,"dragleave",n[7]),pe(e,"drop",n[5])],l=!0)},p(a,[o]){const u={};o&65547&&(u.$$scope={dirty:o,ctx:a}),t.$set(u),(!i||o&4)&&q(e,"dragover",a[2])},i(a){i||(y(t.$$.fragment,a),i=!0)},o(a){E(t.$$.fragment,a),i=!1},d(a){a&&M(e),D(t),l=!1,Ve(s)}}}function Ud(n,e,t){let r,i,{value:l}=e,{context:s=null}=e,{key:a=""}=e,o,u,f;function c(){u.click()}let d=new FileReader,m=!1;function h(A){A.preventDefault(),A.stopPropagation();let T;A.dataTransfer?T=A.dataTransfer.files[0]:A.target&&(T=A.target.files[0]),t(11,f=T.name),d.onload=async I=>{d.onload=null,t(8,l=I.target.result)},d.readAsDataURL(T),t(2,m=!1)}function _(A){A.preventDefault(),A.stopPropagation(),t(2,m=!0)}function g(A){A.preventDefault(),A.stopPropagation(),t(2,m=!1)}function p(A){ke[A?"unshift":"push"](()=>{o=A,t(0,o)})}function v(A){ke[A?"unshift":"push"](()=>{u=A,t(1,u)})}return n.$$set=A=>{"value"in A&&t(8,l=A.value),"context"in A&&t(9,s=A.context),"key"in A&&t(10,a=A.key)},n.$$.update=()=>{n.$$.dirty&256&&t(12,r=typeof l===HTMLImageElement?l.src:l),n.$$.dirty&6144&&t(3,i=f||r.replace("/@fs/Users/furiouzz/Documents/2023-10-gobelins/_DEV/fragments","")),n.$$.dirty&4097&&(async()=>await zd(r,{img:o}))()},[o,u,m,i,c,h,_,g,l,s,a,f,r,p,v]}class jd extends fe{constructor(e){super(),ue(this,e,Ud,Od,le,{value:8,context:9,key:10})}}const Hd=n=>({}),vl=n=>({});function yl(n){let e;function t(l,s){return l[2]?Vd:Gd}let r=t(n),i=r(n);return{c(){i.c(),e=Se()},m(l,s){i.m(l,s),L(l,e,s)},p(l,s){r===(r=t(l))&&i?i.p(l,s):(i.d(1),i=r(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){i.d(l),l&&M(e)}}}function Gd(n){let e,t;return{c(){e=F("span"),t=Re(n[3]),k(e,"class","field__label svelte-8qnf87")},m(r,i){L(r,e,i),O(e,t)},p(r,i){i&8&&Ge(t,r[3])},d(r){r&&M(e)}}}function Vd(n){let e,t,r,i;return{c(){e=F("button"),t=Re(n[3]),k(e,"class","field__label svelte-8qnf87")},m(l,s){L(l,e,s),O(e,t),r||(i=pe(e,"click",n[7]),r=!0)},p(l,s){s&8&&Ge(t,l[3])},d(l){l&&M(e),r=!1,i()}}}function Wd(n){let e,t,r,i,l,s,a=n[3]!==null&&yl(n);const o=n[6].infos,u=De(o,n,n[5],vl),f=n[6].default,c=De(f,n,n[5],null);return{c(){e=F("div"),t=F("div"),a&&a.c(),r=Z(),u&&u.c(),i=Z(),l=F("div"),c&&c.c(),k(t,"class","field__infos svelte-8qnf87"),k(l,"class","field__input svelte-8qnf87"),k(e,"class","field__section svelte-8qnf87"),q(e,"visible",n[0]),q(e,"secondary",n[1]),q(e,"no-label",n[3]===null)},m(d,m){L(d,e,m),O(e,t),a&&a.m(t,null),O(t,r),u&&u.m(t,null),O(e,i),O(e,l),c&&c.m(l,null),s=!0},p(d,[m]){d[3]!==null?a?a.p(d,m):(a=yl(d),a.c(),a.m(t,r)):a&&(a.d(1),a=null),u&&u.p&&(!s||m&32)&&Fe(u,o,d,d[5],s?ze(o,d[5],m,Hd):Oe(d[5]),vl),c&&c.p&&(!s||m&32)&&Fe(c,f,d,d[5],s?ze(f,d[5],m,null):Oe(d[5]),null),(!s||m&1)&&q(e,"visible",d[0]),(!s||m&2)&&q(e,"secondary",d[1]),(!s||m&8)&&q(e,"no-label",d[3]===null)},i(d){s||(y(u,d),y(c,d),s=!0)},o(d){E(u,d),E(c,d),s=!1},d(d){d&&M(e),a&&a.d(),u&&u.d(d),c&&c.d(d)}}}function qd(n,e,t){let{$$slots:r={},$$scope:i}=e,{visible:l=!0}=e,{secondary:s=!1}=e,{interactive:a=!1}=e,{label:o=""}=e,{name:u=""}=e;function f(c){Ye.call(this,n,c)}return n.$$set=c=>{"visible"in c&&t(0,l=c.visible),"secondary"in c&&t(1,s=c.secondary),"interactive"in c&&t(2,a=c.interactive),"label"in c&&t(3,o=c.label),"name"in c&&t(4,u=c.name),"$$scope"in c&&t(5,i=c.$$scope)},[l,s,a,o,u,i,r,f]}class wo extends fe{constructor(e){super(),ue(this,e,qd,Wd,le,{visible:0,secondary:1,interactive:2,label:3,name:4})}}function kl(n){let e,t,r;function i(s){n[20](s)}let l={options:n[5],disabled:n[0]===void 0};return n[1]!==void 0&&(l.value=n[1]),e=new Gn({props:l}),ke.push(()=>et(e,"value",i)),e.$on("change",n[8]),{c(){z(e.$$.fragment)},m(s,a){P(e,s,a),r=!0},p(s,a){const o={};a&32&&(o.options=s[5]),a&1&&(o.disabled=s[0]===void 0),!t&&a&2&&(t=!0,o.value=s[1],xe(()=>t=!1)),e.$set(o)},i(s){r||(y(e.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),r=!1},d(s){D(e,s)}}}function El(n){let e,t,r;function i(s){n[21](s)}let l={label:"key"};return n[3]!==void 0&&(l.value=n[3]),e=new _n({props:l}),ke.push(()=>et(e,"value",i)),e.$on("input",n[9]),{c(){z(e.$$.fragment)},m(s,a){P(e,s,a),r=!0},p(s,a){const o={};!t&&a&8&&(t=!0,o.value=s[3],xe(()=>t=!1)),e.$set(o)},i(s){r||(y(e.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),r=!1},d(s){D(e,s)}}}function Al(n){let e,t,r;function i(s){n[22](s)}let l={label:["onNoteOn","onNoteOff"].includes(n[1])?"note":"number"};return n[3]!==void 0&&(l.value=n[3]),e=new _n({props:l}),ke.push(()=>et(e,"value",i)),e.$on("input",n[9]),{c(){z(e.$$.fragment)},m(s,a){P(e,s,a),r=!0},p(s,a){const o={};a&2&&(o.label=["onNoteOn","onNoteOff"].includes(s[1])?"note":"number"),!t&&a&8&&(t=!0,o.value=s[3],xe(()=>t=!1)),e.$set(o)},i(s){r||(y(e.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),r=!1},d(s){D(e,s)}}}function Kd(n){let e,t;return e=new as({}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Yd(n){let e,t,r,i,l,s,a,o,u,f,c,d;r=new Gn({props:{name:"trigger-input",value:n[0],options:n[6]}}),r.$on("change",n[7]);let m=n[0]&&kl(n),h=n[0]==="Keyboard"&&El(n),_=n[0]==="MIDI"&&Al(n);return o=new Et({props:{label:"delete",showLabel:!1,$$slots:{default:[Kd]},$$scope:{ctx:n}}}),o.$on("click",n[10]),{c(){e=F("button"),t=Z(),z(r.$$.fragment),i=Z(),m&&m.c(),l=Z(),h&&h.c(),s=Z(),_&&_.c(),a=Z(),u=F("div"),z(o.$$.fragment),k(e,"class","activity svelte-1d01jzr"),q(e,"valid",n[4]),q(e,"enabled",n[2]&&n[2].enabled),q(e,"disabled",!n[2]||!n[2].enabled),be(u,"display","contents"),be(u,"--color-text","white"),be(u,"--background-color","var(--color-red)"),be(u,"--box-shadow-color-active","var(--color-lightred)")},m(g,p){L(g,e,p),L(g,t,p),P(r,g,p),L(g,i,p),m&&m.m(g,p),L(g,l,p),h&&h.m(g,p),L(g,s,p),_&&_.m(g,p),L(g,a,p),L(g,u,p),P(o,u,null),f=!0,c||(d=pe(e,"click",n[11]),c=!0)},p(g,p){(!f||p&16)&&q(e,"valid",g[4]),(!f||p&4)&&q(e,"enabled",g[2]&&g[2].enabled),(!f||p&4)&&q(e,"disabled",!g[2]||!g[2].enabled);const v={};p&1&&(v.value=g[0]),p&64&&(v.options=g[6]),r.$set(v),g[0]?m?(m.p(g,p),p&1&&y(m,1)):(m=kl(g),m.c(),y(m,1),m.m(l.parentNode,l)):m&&(de(),E(m,1,1,()=>{m=null}),he()),g[0]==="Keyboard"?h?(h.p(g,p),p&1&&y(h,1)):(h=El(g),h.c(),y(h,1),h.m(s.parentNode,s)):h&&(de(),E(h,1,1,()=>{h=null}),he()),g[0]==="MIDI"?_?(_.p(g,p),p&1&&y(_,1)):(_=Al(g),_.c(),y(_,1),_.m(a.parentNode,a)):_&&(de(),E(_,1,1,()=>{_=null}),he());const A={};p&33554432&&(A.$$scope={dirty:p,ctx:g}),o.$set(A)},i(g){f||(y(r.$$.fragment,g),y(m),y(h),y(_),y(o.$$.fragment,g),f=!0)},o(g){E(r.$$.fragment,g),E(m),E(h),E(_),E(o.$$.fragment,g),f=!1},d(g){g&&M(e),g&&M(t),D(r,g),g&&M(i),m&&m.d(g),g&&M(l),h&&h.d(g),g&&M(s),_&&_.d(g),g&&M(a),g&&o&&M(u),D(o,g),c=!1,d()}}}function Xd(n){let e,t,r,i,l;return t=new er({props:{$$slots:{default:[Yd]},$$scope:{ctx:n}}}),{c(){e=F("div"),r=F("div"),z(t.$$.fragment),be(r,"display","contents"),be(r,"--grid-template-columns","var(--width-activity) var(--width-cols) var(--width-delete)"),k(e,"class",i="field-trigger "+(n[0]?n[0].toLowerCase():"")+" svelte-1d01jzr")},m(s,a){L(s,e,a),O(e,r),P(t,r,null),l=!0},p(s,[a]){const o={};a&33554559&&(o.$$scope={dirty:a,ctx:s}),t.$set(o),(!l||a&1&&i!==(i="field-trigger "+(s[0]?s[0].toLowerCase():"")+" svelte-1d01jzr"))&&k(e,"class",i)},i(s){l||(y(t.$$.fragment,s),l=!0)},o(s){E(t.$$.fragment,s),l=!1},d(s){s&&M(e),D(t)}}}const Sl={Mouse:{events:[{name:"onMouseDown",triggerable:!0,controllable:!1},{name:"onMouseUp",triggerable:!0,controllable:!1},{name:"onMouseMove",triggerable:!0,controllable:!1},{name:"onClick",triggerable:!0,controllable:!1}]},Keyboard:{events:[{name:"onKeyDown",triggerable:!0,controllable:!1},{name:"onKeyPress",triggerable:!0,controllable:!1},{name:"onKeyUp",triggerable:!0,controllable:!1}]},MIDI:{events:[{name:"onNoteOn",triggerable:!0,controllable:!1},{name:"onNoteOff",triggerable:!0,controllable:!1},{name:"onNumberOn",triggerable:!0,controllable:!1},{name:"onNumberOff",triggerable:!0,controllable:!1},{name:"onControlChange",triggerable:!1,controllable:!0}]}};function Jd(n,e,t){let r,i,l,s,a,{index:o}=e,{inputType:u=void 0}=e,{eventName:f=void 0}=e,{enabled:c=!0}=e,{controllable:d=!1}=e,{triggerable:m=!1}=e,{context:h}=e,{onTrigger:_=()=>{}}=e,{params:g={key:[]}}=e,p,v=tt();function A(){p&&(t(13,c=p.enabled),p.destroy(),t(2,p=null));const B=Hu[f];t(2,p=B(_,{...g,context:h,hot:!1,enabled:c}))}function T(B){t(0,u=B.detail),l.includes(f)||(t(1,f=void 0),t(12,g.key=null,g)),p&&(p.destroy(),t(2,p=null))}function I(B){const se=u==="MIDI"&&f!==void 0&&(f.includes("Number")&&B.detail.includes("Note")||f.includes("Note")&&B.detail.includes("Number"));t(1,f=B.detail),se&&t(12,g.key="",g),u==="Mouse"&&A()}function H(B){t(12,g.key=B.detail,g),A()}function C(){v("delete",o)}function N(){p&&t(2,p.enabled=!p.enabled,p)}Ft(()=>{(u==="Mouse"&&f||u&&f&&g.key)&&A()}),bt(()=>{p&&(p.destroy(),t(2,p=null))});function K(B){f=B,t(1,f)}function x(B){a=B,t(3,a),t(12,g)}function ie(B){a=B,t(3,a),t(12,g)}return n.$$set=B=>{"index"in B&&t(14,o=B.index),"inputType"in B&&t(0,u=B.inputType),"eventName"in B&&t(1,f=B.eventName),"enabled"in B&&t(13,c=B.enabled),"controllable"in B&&t(15,d=B.controllable),"triggerable"in B&&t(16,m=B.triggerable),"context"in B&&t(17,h=B.context),"onTrigger"in B&&t(18,_=B.onTrigger),"params"in B&&t(12,g=B.params)},n.$$.update=()=>{n.$$.dirty&98304&&t(19,r=[...Object.keys(Sl)].reduce((B,se)=>{const ee=Sl[se],{disabled:j,events:$}=ee,oe=$.filter(re=>re.triggerable===m&&re.controllable===d);return oe.length>0&&(B[se]={events:oe,disabled:j}),B},{})),n.$$.dirty&524288&&t(6,i=[{label:"Select input",value:void 0,disabled:!0},...Object.keys(r).map(B=>({value:B,disabled:r[B].disabled}))]),n.$$.dirty&524289&&t(5,l=u?[{label:"-",value:void 0,disabled:!0},...r[u].events.map(B=>({value:B.name}))]:[]),n.$$.dirty&3&&t(4,s=u&&f),n.$$.dirty&4096&&t(3,a=g.key)},[u,f,p,a,s,l,i,T,I,H,C,N,g,c,o,d,m,h,_,r,K,x,ie]}class Qd extends fe{constructor(e){super(),ue(this,e,Jd,Xd,le,{index:14,inputType:0,eventName:1,enabled:13,controllable:15,triggerable:16,context:17,onTrigger:18,params:12})}}function Tl(n,e,t){const r=n.slice();return r[12]=e[t],r[13]=e,r[14]=t,r}function Cl(n){let e,t,r,i;e=new Et({props:{label:"add trigger"}}),e.$on("click",n[7]);let l=n[5],s=[];for(let o=0;o<l.length;o+=1)s[o]=Rl(Tl(n,l,o));const a=o=>E(s[o],1,1,()=>{s[o]=null});return{c(){z(e.$$.fragment),t=Z(),r=F("div");for(let o=0;o<s.length;o+=1)s[o].c();k(r,"class","field-triggers svelte-wnpid3")},m(o,u){P(e,o,u),L(o,t,u),L(o,r,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(r,null);i=!0},p(o,u){if(u&123){l=o[5];let f;for(f=0;f<l.length;f+=1){const c=Tl(o,l,f);s[f]?(s[f].p(c,u),y(s[f],1)):(s[f]=Rl(c),s[f].c(),y(s[f],1),s[f].m(r,null))}for(de(),f=l.length;f<s.length;f+=1)a(f);he()}},i(o){if(!i){y(e.$$.fragment,o);for(let u=0;u<l.length;u+=1)y(s[u]);i=!0}},o(o){E(e.$$.fragment,o),s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)E(s[u]);i=!1},d(o){D(e,o),o&&M(t),o&&M(r),At(s,o)}}}function Rl(n){let e,t,r,i,l,s;function a(d){n[8](d,n[12])}function o(d){n[9](d,n[12])}function u(d){n[10](d,n[12])}function f(d){n[11](d,n[12])}let c={index:n[14],onTrigger:n[1],context:n[0],controllable:n[4],triggerable:n[3]};return n[12].inputType!==void 0&&(c.inputType=n[12].inputType),n[12].eventName!==void 0&&(c.eventName=n[12].eventName),n[12].params!==void 0&&(c.params=n[12].params),n[12].enabled!==void 0&&(c.enabled=n[12].enabled),e=new Qd({props:c}),ke.push(()=>et(e,"inputType",a)),ke.push(()=>et(e,"eventName",o)),ke.push(()=>et(e,"params",u)),ke.push(()=>et(e,"enabled",f)),e.$on("delete",n[6]),{c(){z(e.$$.fragment)},m(d,m){P(e,d,m),s=!0},p(d,m){n=d;const h={};m&2&&(h.onTrigger=n[1]),m&1&&(h.context=n[0]),m&16&&(h.controllable=n[4]),m&8&&(h.triggerable=n[3]),!t&&m&32&&(t=!0,h.inputType=n[12].inputType,xe(()=>t=!1)),!r&&m&32&&(r=!0,h.eventName=n[12].eventName,xe(()=>r=!1)),!i&&m&32&&(i=!0,h.params=n[12].params,xe(()=>i=!1)),!l&&m&32&&(l=!0,h.enabled=n[12].enabled,xe(()=>l=!1)),e.$set(h)},i(d){s||(y(e.$$.fragment,d),s=!0)},o(d){E(e.$$.fragment,d),s=!1},d(d){D(e,d)}}}function Zd(n){let e,t,r=n[1]&&Cl(n);return{c(){r&&r.c(),e=Se()},m(i,l){r&&r.m(i,l),L(i,e,l),t=!0},p(i,[l]){i[1]?r?(r.p(i,l),l&2&&y(r,1)):(r=Cl(i),r.c(),y(r,1),r.m(e.parentNode,e)):r&&(de(),E(r,1,1,()=>{r=null}),he())},i(i){t||(y(r),t=!0)},o(i){E(r),t=!1},d(i){r&&r.d(i),i&&M(e)}}}function $d(n,e,t){let r,i=ae,l=()=>(i(),i=Hn(o,p=>t(5,r=p)),o);n.$$.on_destroy.push(()=>i());let{context:s}=e,{onTrigger:a}=e,{triggers:o}=e;l();let{triggerable:u=!1}=e,{controllable:f=!1}=e;function c(p){const v=p.detail;we(o,r=r.filter((A,T)=>T!==v),r)}function d(){o.update(p=>[...p,{inputType:void 0,eventName:void 0}])}function m(p,v){n.$$.not_equal(v.inputType,p)&&(v.inputType=p,o.set(r))}function h(p,v){n.$$.not_equal(v.eventName,p)&&(v.eventName=p,o.set(r))}function _(p,v){n.$$.not_equal(v.params,p)&&(v.params=p,o.set(r))}function g(p,v){n.$$.not_equal(v.enabled,p)&&(v.enabled=p,o.set(r))}return n.$$set=p=>{"context"in p&&t(0,s=p.context),"onTrigger"in p&&t(1,a=p.onTrigger),"triggers"in p&&l(t(2,o=p.triggers)),"triggerable"in p&&t(3,u=p.triggerable),"controllable"in p&&t(4,f=p.controllable)},[s,a,o,u,f,r,c,d,m,h,_,g]}class xd extends fe{constructor(e){super(),ue(this,e,$d,Zd,le,{context:0,onTrigger:1,triggers:2,triggerable:3,controllable:4})}}function eh(n){return n.match(/\.(jpeg|jpg|gif|png|webp)$/)!==null}function th(n){return typeof n===HTMLImageElement||eh(n)}function nh(n){return n.options&&Array.isArray(n.options)?"select":n.type==="folder"?"folder":null}function rh(n){if(n!=null){if(bo(n))return"color";if(typeof n=="number")return"number";if(typeof n=="function")return"button";if(typeof n=="boolean")return"checkbox";if(typeof n=="string")return th(n)?"image":"text";{const e=Array.isArray(n),t=!e&&typeof n=="object",r=t?Object.values(n):n;if((e||t)&&r.every(i=>typeof i=="number")&&r.length<=4)return"vec"}}}function ih(n,e=100){let t=performance.now(),r=!1,i,l;function s(){const a=performance.now();r&&(r=!1,t=a,n.apply(this,l),t=a),a-t>e&&i>-1?(cancelAnimationFrame(i),i=null):i=requestAnimationFrame(s)}return(...a)=>{r=!0,l=a,i||s()}}function lh(n){let e,t,r;const i=[{value:n[0]},n[11]];var l=n[15];function s(u){let f={};for(let c=0;c<i.length;c+=1)f=Zl(f,i[c]);return{props:f}}l&&(e=Ln(l,s()),e.$on("change",n[24]),e.$on("click",function(){cn(n[16])&&n[16].apply(this,arguments)}));const a=n[22].default,o=De(a,n,n[26],null);return{c(){e&&z(e.$$.fragment),t=Z(),o&&o.c()},m(u,f){e&&P(e,u,f),L(u,t,f),o&&o.m(u,f),r=!0},p(u,f){n=u;const c=f[0]&2049?Ra(i,[f[0]&1&&{value:n[0]},f[0]&2048&&Ia(n[11])]):{};if(f[0]&32768&&l!==(l=n[15])){if(e){de();const d=e;E(d.$$.fragment,1,0,()=>{D(d,1)}),he()}l?(e=Ln(l,s()),e.$on("change",n[24]),e.$on("click",function(){cn(n[16])&&n[16].apply(this,arguments)}),z(e.$$.fragment),y(e.$$.fragment,1),P(e,t.parentNode,t)):e=null}else l&&e.$set(c);o&&o.p&&(!r||f[0]&67108864)&&Fe(o,a,n,n[26],r?ze(a,n[26],f,null):Oe(n[26]),null)},i(u){r||(e&&y(e.$$.fragment,u),y(o,u),r=!0)},o(u){e&&E(e.$$.fragment,u),E(o,u),r=!1},d(u){e&&D(e,u),u&&M(t),o&&o.d(u)}}}function Il(n){let e,t,r;return{c(){e=F("button"),e.innerHTML='<svg width="16" height="16" fill="none" viewBox="0 0 24 24" class="svelte-t6la5u"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.75 8H7.25"></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12.75 8H19.25"></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.75 16H12.25"></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.75 16H19.25"></path><circle cx="10" cy="8" r="2.25" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle><circle cx="15" cy="16" r="2.25" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></circle></svg>',k(e,"class","field__action field__action--triggers svelte-t6la5u"),q(e,"active",n[9])},m(i,l){L(i,e,l),t||(r=pe(e,"click",n[19]),t=!0)},p(i,l){l[0]&512&&q(e,"active",i[9])},d(i){i&&M(e),t=!1,r()}}}function Ml(n){let e,t,r;function i(a,o){return a[1].locked?oh:sh}let l=i(n),s=l(n);return{c(){e=F("button"),s.c(),k(e,"class","field__action field__action--lock svelte-t6la5u")},m(a,o){L(a,e,o),s.m(e,null),t||(r=pe(e,"click",n[23]),t=!0)},p(a,o){l!==(l=i(a))&&(s.d(1),s=l(a),s&&(s.c(),s.m(e,null)))},d(a){a&&M(e),s.d(),t=!1,r()}}}function sh(n){let e,t,r;return{c(){e=Pe("svg"),t=Pe("path"),r=Pe("path"),k(t,"stroke","currentColor"),k(t,"stroke-linecap","round"),k(t,"stroke-linejoin","round"),k(t,"stroke-width","1.5"),k(t,"d","M5.75 11.75C5.75 11.1977 6.19772 10.75 6.75 10.75H17.25C17.8023 10.75 18.25 11.1977 18.25 11.75V17.25C18.25 18.3546 17.3546 19.25 16.25 19.25H7.75C6.64543 19.25 5.75 18.3546 5.75 17.25V11.75Z"),k(r,"stroke","currentColor"),k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","1.5"),k(r,"d","M7.75 10.5V9.84343C7.75 8.61493 7.70093 7.29883 8.42416 6.30578C8.99862 5.51699 10.0568 4.75 12 4.75C14 4.75 15.25 6.25 15.25 6.25"),k(e,"class","action__icon"),k(e,"width","16"),k(e,"height","16"),k(e,"fill","none"),k(e,"viewBox","0 0 24 24")},m(i,l){L(i,e,l),O(e,t),O(e,r)},d(i){i&&M(e)}}}function oh(n){let e,t,r;return{c(){e=Pe("svg"),t=Pe("path"),r=Pe("path"),k(t,"stroke","currentColor"),k(t,"stroke-linecap","round"),k(t,"stroke-linejoin","round"),k(t,"stroke-width","1.5"),k(t,"d","M5.75 11.75C5.75 11.1977 6.19772 10.75 6.75 10.75H17.25C17.8023 10.75 18.25 11.1977 18.25 11.75V17.25C18.25 18.3546 17.3546 19.25 16.25 19.25H7.75C6.64543 19.25 5.75 18.3546 5.75 17.25V11.75Z"),k(r,"stroke","currentColor"),k(r,"stroke-linecap","round"),k(r,"stroke-linejoin","round"),k(r,"stroke-width","1.5"),k(r,"d","M7.75 10.5V10.3427C7.75 8.78147 7.65607 7.04125 8.74646 5.9239C9.36829 5.2867 10.3745 4.75 12 4.75C13.6255 4.75 14.6317 5.2867 15.2535 5.9239C16.3439 7.04125 16.25 8.78147 16.25 10.3427V10.5"),k(e,"class","action__icon"),k(e,"width","16"),k(e,"height","16"),k(e,"fill","none"),k(e,"viewBox","0 0 24 24")},m(i,l){L(i,e,l),O(e,t),O(e,r)},d(i){i&&M(e)}}}function ah(n){let e,t,r=n[12]&&!n[13]&&Il(n),i=n[7]==="vec"&&!n[13]&&Ml(n);return{c(){e=F("div"),r&&r.c(),t=Z(),i&&i.c(),k(e,"slot","infos"),k(e,"class","field__actions svelte-t6la5u")},m(l,s){L(l,e,s),r&&r.m(e,null),O(e,t),i&&i.m(e,null)},p(l,s){l[12]&&!l[13]?r?r.p(l,s):(r=Il(l),r.c(),r.m(e,t)):r&&(r.d(1),r=null),l[7]==="vec"&&!l[13]?i?i.p(l,s):(i=Ml(l),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(l){l&&M(e),r&&r.d(),i&&i.d()}}}function Bl(n){let e,t;return e=new wo({props:{visible:n[8],secondary:!0,$$slots:{default:[uh]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i[0]&256&&(l.visible=r[8]),i[0]&67174536&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function uh(n){let e,t;return e=new xd({props:{triggers:n[18],onTrigger:n[16],context:n[3],triggerable:n[7]==="button",controllable:n[7]==="number"}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i[0]&65536&&(l.onTrigger=r[16]),i[0]&8&&(l.context=r[3]),i[0]&128&&(l.triggerable=r[7]==="button"),i[0]&128&&(l.controllable=r[7]==="number"),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function fh(n){let e,t,r,i,l;t=new wo({props:{name:n[2],label:n[14],interactive:n[12],$$slots:{infos:[ah],default:[lh]},$$scope:{ctx:n}}}),t.$on("click",n[19]);let s=n[12]&&Bl(n);return{c(){e=F("div"),z(t.$$.fragment),r=Z(),s&&s.c(),k(e,"class","field svelte-t6la5u"),xt(()=>n[25].call(e)),q(e,"disabled",n[13]),q(e,"xxsmall",n[6]),q(e,"xsmall",n[5]),q(e,"small",n[10])},m(a,o){L(a,e,o),P(t,e,null),O(e,r),s&&s.m(e,null),i=ts(e,n[25].bind(e)),l=!0},p(a,o){const u={};o[0]&4&&(u.name=a[2]),o[0]&16384&&(u.label=a[14]),o[0]&4096&&(u.interactive=a[12]),o[0]&67222147&&(u.$$scope={dirty:o,ctx:a}),t.$set(u),a[12]?s?(s.p(a,o),o[0]&4096&&y(s,1)):(s=Bl(a),s.c(),y(s,1),s.m(e,null)):s&&(de(),E(s,1,1,()=>{s=null}),he()),(!l||o[0]&8192)&&q(e,"disabled",a[13]),(!l||o[0]&64)&&q(e,"xxsmall",a[6]),(!l||o[0]&32)&&q(e,"xsmall",a[5]),(!l||o[0]&1024)&&q(e,"small",a[10])},i(a){l||(y(t.$$.fragment,a),y(s),l=!0)},o(a){E(t.$$.fragment,a),E(s),l=!1},d(a){a&&M(e),D(t),s&&s.d(),i()}}}function ch(n,e,t){let r,i,l,s,a,o,u,f,c,d,m,h,_,{$$slots:g={},$$scope:p}=e,{key:v=""}=e,{value:A=null}=e,{context:T=null}=e,{params:I={}}=e,{type:H=null}=e,C,N=!1;const K=rs(T,{props:{}},{persist:T!==null});ne(n,K,te=>t(27,_=te)),_.props[v]||we(K,_.props[v]={triggers:[]},_);let x=st(_.props[v].triggers.filter(te=>te.inputType!==void 0));ne(n,x,te=>t(21,h=te)),x.subscribe(te=>{K.update(ye=>(ye.props[v].triggers=te,ye))});const ie=tt(),B={select:Gn,number:no,vec:fd,checkbox:sd,text:_n,list:Dd,color:Md,button:Et,download:Et,image:jd},se={checkbox:()=>{t(0,A=!A),ie("change",A)},button:te=>{A(te),ie("click",te)},download:te=>{let[ye,Me]=A(te);af(ye,Me)},number:(te={})=>{if(te.value>=0&&te.value<=1&&isFinite(I.min)&&isFinite(I.max)){let Me=lt(te.value,0,1,I.min,I.max),Be=I.step?I.step:1,rt=Math.round(Me*(1/Be))/(1/Be);ie("change",rt)}}};function ee(te){te.preventDefault(),t(8,N=!N)}function j(te){const{triggerable:ye,controllable:Me,...Be}=te;return{...Be,key:v,context:T}}const $=()=>t(1,I.locked=!I.locked,I);function oe(te){Ye.call(this,n,te)}function re(){C=this.offsetWidth,t(4,C)}return n.$$set=te=>{"key"in te&&t(2,v=te.key),"value"in te&&t(0,A=te.value),"context"in te&&t(3,T=te.context),"params"in te&&t(1,I=te.params),"type"in te&&t(20,H=te.type),"$$scope"in te&&t(26,p=te.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&1048579&&t(7,r=H||nh(I)||rh(A)),n.$$.dirty[0]&2&&t(11,i=j(I)),n.$$.dirty[0]&128&&t(16,l=ih(se[r])),n.$$.dirty[0]&128&&t(15,s=B[r]),n.$$.dirty[0]&7&&t(14,a=I.label!==void 0&&typeof A!="function"?I.label:v),n.$$.dirty[0]&2&&t(13,o=I.disabled),n.$$.dirty[0]&130&&t(12,u=I.triggerable!==!1&&(r==="number"&&isFinite(I.min)&&isFinite(I.max)||r==="button")),n.$$.dirty[0]&130&&(r==="download"||r==="button")&&I.label===void 0&&t(11,i.label=r==="download"?"download":"run",i),n.$$.dirty[0]&16&&t(6,f=C<200),n.$$.dirty[0]&80&&t(5,c=!f&&C<260),n.$$.dirty[0]&112&&t(10,d=!f&&!c&&C<320),n.$$.dirty[0]&2097152&&t(9,m=h.length>0)},[A,I,v,T,C,c,f,r,N,m,d,i,u,o,a,s,l,K,x,ee,H,h,g,$,oe,re,p]}class He extends fe{constructor(e){super(),ue(this,e,ch,fh,le,{key:2,value:0,context:3,params:1,type:20},null,[-1,-1])}}function dh(n){let e,t,r,i,l,s,a,o,u,f,c,d,m,h;const _=n[4].default,g=De(_,n,n[3],null);return{c(){e=F("div"),t=F("header"),r=F("button"),i=Pe("svg"),l=Pe("path"),s=Z(),a=F("span"),o=Re(n[1]),u=Z(),f=F("div"),g&&g.c(),k(l,"stroke","currentColor"),k(l,"stroke-linecap","round"),k(l,"stroke-linejoin","round"),k(l,"stroke-width","1.5"),k(l,"d","M10.75 8.75L14.25 12L10.75 15.25"),k(i,"class","header__icon svelte-16s3nta"),k(i,"width","24"),k(i,"height","24"),k(i,"fill","none"),k(i,"viewBox","0 0 24 24"),k(a,"class","field-group__name svelte-16s3nta"),k(r,"class","header__action svelte-16s3nta"),k(t,"class","header svelte-16s3nta"),k(f,"class","content svelte-16s3nta"),k(e,"class",c="field-group "+(n[0]?"collapsed":"")+" svelte-16s3nta")},m(p,v){L(p,e,v),O(e,t),O(t,r),O(r,i),O(i,l),O(r,s),O(r,a),O(a,o),O(e,u),O(e,f),g&&g.m(f,null),d=!0,m||(h=pe(r,"click",n[2]),m=!0)},p(p,[v]){(!d||v&2)&&Ge(o,p[1]),g&&g.p&&(!d||v&8)&&Fe(g,_,p,p[3],d?ze(_,p[3],v,null):Oe(p[3]),null),(!d||v&1&&c!==(c="field-group "+(p[0]?"collapsed":"")+" svelte-16s3nta"))&&k(e,"class",c)},i(p){d||(y(g,p),d=!0)},o(p){E(g,p),d=!1},d(p){p&&M(e),g&&g.d(p),m=!1,h()}}}function hh(n,e,t){let{$$slots:r={},$$scope:i}=e,{name:l}=e,{collapsed:s=!1}=e;function a(){t(0,s=!s)}return n.$$set=o=>{"name"in o&&t(1,l=o.name),"collapsed"in o&&t(0,s=o.collapsed),"$$scope"in o&&t(3,i=o.$$scope)},[s,l,a,i,r]}class Ll extends fe{constructor(e){super(),ue(this,e,hh,dh,le,{name:1,collapsed:0})}}function mh(n){let e,t,r,i;return e=new He({props:{key:"sampler0",value:n[0],params:{options:n[2],disabled:n[3]}}}),e.$on("change",n[8]),r=new He({props:{key:"sampler1",value:n[1],params:{options:n[2],disabled:n[3]}}}),r.$on("change",n[9]),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment)},m(l,s){P(e,l,s),L(l,t,s),P(r,l,s),i=!0},p(l,s){const a={};s&1&&(a.value=l[0]),s&12&&(a.params={options:l[2],disabled:l[3]}),e.$set(a);const o={};s&2&&(o.value=l[1]),s&12&&(o.params={options:l[2],disabled:l[3]}),r.$set(o)},i(l){i||(y(e.$$.fragment,l),y(r.$$.fragment,l),i=!0)},o(l){E(e.$$.fragment,l),E(r.$$.fragment,l),i=!1},d(l){D(e,l),l&&M(t),D(r,l)}}}function gh(n){let e,t,r,i,l,s;return e=new He({props:{key:"type",value:n[4],params:{options:n[6]}}}),e.$on("change",n[10]),r=new He({props:{key:"threshold",value:n[5],params:{step:.01,min:0,max:1}}}),r.$on("change",n[11]),l=new He({props:{key:"switch",value:n[12],params:{label:`switch ${Math.round(n[5])>0?"<":">"}`}}}),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment),i=Z(),z(l.$$.fragment)},m(a,o){P(e,a,o),L(a,t,o),P(r,a,o),L(a,i,o),P(l,a,o),s=!0},p(a,o){const u={};o&16&&(u.value=a[4]),e.$set(u);const f={};o&32&&(f.value=a[5]),r.$set(f);const c={};o&32&&(c.value=a[12]),o&32&&(c.params={label:`switch ${Math.round(a[5])>0?"<":">"}`}),l.$set(c)},i(a){s||(y(e.$$.fragment,a),y(r.$$.fragment,a),y(l.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),E(r.$$.fragment,a),E(l.$$.fragment,a),s=!1},d(a){D(e,a),a&&M(t),D(r,a),a&&M(i),D(l,a)}}}function ph(n){let e,t,r,i;return e=new Ll({props:{name:"monitors",$$slots:{default:[mh]},$$scope:{ctx:n}}}),r=new Ll({props:{name:"transition",$$slots:{default:[gh]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment)},m(l,s){P(e,l,s),L(l,t,s),P(r,l,s),i=!0},p(l,[s]){const a={};s&16399&&(a.$$scope={dirty:s,ctx:l}),e.$set(a);const o={};s&16432&&(o.$$scope={dirty:s,ctx:l}),r.$set(o)},i(l){i||(y(e.$$.fragment,l),y(r.$$.fragment,l),i=!0)},o(l){E(e.$$.fragment,l),E(r.$$.fragment,l),i=!1},d(l){D(e,l),l&&M(t),D(r,l)}}}function _h(n,e,t){let r,i,l,s,a;ne(n,Fn,p=>t(13,i=p)),ne(n,Ke,p=>t(7,l=p)),ne(n,Rn,p=>t(4,s=p)),ne(n,Cn,p=>t(5,a=p));let o=!1,u=-1,f=-1;const c=Object.keys(Br).map(p=>{const v=Br[p],A=v.name?v.name:p;return{value:p,label:A}});s||we(Rn,s=c[0].value,s);const d=p=>{t(0,u=Number(p.detail))},m=p=>{t(1,f=Number(p.detail))},h=p=>{we(Rn,s=p.detail,s)},_=p=>we(Cn,a=p.detail,a),g=()=>we(Cn,a=1-Math.round(a),a);return n.$$.update=()=>{n.$$.dirty&128&&t(2,r=l.map((p,v)=>({label:`monitor ${v+1}`,value:p.id})).filter(p=>l.find(A=>A.id===p.value).selected!=="output")),n.$$.dirty&7&&(t(3,o=r.length===0),r.length===0?(t(2,r=[{label:"No monitor available.",value:-1}]),t(0,u=r[0].value),t(1,f=r[0].value)):(u<0&&t(0,u=r[0].value),f<0&&t(1,f=r.length>1?r[1].value:-1)),we(Fn,i=[u,f],i))},[u,f,r,o,s,a,c,l,d,m,h,_,g]}class bh extends fe{constructor(e){super(),ue(this,e,_h,ph,le,{})}}function Nl(n){let e,t;return e=new He({props:{key:"aspectRatio",value:n[0].aspectRatio,params:{step:.01}}}),e.$on("change",n[8]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&1&&(l.value=r[0].aspectRatio),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Pl(n){let e,t;return e=new He({props:{key:"zoom",value:n[0].scale,params:{step:.01}}}),e.$on("change",n[9]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&1&&(l.value=r[0].scale),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Dl(n){let e,t;return e=new He({props:{key:"preset",value:n[0].preset,params:{options:Mu}}}),e.$on("change",n[10]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&1&&(l.value=r[0].preset),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function zl(n){let e,t;return e=new He({props:{key:"pixelRatio",value:Number(n[0].pixelRatio),params:{step:.1}}}),e.$on("change",n[11]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&1&&(l.value=Number(r[0].pixelRatio)),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Fl(n){let e,t;return e=new bh({}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function wh(n){let e,t,r,i,l,s,a,o,u,f;e=new He({props:{key:"dimensions",value:[n[0].width,n[0].height],params:{step:1,suffix:"px",locked:!1,disabled:!n[1]}}}),e.$on("change",n[5]),r=new He({props:{key:"canvasSize",value:n[0].resizing,params:{options:n[6]}}}),r.$on("change",n[7]);let c=n[0].resizing===ve.ASPECT_RATIO&&Nl(n),d=n[0].resizing===ve.SCALE&&Pl(n),m=n[0].resizing===ve.PRESET&&Dl(n),h=n[0].resizing!==ve.PRESET&&zl(n),_=n[3]>1&&n[4].length>1&&Fl();return{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment),i=Z(),c&&c.c(),l=Z(),d&&d.c(),s=Z(),m&&m.c(),a=Z(),h&&h.c(),o=Z(),_&&_.c(),u=Se()},m(g,p){P(e,g,p),L(g,t,p),P(r,g,p),L(g,i,p),c&&c.m(g,p),L(g,l,p),d&&d.m(g,p),L(g,s,p),m&&m.m(g,p),L(g,a,p),h&&h.m(g,p),L(g,o,p),_&&_.m(g,p),L(g,u,p),f=!0},p(g,[p]){const v={};p&1&&(v.value=[g[0].width,g[0].height]),p&2&&(v.params={step:1,suffix:"px",locked:!1,disabled:!g[1]}),e.$set(v);const A={};p&1&&(A.value=g[0].resizing),r.$set(A),g[0].resizing===ve.ASPECT_RATIO?c?(c.p(g,p),p&1&&y(c,1)):(c=Nl(g),c.c(),y(c,1),c.m(l.parentNode,l)):c&&(de(),E(c,1,1,()=>{c=null}),he()),g[0].resizing===ve.SCALE?d?(d.p(g,p),p&1&&y(d,1)):(d=Pl(g),d.c(),y(d,1),d.m(s.parentNode,s)):d&&(de(),E(d,1,1,()=>{d=null}),he()),g[0].resizing===ve.PRESET?m?(m.p(g,p),p&1&&y(m,1)):(m=Dl(g),m.c(),y(m,1),m.m(a.parentNode,a)):m&&(de(),E(m,1,1,()=>{m=null}),he()),g[0].resizing!==ve.PRESET?h?(h.p(g,p),p&1&&y(h,1)):(h=zl(g),h.c(),y(h,1),h.m(o.parentNode,o)):h&&(de(),E(h,1,1,()=>{h=null}),he()),g[3]>1&&g[4].length>1?_?p&24&&y(_,1):(_=Fl(),_.c(),y(_,1),_.m(u.parentNode,u)):_&&(de(),E(_,1,1,()=>{_=null}),he())},i(g){f||(y(e.$$.fragment,g),y(r.$$.fragment,g),y(c),y(d),y(m),y(h),y(_),f=!0)},o(g){E(e.$$.fragment,g),E(r.$$.fragment,g),E(c),E(d),E(m),E(h),E(_),f=!1},d(g){D(e,g),g&&M(t),D(r,g),g&&M(i),c&&c.d(g),g&&M(l),d&&d.d(g),g&&M(s),m&&m.d(g),g&&M(a),h&&h.d(g),g&&M(o),_&&_.d(g),g&&M(u)}}}function vh(n,e,t){let r,i,l,s,a;ne(n,Ne,p=>t(0,i=p)),ne(n,zn,p=>t(2,l=p)),ne(n,si,p=>t(3,s=p)),ne(n,Ke,p=>t(4,a=p));let o=i.width,u=i.height;function f(p){const[v,A]=p.detail;(o!==v||u!==A)&&(o=v,u=A,Ne.update(I=>({...I,width:v,height:A})))}let c=Object.values(ve);const d=p=>{const v=p.detail;let A=1;v===ve.ASPECT_RATIO&&(A=i.width/i.height),we(zn,l.pixelsPerInch=v===ve.PRESET?300:72,l),Ne.update(T=>({...T,resizing:v,aspectRatio:A}))},m=p=>{we(Ne,i.aspectRatio=p.detail,i)},h=p=>{we(Ne,i.scale=p.detail,i)},_=p=>{we(Ne,i.preset=p.detail,i)},g=p=>we(Ne,i.pixelRatio=p.detail,i);return n.$$.update=()=>{if(n.$$.dirty&1&&t(1,r=[ve.FIXED,ve.SCALE].includes(i.resizing)),n.$$.dirty&1&&i.resizing===ve.PRESET){const{preset:p}=i,[v,A]=hs(p,{pixelsPerInch:300});Ne.update(T=>({...T,width:v,height:A}))}},[i,r,l,s,a,f,c,d,m,h,_,g]}class yh extends fe{constructor(e){super(),ue(this,e,vh,wh,le,{})}}function Ol(n,e,t){const r=n.slice();return r[19]=e[t],r[20]=e,r[21]=t,r}function Ul(n){let e,t;return e=new yh({}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function jl(n){let e,t,r=typeof ft=="object"&&kh(n);return{c(){r&&r.c(),e=Se()},m(i,l){r&&r.m(i,l),L(i,e,l),t=!0},p(i,l){typeof ft=="object"&&r.p(i,l)},i(i){t||(y(r),t=!0)},o(i){E(r),t=!1},d(i){r&&r.d(i),i&&M(e)}}}function kh(n){let e,t,r,i,l=n[2]&&Hl(n),s=n[6].duration&&n[6].duration>0&&n[2]&&Gl(n),a=Object.keys(n[7]),o=[];for(let f=0;f<a.length;f+=1)o[f]=Wl(Ol(n,a,f));const u=f=>E(o[f],1,1,()=>{o[f]=null});return{c(){l&&l.c(),e=Z(),s&&s.c(),t=Z();for(let f=0;f<o.length;f+=1)o[f].c();r=Se()},m(f,c){l&&l.m(f,c),L(f,e,c),s&&s.m(f,c),L(f,t,c);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(f,c);L(f,r,c),i=!0},p(f,c){if(f[2]?l?(l.p(f,c),c&4&&y(l,1)):(l=Hl(f),l.c(),y(l,1),l.m(e.parentNode,e)):l&&(de(),E(l,1,1,()=>{l=null}),he()),f[6].duration&&f[6].duration>0&&f[2]?s?(s.p(f,c),c&68&&y(s,1)):(s=Gl(f),s.c(),y(s,1),s.m(t.parentNode,t)):s&&(de(),E(s,1,1,()=>{s=null}),he()),c&176){a=Object.keys(f[7]);let d;for(d=0;d<a.length;d+=1){const m=Ol(f,a,d);o[d]?(o[d].p(m,c),y(o[d],1)):(o[d]=Wl(m),o[d].c(),y(o[d],1),o[d].m(r.parentNode,r))}for(de(),d=a.length;d<o.length;d+=1)u(d);he()}},i(f){if(!i){y(l),y(s);for(let c=0;c<a.length;c+=1)y(o[c]);i=!0}},o(f){E(l),E(s),o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)E(o[c]);i=!1},d(f){l&&l.d(f),f&&M(e),s&&s.d(f),f&&M(t),At(o,f),f&&M(r)}}}function Hl(n){let e,t;return e=new He({props:{key:"framerate",value:isFinite(n[6].fps)?n[6].fps:60,params:{disabled:!0}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&64&&(l.value=isFinite(r[6].fps)?r[6].fps:60),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Gl(n){let e,t;return e=new He({props:{key:"duration",value:n[6].duration,params:{disabled:!0,suffix:"s"}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&64&&(l.value=r[6].duration),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Vl(n){let e,t,r;function i(o){n[15](o,n[19])}function l(){return n[16](n[19])}function s(...o){return n[17](n[19],...o)}let a={context:n[4],key:n[19],value:n[7][n[19]].value,type:n[7][n[19]].type};return n[7][n[19]].params!==void 0&&(a.params=n[7][n[19]].params),e=new He({props:a}),ke.push(()=>et(e,"params",i)),e.$on("click",l),e.$on("change",s),{c(){z(e.$$.fragment)},m(o,u){P(e,o,u),r=!0},p(o,u){n=o;const f={};u&16&&(f.context=n[4]),u&128&&(f.key=n[19]),u&128&&(f.value=n[7][n[19]].value),u&128&&(f.type=n[7][n[19]].type),!t&&u&128&&(t=!0,f.params=n[7][n[19]].params,xe(()=>t=!1)),e.$set(f)},i(o){r||(y(e.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),r=!1},d(o){D(e,o)}}}function Wl(n){let e,t,r=!n[7][n[19]].hidden&&Vl(n);return{c(){r&&r.c(),e=Se()},m(i,l){r&&r.m(i,l),L(i,e,l),t=!0},p(i,l){i[7][i[19]].hidden?r&&(de(),E(r,1,1,()=>{r=null}),he()):r?(r.p(i,l),l&128&&y(r,1)):(r=Vl(i),r.c(),y(r,1),r.m(e.parentNode,e))},i(i){t||(y(r),t=!0)},o(i){E(r),t=!1},d(i){r&&r.d(i),i&&M(e)}}}function Eh(n){let e,t,r,i=n[8]&&n[2]&&Ul(),l=n[6]&&jl(n);return{c(){i&&i.c(),e=Z(),l&&l.c(),t=Se()},m(s,a){i&&i.m(s,a),L(s,e,a),l&&l.m(s,a),L(s,t,a),r=!0},p(s,a){s[8]&&s[2]?i?a&260&&y(i,1):(i=Ul(),i.c(),y(i,1),i.m(e.parentNode,e)):i&&(de(),E(i,1,1,()=>{i=null}),he()),s[6]?l?(l.p(s,a),a&64&&y(l,1)):(l=jl(s),l.c(),y(l,1),l.m(t.parentNode,t)):l&&(de(),E(l,1,1,()=>{l=null}),he())},i(s){r||(y(i),y(l),r=!0)},o(s){E(i),E(l),r=!1},d(s){i&&i.d(s),s&&M(e),l&&l.d(s),s&&M(t)}}}function ql(n){let e,t;return e=new to({props:{value:n[3],permanent:!0,border:!0,options:n[9]}}),e.$on("change",n[14]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&8&&(l.value=r[3]),i&512&&(l.options=r[9]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Ah(n){let e,t,r=n[9].length>1&&ql(n);return{c(){e=F("div"),r&&r.c(),k(e,"slot","header-right")},m(i,l){L(i,e,l),r&&r.m(e,null),t=!0},p(i,l){i[9].length>1?r?(r.p(i,l),l&512&&y(r,1)):(r=ql(i),r.c(),y(r,1),r.m(e,null)):r&&(de(),E(r,1,1,()=>{r=null}),he())},i(i){t||(y(r),t=!0)},o(i){E(r),t=!1},d(i){i&&M(e),r&&r.d()}}}function Sh(n){let e,t;return e=new Vn({props:{mID:n[0],hasHeader:n[1],name:"Parameters",slug:"params",$$slots:{"header-right":[Ah],default:[Eh]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,[i]){const l={};i&1&&(l.mID=r[0]),i&2&&(l.hasHeader=r[1]),i&4195324&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}const Mn=st([]);let Th=0;function Ch(n,e,t){let r,i,l=ae,s,a,o;ne(n,Mn,C=>t(11,i=C)),ne(n,ft,C=>t(5,s=C)),ne(n,Dt,C=>t(12,a=C)),ne(n,Ke,C=>t(13,o=C)),n.$$.on_destroy.push(()=>l());let{mID:u}=e,{hasHeader:f=!0}=e,{output:c=!0}=e,d=Th++,m=d,h,_,g={},p,v;Ft(()=>{we(Mn,i=[...i,{id:d}],i)}),bt(()=>{we(Mn,i=i.filter(C=>C.id!==d),i)}),Ke.subscribe(C=>{t(10,p=o[Math.min(m,o.length-1)]),t(4,_=p?p.selected:void 0)});const A=C=>t(3,m=C.detail);function T(C,N){n.$$.not_equal(g[N].params,C)&&(g[N].params=C,t(7,g),t(12,a),t(4,_),t(5,s))}const I=C=>{we(ft,s[_][C].value._refresh=!0,s)},H=(C,N)=>{we(ft,s[_][C].value=N.detail,s),typeof s[_][C].onChange=="function"&&s[_][C].onChange(s[_][C])};return n.$$set=C=>{"mID"in C&&t(0,u=C.mID),"hasHeader"in C&&t(1,f=C.hasHeader),"output"in C&&t(2,c=C.output)},n.$$.update=()=>{n.$$.dirty&10240&&t(9,r=[...o.map((C,N)=>({value:N,label:`monitor ${N+1}`})),...i.length>1?[{value:"output",label:"output"}]:[]]),n.$$.dirty&4144&&(t(6,h=a[_]),t(7,g=s[_])),n.$$.dirty&3080&&t(8,v=p&&p.selected==="output"||i.length===1||m==="output")},[u,f,c,m,_,s,h,g,v,r,p,i,a,o,A,T,I,H]}class nr extends fe{constructor(e){super(),ue(this,e,Ch,Sh,le,{mID:0,hasHeader:1,output:2})}}const Rh=Object.freeze(Object.defineProperty({__proto__:null,default:nr,params:Mn},Symbol.toStringTag,{value:"Module"}));function Ih(n){let e,t,r,i,l,s;return t=new nr({props:{output:n[1]}}),l=new Zt({props:{key:"h"}}),l.$on("trigger",n[6]),{c(){e=F("div"),z(t.$$.fragment),i=Z(),z(l.$$.fragment),k(e,"class","container svelte-17c95zk"),k(e,"style",r=`width: ${n[2]};`),q(e,"hidden",!n[3]),q(e,"align-left",n[0]==="left"),q(e,"align-right",n[0]==="right")},m(a,o){L(a,e,o),P(t,e,null),L(a,i,o),P(l,a,o),s=!0},p(a,[o]){const u={};o&2&&(u.output=a[1]),t.$set(u),(!s||o&4&&r!==(r=`width: ${a[2]};`))&&k(e,"style",r),(!s||o&8)&&q(e,"hidden",!a[3]),(!s||o&1)&&q(e,"align-left",a[0]==="left"),(!s||o&1)&&q(e,"align-right",a[0]==="right")},i(a){s||(y(t.$$.fragment,a),y(l.$$.fragment,a),s=!0)},o(a){E(t.$$.fragment,a),E(l.$$.fragment,a),s=!1},d(a){a&&M(e),D(t),a&&M(i),D(l,a)}}}function Mh(n,e,t){let r,i,{size:l=.3}=e,{align:s="right"}=e,{output:a=!1}=e,{hidden:o=!1}=e;const u=()=>t(3,r=!r);return n.$$set=f=>{"size"in f&&t(4,l=f.size),"align"in f&&t(0,s=f.align),"output"in f&&t(1,a=f.output),"hidden"in f&&t(5,o=f.hidden)},n.$$.update=()=>{n.$$.dirty&32&&t(3,r=!o),n.$$.dirty&16&&t(2,i=typeof l=="number"?`${l*100}%`:l)},[s,a,i,r,l,o,u]}class Bh extends fe{constructor(e){super(),ue(this,e,Mh,Ih,le,{size:4,align:0,output:1,hidden:5})}}function Lh(n){let e;const t=n[1].default,r=De(t,n,n[2],null);return{c(){r&&r.c()},m(i,l){r&&r.m(i,l),e=!0},p(i,l){r&&r.p&&(!e||l&4)&&Fe(r,t,i,i[2],e?ze(t,i[2],l,null):Oe(i[2]),null)},i(i){e||(y(r,i),e=!0)},o(i){E(r,i),e=!1},d(i){r&&r.d(i)}}}function Nh(n){let e,t;return e=new rr({props:{size:n[0],type:"column",$$slots:{default:[Lh]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,[i]){const l={};i&1&&(l.size=r[0]),i&4&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Ph(n,e,t){let{$$slots:r={},$$scope:i}=e,{size:l=1}=e;return n.$$set=s=>{"size"in s&&t(0,l=s.size),"$$scope"in s&&t(2,i=s.$$scope)},[l,r,i]}class en extends fe{constructor(e){super(),ue(this,e,Ph,Nh,le,{size:0})}}function Dh(n){let e;const t=n[1].default,r=De(t,n,n[2],null);return{c(){r&&r.c()},m(i,l){r&&r.m(i,l),e=!0},p(i,l){r&&r.p&&(!e||l&4)&&Fe(r,t,i,i[2],e?ze(t,i[2],l,null):Oe(i[2]),null)},i(i){e||(y(r,i),e=!0)},o(i){E(r,i),e=!1},d(i){r&&r.d(i)}}}function zh(n){let e,t;return e=new rr({props:{size:n[0],type:"row",$$slots:{default:[Dh]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,[i]){const l={};i&1&&(l.size=r[0]),i&4&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Fh(n,e,t){let{$$slots:r={},$$scope:i}=e,{size:l=1}=e;return n.$$set=s=>{"size"in s&&t(0,l=s.size),"$$scope"in s&&t(2,i=s.$$scope)},[l,r,i]}class Un extends fe{constructor(e){super(),ue(this,e,Fh,zh,le,{size:0})}}function Oh(n){let e,t;return e=new pn({props:{hasHeader:!1}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Uh(n){let e,t,r,i;const l=[Hh,jh],s=[];function a(o,u){return o[2].position==="fixed"?0:1}return e=a(n),t=s[e]=l[e](n),{c(){t.c(),r=Se()},m(o,u){s[e].m(o,u),L(o,r,u),i=!0},p(o,u){let f=e;e=a(o),e===f?s[e].p(o,u):(de(),E(s[f],1,1,()=>{s[f]=null}),he(),t=s[e],t?t.p(o,u):(t=s[e]=l[e](o),t.c()),y(t,1),t.m(r.parentNode,r))},i(o){i||(y(t),i=!0)},o(o){E(t),i=!1},d(o){s[e].d(o),o&&M(r)}}}function jh(n){let e,t,r,i;return e=new pn({props:{hasHeader:!1,sketchKey:n[1]}}),r=new Bh({props:{output:n[2].output,align:n[2].align,size:n[2].size,hidden:n[2].hidden}}),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment)},m(l,s){P(e,l,s),L(l,t,s),P(r,l,s),i=!0},p(l,s){const a={};s&2&&(a.sketchKey=l[1]),e.$set(a);const o={};s&4&&(o.output=l[2].output),s&4&&(o.align=l[2].align),s&4&&(o.size=l[2].size),s&4&&(o.hidden=l[2].hidden),r.$set(o)},i(l){i||(y(e.$$.fragment,l),y(r.$$.fragment,l),i=!0)},o(l){E(e.$$.fragment,l),E(r.$$.fragment,l),i=!1},d(l){D(e,l),l&&M(t),D(r,l)}}}function Hh(n){let e,t;return e=new Un({props:{$$slots:{default:[Xh]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&2054&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Gh(n){let e,t,r,i;return e=new en({props:{size:n[2].size,$$slots:{default:[Wh]},$$scope:{ctx:n}}}),r=new en({props:{size:1-n[2].size,$$slots:{default:[qh]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment)},m(l,s){P(e,l,s),L(l,t,s),P(r,l,s),i=!0},p(l,s){const a={};s&4&&(a.size=l[2].size),s&2048&&(a.$$scope={dirty:s,ctx:l}),e.$set(a);const o={};s&4&&(o.size=1-l[2].size),s&2050&&(o.$$scope={dirty:s,ctx:l}),r.$set(o)},i(l){i||(y(e.$$.fragment,l),y(r.$$.fragment,l),i=!0)},o(l){E(e.$$.fragment,l),E(r.$$.fragment,l),i=!1},d(l){D(e,l),l&&M(t),D(r,l)}}}function Vh(n){let e,t,r,i;return e=new en({props:{size:1-n[2].size,$$slots:{default:[Kh]},$$scope:{ctx:n}}}),r=new en({props:{size:n[2].size,$$slots:{default:[Yh]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment)},m(l,s){P(e,l,s),L(l,t,s),P(r,l,s),i=!0},p(l,s){const a={};s&4&&(a.size=1-l[2].size),s&2050&&(a.$$scope={dirty:s,ctx:l}),e.$set(a);const o={};s&4&&(o.size=l[2].size),s&2048&&(o.$$scope={dirty:s,ctx:l}),r.$set(o)},i(l){i||(y(e.$$.fragment,l),y(r.$$.fragment,l),i=!0)},o(l){E(e.$$.fragment,l),E(r.$$.fragment,l),i=!1},d(l){D(e,l),l&&M(t),D(r,l)}}}function Wh(n){let e,t;return e=new nr({props:{hasHeader:!1,output}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function qh(n){let e,t;return e=new pn({props:{hasHeader:!1,sketchKey:n[1]}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&2&&(l.sketchKey=r[1]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Kh(n){let e,t;return e=new pn({props:{hasHeader:!1,sketchKey:n[1]}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&2&&(l.sketchKey=r[1]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Yh(n){let e,t;return e=new nr({props:{hasHeader:!1,output}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Xh(n){let e,t,r,i;const l=[Vh,Gh],s=[];function a(o,u){return o[2].align==="right"?0:1}return e=a(n),t=s[e]=l[e](n),{c(){t.c(),r=Se()},m(o,u){s[e].m(o,u),L(o,r,u),i=!0},p(o,u){let f=e;e=a(o),e===f?s[e].p(o,u):(de(),E(s[f],1,1,()=>{s[f]=null}),he(),t=s[e],t?t.p(o,u):(t=s[e]=l[e](o),t.c()),y(t,1),t.m(r.parentNode,r))},i(o){i||(y(t),i=!0)},o(o){E(t),i=!1},d(o){s[e].d(o),o&&M(r)}}}function Jh(n){let e,t,r,i;const l=[Uh,Oh],s=[];function a(o,u){return o[0]?0:1}return e=a(n),t=s[e]=l[e](n),{c(){t.c(),r=Se()},m(o,u){s[e].m(o,u),L(o,r,u),i=!0},p(o,[u]){let f=e;e=a(o),e===f?s[e].p(o,u):(de(),E(s[f],1,1,()=>{s[f]=null}),he(),t=s[e],t?t.p(o,u):(t=s[e]=l[e](o),t.c()),y(t,1),t.m(r.parentNode,r))},i(o){i||(y(t),i=!0)},o(o){E(t),i=!1},d(o){s[e].d(o),o&&M(r)}}}function Qh(n,e,t){let r,i,l,s,a,o;ne(n,Dt,h=>t(6,l=h)),ne(n,zt,h=>t(7,s=h)),ne(n,Dn,h=>t(8,a=h)),ne(n,pt,h=>t(9,o=h)),console.log("Made with Fragment. https://fragment.tools");let u,f,c,d={position:"float",align:"right",size:.3,output:!1,hidden:!1},m=d;return bt(()=>{f&&c&&c.removeChild(f)}),n.$$.update=()=>{if(n.$$.dirty&896&&t(1,r=o.previewing&&a?a:s[0]),n.$$.dirty&66&&t(5,i=l[r]),n.$$.dirty&57&&i){i.buildConfig&&Bu(i.buildConfig);const h=i.buildConfig?i.buildConfig:{};t(0,u=h.gui),u&&typeof u=="object"&&t(2,m={...d,...u});const{styles:_=""}=h;_!==""&&(t(4,c=document.getElementsByTagName("head")[0]),f&&c.removeChild(f),t(3,f=document.createElement("style")),f.setAttribute("type","text/css"),f.appendChild(document.createTextNode(_)),c.appendChild(f))}},[u,r,m,f,c,i,l,s,a,o]}class vo extends fe{constructor(e){super(),ue(this,e,Qh,Jh,le,{})}}function Zh(n){let e,t;return e=new vo({}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function $h(n,e,t){let r;ne(n,Ne,l=>t(0,r=l));let i=r;return bt(()=>{we(Ne,r=i,r)}),[]}class xh extends fe{constructor(e){super(),ue(this,e,$h,Zh,le,{})}}function Kl(n,e,t){const r=n.slice();return r[28]=e[t],r}function em(n){let e;const t=n[20].default,r=De(t,n,n[19],null);return{c(){r&&r.c()},m(i,l){r&&r.m(i,l),e=!0},p(i,l){r&&r.p&&(!e||l&524288)&&Fe(r,t,i,i[19],e?ze(t,i[19],l,null):Oe(i[19]),null)},i(i){e||(y(r,i),e=!0)},o(i){E(r,i),e=!1},d(i){r&&r.d(i)}}}function tm(n){let e=[],t=new Map,r,i,l=n[0].children;const s=a=>a[28].id;for(let a=0;a<l.length;a+=1){let o=Kl(n,l,a),u=s(o);t.set(u,e[a]=Yl(u,o))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=Se()},m(a,o){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(a,o);L(a,r,o),i=!0},p(a,o){o&1&&(l=a[0].children,de(),e=Ca(e,o,s,1,a,l,t,r.parentNode,Ta,Yl,r,Kl),he())},i(a){if(!i){for(let o=0;o<l.length;o+=1)y(e[o]);i=!0}},o(a){for(let o=0;o<e.length;o+=1)E(e[o]);i=!1},d(a){for(let o=0;o<e.length;o+=1)e[o].d(a);a&&M(r)}}}function nm(n){let e,t;return e=new xh({}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function rm(n){let e,t;return e=new Wn({props:{name:n[28].name,mID:n[28].mID,hasHeader:n[28].hasHeader}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&1&&(l.name=r[28].name),i&1&&(l.mID=r[28].mID),i&1&&(l.hasHeader=r[28].hasHeader),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function im(n){let e,t;return e=new rr({props:{type:n[28].type,size:n[28].size,tree:n[28]}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&1&&(l.type=r[28].type),i&1&&(l.size=r[28].size),i&1&&(l.tree=r[28]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Yl(n,e){let t,r,i,l,s;const a=[im,rm],o=[];function u(f,c){return f[28].type==="column"||f[28].type==="row"?0:f[28].type==="module"?1:-1}return~(r=u(e))&&(i=o[r]=a[r](e)),{key:n,first:null,c(){t=Se(),i&&i.c(),l=Se(),this.first=t},m(f,c){L(f,t,c),~r&&o[r].m(f,c),L(f,l,c),s=!0},p(f,c){e=f;let d=r;r=u(e),r===d?~r&&o[r].p(e,c):(i&&(de(),E(o[d],1,1,()=>{o[d]=null}),he()),~r?(i=o[r],i?i.p(e,c):(i=o[r]=a[r](e),i.c()),y(i,1),i.m(l.parentNode,l)):i=null)},i(f){s||(y(i),s=!0)},o(f){E(i),s=!1},d(f){f&&M(t),~r&&o[r].d(f),f&&M(l)}}}function Xl(n){let e,t;return e=new _u({props:{isRoot:n[11],moduleName:n[7][0].name,vertical:n[4]<300}}),e.$on("change",n[16]),e.$on("add-row",n[14]),e.$on("add-column",n[13]),e.$on("delete",n[15]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&128&&(l.moduleName=r[7][0].name),i&16&&(l.vertical=r[4]<300),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function lm(n){let e,t;return e=new vu({props:{direction:n[2]?"vertical":"horizontal",current:n[1],parent:n[9]}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,i){const l={};i&4&&(l.direction=r[2]?"vertical":"horizontal"),i&2&&(l.current=r[1]),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function sm(n){let e,t,r,i,l,s,a,o,u;const f=[nm,tm,em],c=[];function d(_,g){return g&1&&(t=null),_[11]&&_[8].previewing?0:(t==null&&(t=!!(_[0]&&Array.isArray(_[0].children)&&_[0].children.length>0)),t?1:2)}r=d(n,-1),i=c[r]=f[r](n);let m=n[8].editing&&(n[7].length===1&&n[7][0].type==="module"||n[11])&&Xl(n),h=!n[11]&&lm(n);return{c(){e=F("div"),i.c(),l=Z(),m&&m.c(),a=Z(),h&&h.c(),o=Se(),k(e,"style",n[3]),k(e,"class","svelte-18uhv6r"),xt(()=>n[22].call(e)),q(e,"column",n[2]),q(e,"root",n[11]),q(e,"row",n[6]),q(e,"minimized",n[5])},m(_,g){L(_,e,g),c[r].m(e,null),O(e,l),m&&m.m(e,null),n[21](e),s=ts(e,n[22].bind(e)),L(_,a,g),h&&h.m(_,g),L(_,o,g),u=!0},p(_,[g]){let p=r;r=d(_,g),r===p?c[r].p(_,g):(de(),E(c[p],1,1,()=>{c[p]=null}),he(),i=c[r],i?i.p(_,g):(i=c[r]=f[r](_),i.c()),y(i,1),i.m(e,l)),_[8].editing&&(_[7].length===1&&_[7][0].type==="module"||_[11])?m?(m.p(_,g),g&384&&y(m,1)):(m=Xl(_),m.c(),y(m,1),m.m(e,null)):m&&(de(),E(m,1,1,()=>{m=null}),he()),(!u||g&8)&&k(e,"style",_[3]),(!u||g&4)&&q(e,"column",_[2]),(!u||g&64)&&q(e,"row",_[6]),(!u||g&32)&&q(e,"minimized",_[5]),_[11]||h.p(_,g)},i(_){u||(y(i),y(m),y(h),u=!0)},o(_){E(i),E(m),E(h),u=!1},d(_){_&&M(e),c[r].d(),m&&m.d(),n[21](null),s(),_&&M(a),h&&h.d(_),_&&M(o)}}}let Xt=0;function om(n,e,t){let r,i,l,s,a,o;ne(n,pt,j=>t(8,o=j));let{$$slots:u={},$$scope:f}=e,{size:c=1}=e,{type:d="column"}=e,{tree:m={children:[]}}=e,h=Si("parent")?Nn("parent"):null,_=Si("depth")?Nn("depth")+1:0,g=st({});ne(n,g,j=>t(23,s=j)),mr("depth",_),mr("module",g);let p=h===null,v=st([]);ne(n,v,j=>t(7,a=j));let A="";function T({id:j,parent:$=null,root:oe=!1,node:re=null,depth:te,size:ye=1,minimized:Me=!1,type:Be,children:rt=[]}){return{id:j,root:oe,node:re,depth:te,size:ye,minimized:Me,parent:$?$.id:null,type:Be,children:rt}}let I=T({id:isNaN(m.id)?Xt++:m.id,root:p,depth:_,size:c,parent:h,type:d});Xt=Math.max(Xt,isNaN(I.id)?0:I.id+1);const H={id:I.id,children:v,registerChild:j=>{we(v,a=[...a,j],a),bt(()=>{we(v,a=a.filter($=>$!==j),a)})}};mr("parent",H),h&&h.registerChild(I);function C(j){const $=j===d,oe=T({id:Xt++,parent:$?h:H,depth:$?_:_+1,type:j,children:[{mID:tu(),type:"module"}]});if($)if(p){const re=T({id:Xt++,depth:oe.depth,type:oe.type,children:I.children});t(1,I.children=[re,oe],I),t(1,I.type=I.type==="column"?"row":"column",I),za(I)}else Fa(I,oe);else a.length===1&&a[0].type==="module"?(Da(I,[...a.map((re,te)=>T({id:Xt++,type:d==="row"?"column":"row",depth:_+1,children:[re]})),oe]),g.set({})):Oa(I,oe)}function N(){C("column")}function K(){C("row")}function x(){is(I),we(v,a=I.children,a)}function ie(j){const $=j.detail;we(v,a[0].name=$,a),Ua(s,{name:$})}let B;function se(j){ke[j?"unshift":"push"](()=>{I.node=j,t(1,I)})}function ee(){B=this.offsetWidth,t(4,B)}return n.$$set=j=>{"size"in j&&t(17,c=j.size),"type"in j&&t(18,d=j.type),"tree"in j&&t(0,m=j.tree),"$$scope"in j&&t(19,f=j.$$scope)},n.$$.update=()=>{if(n.$$.dirty&262144&&t(2,r=d==="column"),n.$$.dirty&4&&t(6,i=!r),n.$$.dirty&5){let j="",$="";const oe=m.children;Array.isArray(oe)&&oe.length>1?(r?(j="grid-template-rows",$=oe.map((re,te)=>`minmax(25px, ${`${re.size}fr`}) 0px`).join(" ")):(j="grid-template-columns",$=oe.map((re,te)=>`minmax(25px, ${`${re.size}fr`}) 0px`).join(" ")),t(3,A=`${j}:${$}`)):t(3,A="")}n.$$.dirty&2&&t(5,l=I.minimized)},[m,I,r,A,B,l,i,a,o,h,g,p,v,N,K,x,ie,c,d,f,u,se,ee]}class rr extends fe{constructor(e){super(),ue(this,e,om,sm,le,{size:17,type:18,tree:0})}}function am(n){let e;const t=n[3].default,r=De(t,n,n[4],null);return{c(){r&&r.c()},m(i,l){r&&r.m(i,l),e=!0},p(i,l){r&&r.p&&(!e||l&16)&&Fe(r,t,i,i[4],e?ze(t,i[4],l,null):Oe(i[4]),null)},i(i){e||(y(r,i),e=!0)},o(i){E(r,i),e=!1},d(i){r&&r.d(i)}}}function um(n){let e,t;return e=new rr({props:{tree:n[0],type:n[2],size:n[1],$$slots:{default:[am]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p(r,[i]){const l={};i&1&&(l.tree=r[0]),i&4&&(l.type=r[2]),i&2&&(l.size=r[1]),i&16&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function fm(n,e,t){let r,i,l;ne(n,nt,o=>t(0,l=o));let{$$slots:s={},$$scope:a}=e;return n.$$set=o=>{"$$scope"in o&&t(4,a=o.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(2,r=l.type),n.$$.dirty&1&&t(1,i=l.size)},[l,i,r,s,a]}class cm extends fe{constructor(e){super(),ue(this,e,fm,um,le,{})}}function dm(n){let e,t;return e=new Un({props:{size:1,$$slots:{default:[bm]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function hm(n){let e,t;return e=new vo({}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function mm(n){let e,t;return e=new Wn({props:{name:"monitor"}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function gm(n){let e,t;return e=new Wn({props:{name:"exports"}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function pm(n){let e,t;return e=new Wn({props:{name:"params"}}),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function _m(n){let e,t,r,i;return e=new Un({props:{size:1,$$slots:{default:[gm]},$$scope:{ctx:n}}}),r=new Un({props:{size:1,$$slots:{default:[pm]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment)},m(l,s){P(e,l,s),L(l,t,s),P(r,l,s),i=!0},p(l,s){const a={};s&32&&(a.$$scope={dirty:s,ctx:l}),e.$set(a);const o={};s&32&&(o.$$scope={dirty:s,ctx:l}),r.$set(o)},i(l){i||(y(e.$$.fragment,l),y(r.$$.fragment,l),i=!0)},o(l){E(e.$$.fragment,l),E(r.$$.fragment,l),i=!1},d(l){D(e,l),l&&M(t),D(r,l)}}}function bm(n){let e,t,r,i;return e=new en({props:{size:.65,$$slots:{default:[mm]},$$scope:{ctx:n}}}),r=new en({props:{size:.35,$$slots:{default:[_m]},$$scope:{ctx:n}}}),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment)},m(l,s){P(e,l,s),L(l,t,s),P(r,l,s),i=!0},p(l,s){const a={};s&32&&(a.$$scope={dirty:s,ctx:l}),e.$set(a);const o={};s&32&&(o.$$scope={dirty:s,ctx:l}),r.$set(o)},i(l){i||(y(e.$$.fragment,l),y(r.$$.fragment,l),i=!0)},o(l){E(e.$$.fragment,l),E(r.$$.fragment,l),i=!1},d(l){D(e,l),l&&M(t),D(r,l)}}}function wm(n){let e,t,r,i;const l=[hm,dm],s=[];function a(o,u){return 0}return e=a(),t=s[e]=l[e](n),{c(){t.c(),r=Se()},m(o,u){s[e].m(o,u),L(o,r,u),i=!0},p(o,u){let f=e;e=a(),e!==f&&(de(),E(s[f],1,1,()=>{s[f]=null}),he(),t=s[e],t||(t=s[e]=l[e](o),t.c()),y(t,1),t.m(r.parentNode,r))},i(o){i||(y(t),i=!0)},o(o){E(t),i=!1},d(o){s[e].d(o),o&&M(r)}}}function Jl(n){let e,t;return e=new Zt({props:{key:"Escape",type:"down"}}),e.$on("trigger",n[1]),{c(){z(e.$$.fragment)},m(r,i){P(e,r,i),t=!0},p:ae,i(r){t||(y(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function vm(n){let e,t,r,i,l;e=new cm({props:{$$slots:{default:[wm]},$$scope:{ctx:n}}});let s=!1,a=n[0].editing&&Jl(n);return{c(){z(e.$$.fragment),t=Z(),r=Z(),a&&a.c(),i=Se()},m(o,u){P(e,o,u),L(o,t,u),L(o,r,u),a&&a.m(o,u),L(o,i,u),l=!0},p(o,[u]){const f={};u&33&&(f.$$scope={dirty:u,ctx:o}),e.$set(f),o[0].editing?a?(a.p(o,u),u&1&&y(a,1)):(a=Jl(o),a.c(),y(a,1),a.m(i.parentNode,i)):a&&(de(),E(a,1,1,()=>{a=null}),he())},i(o){l||(y(e.$$.fragment,o),y(s),y(a),l=!0)},o(o){E(e.$$.fragment,o),E(s),E(a),l=!1},d(o){D(e,o),o&&M(t),o&&M(r),a&&a.d(o),o&&M(i)}}}function ym(n,e,t){let r,i,l;ne(n,pt,o=>t(0,r=o)),ne(n,Ke,o=>t(3,i=o)),ne(n,Dn,o=>t(4,l=o));function s(){we(pt,r.editing=!r.editing,r)}function a(){i.length===1&&!r.previewing&&we(Dn,l=i[0].selected,l),we(pt,r.previewing=!r.previewing,r)}return[r,s,a]}class km extends fe{constructor(e){super(),ue(this,e,ym,vm,le,{})}}function gi(n){const e=n.match(/<filepath:\/\/(.*)>/);return e&&e[1]}function Em(n,e=gi(n)){return e?n.replace(`// <filepath://${e}>`,""):n}const Ql=["attachShader"],yo=[WebGLRenderingContext,WebGL2RenderingContext];for(let n=0;n<Ql.length;n++){const e=Ql[n];yo.map(t=>t.prototype[e])}function Pr(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}function bn(n,e){yo.forEach(t=>{const r=t.prototype[n];t.prototype[n]=function(){var i=r.apply(this,arguments);return i=e.apply(this,[i,arguments])||i,i}})}const Am=35632,Sm=35633;class Tm extends Error{constructor({source:e,filename:t="",lineNumber:r,message:i=`Cannot compile ${t!==""?t:"shader"}`}={}){super(i,t,r),this.name="ShaderCompileError",this.source=e,this.lineNumber=r,this.stack=`at (${t}:${r})`}}bn("createShader",function(n,e){this.__uuid||(this.__uuid=Pr()),n.__uuid=Pr(),n.__type=e[0]});bn("attachShader",function(n,e){const t=e[0],r=e[1];r.__type===Am?t.__fragmentShader=r:r.__type===Sm&&(t.__vertexShader=r)});bn("shaderSource",function(n,e){const t=e[0],r=e[1];t.__source=r;const i=gi(r);if(i){const l=i.replace("/Users/furiouzz/Documents/2023-10-gobelins/_DEV/fragments/","");t.__filepath=i,t.__filename=l}});bn("createProgram",function(n,e){n.__uuid=Pr()});bn("compileShader",function(n,e){const t=this,r=e[0],i=r.__filename;if(!t.getShaderParameter(r,t.COMPILE_STATUS)){const{source:l,lineNumber:s,message:a}=Cm(t,r,r.__type),o=new Tm({source:l,message:a,filename:i,lineNumber:s});li(o,this.__uuid)}});function Cm(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const l=i.match(/ERROR: 0:(\d+):([\s\S]*$)/);if(l){const s=parseInt(l[1]),a=l[2],o=n.getShaderSource(e),u=Rm(o,s);return{message:a,source:u,lineNumber:s}}else return i}function Rm(n,e){const r=(gi(n)?Em(n):n).split(`
`),i=[],l=Math.max(e-6,0),s=Math.min(e+6,r.length);for(let a=l;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${r[a]}`)}return i.join(`
`)}function Im(n){return zt.subscribe(e=>{e.length>0&&Nu(e)}),[]}class Mm extends fe{constructor(e){super(),ue(this,e,Im,null,le,{})}}function Bm(n){let e,t,r,i;return e=new Mm({}),r=new km({}),{c(){z(e.$$.fragment),t=Z(),z(r.$$.fragment)},m(l,s){P(e,l,s),L(l,t,s),P(r,l,s),i=!0},p:ae,i(l){i||(y(e.$$.fragment,l),y(r.$$.fragment,l),i=!0)},o(l){E(e.$$.fragment,l),E(r.$$.fragment,l),i=!1},d(l){D(e,l),l&&M(t),D(r,l)}}}class Lm extends fe{constructor(e){super(),ue(this,e,null,Bm,le,{})}}new Lm({target:document.getElementById("app"),props:{}});export{zn as $,Hn as A,we as B,De as C,Fe as D,Oe as E,He as F,ze as G,st as H,de as I,he as J,zm as K,At as L,Vn as M,Re as N,Ge as O,Dm as P,Ln as Q,ns as R,fe as S,be as T,cn as U,Ci as V,va as W,to as X,ke as Y,pr as Z,Hi as _,Zl as a,Ll as a0,Yu as a1,Qt as a2,rc as a3,Mr as a4,ji as a5,qn as a6,gi as a7,Ia as b,z as c,E as d,D as e,_t as f,Ra as g,Pm as h,ue as i,Z as j,L as k,M as l,P as m,Nn as n,Ft as o,mr as p,Se as q,ae as r,le as s,y as t,ne as u,F as v,k as w,q as x,O as y,pe as z};
